# hotel-saasデプロイのための修正状況

## 現在の状況

hotel-saasリポジトリのデプロイが失敗している原因を調査した結果、以下の問題が見つかりました：

### 1. Vueファイルの末尾の余分な「%」記号

以下のファイルの末尾に余分な「%」記号があり、ビルド時に`import.meta`エラーを引き起こしています：

- `layouts/operation.vue` - 末尾に「%」記号あり
- `layouts/info.vue` - 末尾に「%」記号あり
- `assets/css/billing-fix.css` - 末尾に「%」記号あり

`layouts/fullscreen.vue`と`layouts/receipt.vue`はすでに修正済みです。

### 2. prisma.tsのエクスポート方法

`server/utils/prisma.ts`ファイルでは`export default prisma %`のみで、末尾に「%」記号があり、また`export { prisma }`がないため、他のファイルで`import { prisma } from '@/server/utils/prisma'`としている箇所でエラーが発生しています。

### 3. nuxt.config.tsの設定

`nuxt.config.ts`ファイルでは問題のある`billing-fix.css`をインポートしています：
```javascript
css: ["~/assets/css/tailwind.css", "~/assets/css/billing-fix.css"],
```

## 修正計画

以下の修正を行う必要があります：

1. **Vueファイルの修正**:
   - `layouts/operation.vue`の末尾の「%」記号を削除
   - `layouts/info.vue`の末尾の「%」記号を削除
   - `assets/css/billing-fix.css`の末尾の「%」記号を削除

2. **prisma.tsの修正**:
   - 末尾の「%」記号を削除
   - `export { prisma }`を追加

3. **nuxt.config.tsの修正**:
   - `billing-fix.css`のインポートを削除するか、修正後のファイルを使用

4. **package.jsonの修正**:
   - `react`のバージョンを`^19.1.1`から`^18.2.0`に変更
   - `vue-i18n`パッケージを追加

## 次のステップ

1. 上記の修正をhotel-saasリポジトリに適用
2. 修正をコミットしてGitHubにプッシュ
3. GitHub Actionsを通じて開発環境にデプロイ
4. 開発サーバーのNode.jsバージョンをv20以上にアップグレード

## 注意点

- 修正は必ずhotel-kanriから行い、変更理由と日時を明記すること
- 各システム間での相互編集は禁止されていることに注意
