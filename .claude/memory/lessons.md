# 学習した教訓

試行錯誤の末に学んだ暗黙知を記録します。

---

## LESSON-001: SSOTを読まずに実装しない

**学習日**: 2024-11

### 背景
「たぶんこうだろう」で実装を進めた結果、SSOT違反が多発。

### 教訓
- 実装前に必ずSSOTを読む
- 「[SSOTファイル名] 読了」と明示してから実装開始

---

## LESSON-002: 既存実装を調査してから実装

**学習日**: 2024-11

### 背景
既存の命名規則やパターンを無視して実装し、整合性が崩れた。

### 教訓
- 同ディレクトリの既存ファイルを3つ以上確認
- パターンを把握してから実装

---

## LESSON-003: テストなしでPRを出さない

**学習日**: 2024-11

### 背景
「動いてるから大丈夫」でPRを出したら、他の機能が壊れていた。

### 教訓
```bash
# 必ず実行
./scripts/test-standard-admin.sh  # 管理画面
./scripts/test-standard-guest.sh  # ゲスト画面
```

---

## LESSON-004: フォールバック値は絶対禁止

**学習日**: 2024-10

### 背景
開発環境で`|| 'default'`を使い、本番で障害発生。

### 教訓
```typescript
// ❌ 絶対禁止
const tenantId = session.tenantId || 'default';

// ✅ エラーを投げる
if (!session.tenantId) {
  throw new Error('テナントIDが必要');
}
```

---

## LESSON-005: 点数よりコンテキストの品質

**学習日**: 2025-01

### 背景
LLM監査のスコアを上げることに注力した結果、本質を見失った。

### 教訓
- 監査スコアは手段であって目的ではない
- 正確なコンテキスト提供が品質の源泉
- マルチLLMより「正しい情報を与える」ことが重要

---

## テンプレート

```markdown
## LESSON-XXX: [タイトル]

**学習日**: YYYY-MM

### 背景
[何が起きたか]

### 教訓
[学んだこと]
```
