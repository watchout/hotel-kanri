# システム間修正ルール

## 基本原則

1. **hotel-kanriからの修正許可**:
   - hotel-kanriからは各システム（hotel-saas、hotel-pms、hotel-member、hotel-common）の修正や調整のためのファイル操作が可能
   - 修正を行う際は、必ず変更理由と日時を明記すること

2. **システム間の修正禁止**:
   - 各システム間で相互にファイルやデータベースを編集することは禁止
   - 例: hotel-saasがhotel-pmsのファイルを編集することは不可
   - 例: hotel-memberがhotel-commonのデータベースを直接操作することは不可

## 正しい修正フロー

### hotel-kanriからの修正手順

1. 修正が必要なファイルを特定
2. 修正内容と理由を明確に文書化
3. 修正日時を記録
4. 対象システムのリポジトリに直接変更を適用
5. 変更をコミット・プッシュ
6. GitHub Actionsを通じてデプロイ

### 修正記録の例

```
# 修正記録
- 対象ファイル: hotel-saas/layouts/fullscreen.vue
- 修正内容: 末尾の余分な '%' 記号を削除
- 修正理由: ビルド時に import.meta エラーが発生するため
- 修正日時: 2025-08-17 14:30
- 修正者: hotel-kanri
```

## システム間の適切な連携方法

各システムが他のシステムと連携する必要がある場合は、以下の方法を使用してください：

1. **APIを通じた連携**:
   - 各システムが公開しているAPIを使用
   - 認証・認可を適切に行う

2. **イベントドリブン連携**:
   - Pub/Subパターンを使用
   - 各システムはイベントを発行・購読

3. **共通データベースアクセス**:
   - hotel-commonが提供する統一クライアントを使用
   - 直接的なデータベース操作は避ける

## 例外的な状況

緊急時や特別な状況で上記のルールに従えない場合は、以下の手順を踏んでください：

1. 例外的な対応が必要な理由を文書化
2. 事前に関係者に通知
3. 変更後に詳細な報告書を作成
4. 再発防止策を検討・実施

このルールを遵守することで、システム間の依存関係を明確に保ち、予期せぬ問題の発生を防ぎます。
