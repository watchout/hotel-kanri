# 本番同等開発ルール導入通知

**日付**: 2025年8月15日  
**対象**: すべての開発チーム（Sun, Luna, Suno, Iza）  
**重要度**: 最高  
**発信者**: 統合管理チーム  

## 通知内容

本日より、すべてのシステム（hotel-saas, hotel-pms, hotel-member, hotel-common）において、**本番同等開発ルール**を導入・適用します。この新しいルールは、開発段階でのモック実装や一時的な実装による問題を解決し、すべての開発が本番環境と同等のクオリティで行われることを保証するためのものです。

## 背景と目的

現在、以下の問題が発生しています：

- 開発段階でのモック実装が本番実装に置き換えられていない
- APIへの接続がモックデータとの応答と混在している
- 「後で実装する」という前提での一時的な実装が残ったまま
- 開発が中途半端な状態で次の機能開発に移行している

これらの問題により、本番環境で正常に動作しないコードが増加し、運用上の問題が発生しています。本ルールの導入により、これらの問題を解決し、より高品質な開発を実現します。

## 主要なルール変更

1. **モックデータの使用制限**：
   - 開発初期段階でのみ許可
   - PR前に実際のAPIに接続する実装に置き換えること

2. **環境変数の変更**：
   - hotel-saas: `OFFLINE_MODE_ENABLED=false`
   - hotel-pms: `OFFLINE_FIRST=false`
   - 全システム: `MOCK_API=false`

3. **PR承認基準の厳格化**：
   - モックデータや一時的な実装が残っていないこと
   - すべてのTODO/FIXMEが解決されていること
   - テストカバレッジが基準を満たしていること（最低80%）
   - エラーハンドリングが完全に実装されていること

4. **CI/CDパイプラインの強化**：
   - モックデータ検出チェック
   - 未解決のTODO/FIXMEコメント検出
   - テストカバレッジ確認
   - 環境変数の検証

## 各チームの対応事項

### Sun（hotel-saas）チーム
- モックデータを実際のAPIに置き換える
- OFFLINE_MODE_ENABLEDをfalseに設定
- すべてのTODO/FIXMEを解決

### Luna（hotel-pms）チーム
- OFFLINE_FIRSTをfalseに設定
- dev-api-server.jsの使用を開発環境のみに制限
- 実際のAPIとの連携を完全に実装

### Suno（hotel-member）チーム
- GDPR_COMPLIANCEをtrueに維持
- JWT実装を本番環境と同じセキュリティレベルで実装
- FastAPIとフロントエンドの連携を完全に実装

### Iza（hotel-common）チーム
- 統一データベーススキーマを使用し、マイグレーションを完全にテスト
- RabbitMQのイベント処理を完全に実装し、エラーハンドリングを含める
- 他システムが依存するAPIを完全に実装し、ドキュメント化

## 詳細ドキュメント

詳細なルールと実装ガイドラインについては、以下のドキュメントを参照してください：

- [本番同等開発ルール](../rules/production-ready-development-rules.md)
- [hotel-saasルール](../rules/hotel-saas-rules.md)
- [hotel-pmsルール](../rules/hotel-pms-rules.md)
- [hotel-memberルール](../rules/hotel-member-rules.md)
- [hotel-commonルール](../rules/hotel-common-rules.md)

## 移行期間

- **既存機能の修正**: 2週間以内
- **新規機能開発**: 即時適用

## 質問・サポート

本ルールに関する質問やサポートが必要な場合は、統合管理チームにお問い合わせください。

---

統合管理チーム
