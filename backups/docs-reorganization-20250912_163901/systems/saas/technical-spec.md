# hotel-saas 技術仕様

## システム構成

### フロントエンド
- **フレームワーク**: Nuxt 3 + Vue 3 + TypeScript
- **スタイル**: TailwindCSS
- **状態管理**: Pinia
- **UI/UXライブラリ**: Nuxt UI (+ 独自コンポーネント)
- **アクセシビリティ**: WCAG 2.1 AA準拠
- **PWA対応**: オフライン機能（特にオーダー管理）

### バックエンド
- **フレームワーク**: Node.js + Express + TypeScript
- **API設計**: RESTful + GraphQL
- **データベース**: PostgreSQL（共通基盤）
- **ORM**: Prisma
- **認証**: JWT（hotel-common統一基盤）
- **WebSocket**: リアルタイム通信

### その他
- **キャッシュ/セッション**: Redis
- **多言語対応**: 英語・日本語
- **ダークモード**: 対応

## 画面構成

### 1. ホーム画面
- ウェルカムメッセージ
- クイックアクセスメニュー
- お知らせ・プロモーション
- 天気情報

### 2. サービスメニュー
- ルームサービス
- 館内施設予約
- 客室設備操作
- コンシェルジュサービス

### 3. 顧客情報画面
- 予約詳細
- 請求情報
- ポイント情報
- プロフィール設定

### 4. フィードバック画面
- サービス評価
- 滞在満足度調査
- 改善提案入力

## データフロー

### 1. 顧客情報取得
1. hotel-member APIから顧客基本情報を取得
2. customer.updatedイベントを購読して最新情報を維持

### 2. 予約情報取得
1. hotel-pms APIから予約情報を取得
2. reservation.updatedイベントを購読して最新情報を維持

### 3. サービス注文処理
1. ユーザーからの注文情報を受け取る
2. 注文情報をバリデーション
3. service.orderedイベントを発行
4. hotel-pmsで請求処理
5. 注文状況を更新

### 4. フィードバック処理
1. ユーザーからのフィードバックを受け取る
2. feedback.submittedイベントを発行
3. hotel-memberで顧客情報に紐づけて保存

## PWA機能とオフライン対応
- オフライン時のサービス注文キャッシュ
- オンライン復帰時の自動同期
- ローカルストレージを活用した一時保存
- サービスワーカーによるアセットキャッシュ

## パフォーマンス要件
- 画面表示: 2秒以内
- API応答: 1秒以内
- 同時接続: 最大1000ユーザー

## テスト要件
- 単体テスト: Vitest
- E2Eテスト: Cypress
- カバレッジ目標: 80%以上

## デプロイメント
- コンテナ化: Docker
- CI/CD: GitHub Actions
- 環境: 開発、ステージング、本番
- ブルー/グリーンデプロイメント

## 関連ドキュメント
- [システム概要](./overview.md)
- [UI/UX設計](./ui-ux-design.md)
- [開発ガイドライン](../../development/guidelines/saas-guidelines.md)
- [ディレクトリ構造](./directory-structure.md)