# hotel-common ディレクトリ構造

hotel-commonプロジェクトは以下のディレクトリ構造で構成されています。

```
hotel-common/
├── packages/                # モノレポ構造
│   ├── auth/                # 認証基盤
│   │   ├── src/             # ソースコード
│   │   │   ├── controllers/ # コントローラー
│   │   │   ├── services/    # サービス
│   │   │   ├── dto/         # データ転送オブジェクト
│   │   │   ├── entities/    # エンティティ
│   │   │   └── guards/      # 認証ガード
│   │   └── tests/           # テスト
│   ├── database/            # データベース基盤
│   │   ├── src/             # ソースコード
│   │   │   ├── client/      # UnifiedPrismaClient
│   │   │   ├── migrations/  # マイグレーション管理
│   │   │   ├── schema/      # スキーマ管理
│   │   │   └── utils/       # ユーティリティ
│   │   └── prisma/          # Prismaスキーマ
│   ├── events/              # イベント連携基盤
│   │   ├── src/             # ソースコード
│   │   │   ├── broker/      # イベントブローカー
│   │   │   ├── publisher/   # パブリッシャー
│   │   │   ├── subscriber/  # サブスクライバー
│   │   │   ├── retry/       # 再試行メカニズム
│   │   │   └── dlq/         # デッドレターキュー
│   │   └── schemas/         # イベントスキーマ
│   ├── ui/                  # 共通UIコンポーネント
│   │   ├── src/             # ソースコード
│   │   │   ├── components/  # コンポーネント
│   │   │   ├── hooks/       # カスタムフック
│   │   │   ├── styles/      # スタイル
│   │   │   └── utils/       # ユーティリティ
│   │   └── storybook/       # Storybook
│   ├── guardrails/          # ガードレールシステム
│   │   ├── src/             # ソースコード
│   │   │   ├── checkers/    # 整合性チェッカー
│   │   │   ├── validators/  # バリデーター
│   │   │   ├── monitors/    # モニター
│   │   │   └── repair/      # 自動修復
│   │   └── rules/           # ガードレールルール
│   └── utils/               # 共通ユーティリティ
│       ├── src/             # ソースコード
│       │   ├── date/        # 日付ユーティリティ
│       │   ├── validation/  # バリデーション
│       │   ├── formatting/  # フォーマット
│       │   └── logging/     # ロギング
│       └── tests/           # テスト
├── api/                     # APIゲートウェイ
│   ├── src/                 # ソースコード
│   │   ├── gateway/         # ゲートウェイ
│   │   ├── routes/          # ルート
│   │   ├── middleware/      # ミドルウェア
│   │   └── graphql/         # GraphQL
│   └── openapi/             # OpenAPI仕様
├── monitoring/              # 監視・ロギング
│   ├── src/                 # ソースコード
│   │   ├── metrics/         # メトリクス
│   │   ├── alerts/          # アラート
│   │   ├── logging/         # ロギング
│   │   └── dashboards/      # ダッシュボード
│   └── config/              # 設定
├── docs/                    # ドキュメント
│   ├── architecture/        # アーキテクチャ設計
│   ├── api/                 # API仕様
│   └── integration/         # 統合ガイド
├── scripts/                 # 自動化スクリプト
│   ├── build/               # ビルドスクリプト
│   ├── deploy/              # デプロイスクリプト
│   ├── test/                # テストスクリプト
│   └── ci/                  # CI/CDスクリプト
├── config/                  # 設定
│   ├── development/         # 開発環境設定
│   ├── staging/             # ステージング環境設定
│   └── production/          # 本番環境設定
└── tests/                   # 統合テスト
    ├── integration/         # 統合テスト
    ├── e2e/                 # E2Eテスト
    └── performance/         # パフォーマンステスト
```

## 主要ディレクトリの役割

### packages/
モノレポ構造で管理される各パッケージを格納します。各パッケージは特定の機能領域に特化しています。

#### auth/
認証基盤に関するコードを格納します。JWT認証、権限管理、セッション管理などの機能を提供します。

#### database/
データベース基盤に関するコードを格納します。UnifiedPrismaClient、マイグレーション管理、スキーマ管理などの機能を提供します。

#### events/
イベント連携基盤に関するコードを格納します。イベントブローカー、パブリッシャー、サブスクライバー、再試行メカニズムなどの機能を提供します。

#### ui/
共通UIコンポーネントに関するコードを格納します。各システムで再利用可能なコンポーネント、フック、スタイルなどを提供します。

#### guardrails/
ガードレールシステムに関するコードを格納します。データ整合性チェック、アクセス権限検証、イベント連携監視などの機能を提供します。

#### utils/
共通ユーティリティに関するコードを格納します。日付処理、バリデーション、フォーマット、ロギングなどの機能を提供します。

### api/
APIゲートウェイに関するコードを格納します。各システムのAPIを統合し、単一のエントリーポイントを提供します。

### monitoring/
監視・ロギングに関するコードを格納します。メトリクス収集、アラート設定、ロギング、ダッシュボードなどの機能を提供します。

### docs/
プロジェクトのドキュメントを格納します。アーキテクチャ設計、API仕様、統合ガイドなどが含まれます。

### scripts/
自動化スクリプトを格納します。ビルド、デプロイ、テスト、CI/CDなどのスクリプトが含まれます。

### config/
環境別の設定ファイルを格納します。開発、ステージング、本番などの環境設定が含まれます。

### tests/
統合テスト、E2Eテスト、パフォーマンステストなどのテストコードを格納します。

## 命名規則

- **ファイル名**: キャメルケース（サービス、ユーティリティ）またはケバブケース（設定）
- **クラス**: パスカルケース（例: AuthService）
- **関数**: キャメルケース（例: validateToken）
- **定数**: 大文字スネークケース（例: DEFAULT_TOKEN_EXPIRY）
- **インターフェース**: パスカルケース、接頭辞「I」（例: IAuthService）
- **型定義**: パスカルケース（例: UserCredentials）

## 関連ドキュメント
- [技術仕様](./technical-spec.md)
- [アーキテクチャ設計](./architecture.md)
- [開発ガイドライン](../../development/guidelines/common-guidelines.md)