# 開発ルールとドキュメント標準

このドキュメントでは、omotenasuai.comプロジェクトにおける開発ルールとドキュメント化の標準を定義します。

## 1. プロジェクト構造

### 1.1 ディレクトリ構造

```
project/
├── src/             # ソースコード
├── docs/            # ドキュメント
│   ├── api/         # API仕様書
│   ├── database/    # データベース設計
│   ├── roadmap/     # 開発ロードマップ
│   ├── setup/       # セットアップ手順
│   └── standards/   # 開発標準
├── tests/           # テストコード
├── scripts/         # ユーティリティスクリプト
└── .cursor/         # Cursor IDE設定
```

### 1.2 ドキュメントファイル命名規則

- すべてのドキュメントファイルは小文字とハイフンで命名
- 例: `api-authentication-spec.md`, `database-schema.md`
- 日付を含める場合はISO形式（YYYY-MM-DD）を使用
- 例: `2023-11-15-sprint-planning.md`

## 2. ドキュメント化ルール

### 2.1 必須ドキュメント

以下のドキュメントは各プロジェクトで必須とします：

1. **README.md**
   - プロジェクト概要
   - セットアップ手順
   - 主要機能の説明
   - 技術スタック

2. **CONTRIBUTING.md**
   - コントリビューションガイドライン
   - コーディング規約
   - プルリクエストプロセス

3. **開発ロードマップ**
   - `docs/roadmap/current-roadmap.md`
   - 四半期ごとに更新

4. **アーキテクチャ概要**
   - `docs/architecture.md`
   - システム構成図を含む

5. **API仕様書**
   - OpenAPIまたはMarkdownで記述
   - `docs/api/` ディレクトリに配置

### 2.2 ドキュメント更新ルール

1. **コード変更に伴うドキュメント更新**
   - コードを変更する場合、関連するドキュメントも同時に更新
   - 同一のプルリクエストに含める

2. **ロードマップの更新頻度**
   - 少なくとも2週間に1回更新
   - 大きな変更があった場合は即時更新

3. **レビュープロセス**
   - ドキュメントの変更もコードレビューの対象とする
   - 技術的正確性と理解のしやすさを確認

### 2.3 ドキュメントフォーマット

1. **Markdownの使用**
   - すべてのドキュメントはMarkdown形式
   - GitHub Flavored Markdown準拠

2. **標準セクション**
   - 概要（Overview）
   - 前提条件（Prerequisites）
   - 手順（Steps/Instructions）
   - 注意事項（Notes）
   - 関連ドキュメント（Related Documents）

3. **図表の使用**
   - 複雑な概念は図表で説明
   - Mermaid記法を推奨
   - 画像ファイルは `docs/images/` に配置

## 3. 開発プロセスルール

### 3.1 ブランチ戦略

1. **ブランチ命名規則**
   - 機能開発: `feature/機能名`
   - バグ修正: `fix/バグ名`
   - リファクタリング: `refactor/対象名`
   - ドキュメント: `docs/ドキュメント名`

2. **プルリクエストプロセス**
   - テンプレートに従って作成
   - 少なくとも1人のレビュアーが必要
   - CIテストをパスすること

3. **マージ条件**
   - レビュー承認済み
   - CIテストパス
   - コンフリクトなし

### 3.2 コミットメッセージ規則

Conventional Commitsに準拠:

```
<type>(<scope>): <description>

[optional body]

[optional footer]
```

- **type**: feat, fix, docs, style, refactor, test, chore
- **scope**: 変更の範囲（オプション）
- **description**: 変更内容の簡潔な説明

例:
```
feat(auth): implement JWT authentication
fix(api): resolve CORS issue in user endpoint
docs(readme): update installation instructions
```

### 3.3 コードレビュールール

1. **レビュー対象**
   - すべてのコード変更
   - ドキュメント変更
   - 設定ファイル変更

2. **レビュー基準**
   - コーディング規約準拠
   - テストの有無
   - パフォーマンス考慮
   - セキュリティ考慮
   - ドキュメント更新

3. **レビュー期間**
   - 小規模変更: 24時間以内
   - 大規模変更: 48時間以内

## 4. Cursor IDE活用ルール

### 4.1 共有設定

`.cursor/` ディレクトリに以下の設定を配置:

1. **settings.json**
   - エディタ設定
   - フォーマッタ設定
   - リンタ設定

2. **snippets/**
   - 共通コードスニペット
   - プロジェクト固有のスニペット

3. **prompts/**
   - AIプロンプトテンプレート
   - タスク別のプロンプト例

### 4.2 AIプロンプト活用ガイドライン

1. **効果的なプロンプト作成**
   - 具体的なタスクを明示
   - コンテキストを十分に提供
   - 期待する出力形式を指定

2. **共有プロンプトの活用**
   - 共通タスクには定型プロンプトを使用
   - 成功したプロンプトは共有リポジトリに追加

3. **AIと人間の役割分担**
   - AIに適した作業: コードの初期ドラフト、リファクタリング、ドキュメント生成
   - 人間が行うべき作業: アーキテクチャ設計、セキュリティレビュー、ビジネスロジック検証

## 5. ドキュメント種類別テンプレート

### 5.1 機能仕様書テンプレート

```markdown
# [機能名] 機能仕様書

## 概要
[機能の簡潔な説明]

## 目的
[この機能が解決する問題や達成する目標]

## 要件
- [要件1]
- [要件2]
- [要件3]

## 技術的アプローチ
[実装方法の概要]

## API設計
[必要なAPIエンドポイントの詳細]

## データモデル
[必要なデータ構造]

## UI/UXデザイン
[UI要素とユーザーフロー]

## テスト計画
[テスト戦略と主要なテストケース]

## 制約事項
[技術的または業務的な制約]

## タイムライン
- 開発開始: [日付]
- レビュー: [日付]
- リリース: [日付]
```

### 5.2 開発ロードマップテンプレート

```markdown
# 開発ロードマップ（[期間]）

## 現在のフェーズ: [フェーズ名]

### 完了した機能
- ✅ [機能名] ([完了日])
- ✅ [機能名] ([完了日])

### 進行中の機能
- 🔄 [機能名] (@[担当者], ~[完了予定日])
- 🔄 [機能名] (@[担当者], ~[完了予定日])

### 今後の予定
- 📅 [機能名] ([開始予定日])
- 📅 [機能名] ([開始予定日])

## 技術的負債
- [対応すべき技術的負債項目]
- [対応すべき技術的負債項目]

## マイルストーン
- [マイルストーン名]: [日付]
- [マイルストーン名]: [日付]

## リスクと対策
- [リスク]: [対策]
- [リスク]: [対策]
```

### 5.3 障害報告テンプレート

```markdown
# 障害報告: [簡潔なタイトル]

## 概要
[障害の簡潔な説明]

## 発生日時
[発生した日時]

## 影響範囲
[影響を受けたシステム/ユーザー]

## 症状
[観察された具体的な症状]

## 原因
[特定された根本原因]

## 解決策
[実施した対策]

## 再発防止策
[将来同様の問題を防ぐための対策]

## 教訓
[この障害から学んだこと]

## 関連リンク
- [関連するIssueやPR]
- [関連するログやモニタリングデータ]
```

## 6. レビュープロセス

### 6.1 ドキュメントレビューチェックリスト

- [ ] 正確性: 情報は正確か
- [ ] 完全性: 必要な情報がすべて含まれているか
- [ ] 明確性: 説明は明確で理解しやすいか
- [ ] 一貫性: 用語や形式は一貫しているか
- [ ] 最新性: 最新の状態を反映しているか
- [ ] 文法・スペル: 文法やスペルに誤りはないか
- [ ] フォーマット: 標準フォーマットに従っているか
- [ ] リンク: すべてのリンクは有効か

### 6.2 コードレビューとドキュメントレビューの統合

1. プルリクエストにコードとドキュメントの両方を含める
2. レビュアーはコードとドキュメントの整合性を確認
3. ドキュメントの変更点をプルリクエスト説明に明記

## 7. ドキュメント管理ツール

### 7.1 推奨ツール

- **バージョン管理**: Git/GitHub
- **ドキュメント作成**: Markdown + VS Code/Cursor
- **図表作成**: Mermaid, Draw.io
- **API仕様**: Swagger/OpenAPI
- **タスク管理**: GitHub Issues, GitHub Projects

### 7.2 ドキュメント検索と発見性

1. READMEに主要ドキュメントへのリンクを含める
2. `docs/index.md` にドキュメントマップを作成
3. GitHub Wikiを活用（オプション）

## 8. ドキュメント化の責任分担

### 8.1 役割別責任

- **開発者**: 技術仕様、API仕様、コードコメント
- **テックリード**: アーキテクチャドキュメント、設計原則
- **プロジェクトマネージャー**: ロードマップ、進捗レポート
- **QA**: テスト計画、テストケース、バグレポート

### 8.2 レビュー責任

- 各ドキュメントタイプに主要レビュアーを割り当て
- クロスレビューを促進（異なる役割間のレビュー）

## 9. ドキュメント品質メトリクス

- 更新頻度
- カバレッジ（必須ドキュメントの完成度）
- 正確性（報告されたドキュメントのエラー数）
- アクセシビリティ（検索のしやすさ、リンクの有効性）

## 10. 継続的改善

- 四半期ごとにドキュメント品質レビュー
- フィードバックの収集と対応
- ベストプラクティスの更新と共有

---

このドキュメント自体も、上記のルールに従って定期的に更新されます。
最終更新: [YYYY-MM-DD]