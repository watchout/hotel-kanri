# G3フェーズ検証チェックリスト

## 基本情報
- 検証日時: 2025-09-12 HH:MM
- 検証者: [担当者名]
- 環境: 開発サーバー (163.44.97.2)

## 1. 各サービスの基本検証

### 1.1 hotel-common (3400)
- [ ] PM2プロセスが正常稼働している
- [ ] `/api/health`エンドポイントが200を返す
- [ ] サブドメイン（dev-api.omotenasuai.com）からアクセス可能
- [ ] 統合DB（hotel_unified_db）に接続している
- [ ] CORS設定が正しく機能している

### 1.2 hotel-saas (3100)
- [ ] PM2プロセスが正常稼働している
- [ ] `/api/health`エンドポイントが200を返す
- [ ] サブドメイン（dev-app.omotenasuai.com）からアクセス可能
- [ ] 統合DB（hotel_unified_db）に接続している
- [ ] UIが正常に表示される

### 1.3 hotel-member API (3200)
- [ ] PM2プロセスが正常稼働している
- [ ] `/health`エンドポイントが200を返す
- [ ] 統合DB（hotel_unified_db）に接続している
- [ ] APIエンドポイントが正常に応答する

### 1.4 hotel-member UI (8080)
- [ ] PM2プロセスが正常稼働している
- [ ] `/health`エンドポイントが200を返す
- [ ] サブドメイン（dev-crm.omotenasuai.com）からアクセス可能
- [ ] UIが正常に表示される
- [ ] APIと正常に連携している

### 1.5 hotel-pms (3300)
- [ ] PM2プロセスが正常稼働している
- [ ] `/health`エンドポイントが200を返す
- [ ] サブドメイン（dev-pms.omotenasuai.com）からアクセス可能
- [ ] 統合DB（hotel_unified_db）に接続している
- [ ] UIが正常に表示される
- [ ] オフライン機能が正常に動作する

## 2. サービス間連携検証

### 2.1 SaaS → Common連携
- [ ] `/api/common-test`エンドポイントが200を返す
- [ ] 認証連携が正常に機能する
- [ ] マスターデータ取得が正常に機能する

### 2.2 Member → Common連携
- [ ] `/api/common-test`エンドポイントが200を返す
- [ ] 認証連携が正常に機能する
- [ ] マスターデータ取得が正常に機能する

### 2.3 PMS → Common連携
- [ ] `/api/common-test`エンドポイントが200を返す
- [ ] 認証連携が正常に機能する
- [ ] マスターデータ取得が正常に機能する

### 2.4 SaaS → Member連携
- [ ] 会員情報取得が正常に機能する
- [ ] 認証連携が正常に機能する

### 2.5 SaaS → PMS連携
- [ ] 予約情報連携が正常に機能する
- [ ] 部屋在庫確認が正常に機能する

## 3. 統合DB検証

### 3.1 基本設定
- [ ] `hotel_unified_db`が存在する
- [ ] `hotel_app`ユーザーが適切な権限を持つ
- [ ] 各サービスが`hotel_unified_db`に接続している

### 3.2 データ整合性
- [ ] テナントIDが適切に設定されている
- [ ] 共通マスターデータが正常に参照できる
- [ ] トランザクションが正常に処理される

## 4. Nginx設定検証

### 4.1 サブドメインマッピング
- [ ] dev-api.omotenasuai.com → 3400
- [ ] dev-app.omotenasuai.com → 3100
- [ ] dev-crm.omotenasuai.com → 8080/3200
- [ ] dev-pms.omotenasuai.com → 3300

### 4.2 SSL設定
- [ ] 各サブドメインでSSLが正常に機能している
- [ ] 証明書が有効である

## 5. 環境変数検証

### 5.1 共通設定
- [ ] `UNIFY_ENV=dev`が設定されている
- [ ] `DATABASE_URL`が正しく設定されている
- [ ] `JWT_SECRET`が共通設定されている

### 5.2 サービス固有設定
- [ ] 各サービスの固有環境変数が正しく設定されている

## 6. パフォーマンス検証

### 6.1 応答時間
- [ ] 各APIエンドポイントの応答時間が許容範囲内
- [ ] UI表示の応答時間が許容範囲内

### 6.2 リソース使用状況
- [ ] CPU使用率が許容範囲内
- [ ] メモリ使用率が許容範囲内
- [ ] ディスク使用率が許容範囲内

## 7. エラーログ確認

### 7.1 アプリケーションログ
- [ ] エラーログに重大な問題がない
- [ ] 警告ログの内容を確認

### 7.2 システムログ
- [ ] Nginxエラーログに問題がない
- [ ] システムログに問題がない

## 8. G4フェーズ準備確認

### 8.1 旧DB確認
- [ ] 旧DB（hotel_saas_dev, hotel_member_dev, hotel_pms_dev）の状態確認
- [ ] バックアップ準備の確認

### 8.2 移行計画
- [ ] 旧DB削除のタイミング計画
- [ ] ロールバック手順の確認

## 備考
- 検証中に発見された問題:
- 解決策:
- 追加の注意事項:

## 検証結果
- [ ] 全項目合格
- [ ] 条件付き合格（一部未解決の問題あり）
- [ ] 不合格（重大な問題あり）

## 次のステップ
- G4フェーズ（旧DB整理）への移行判断:
- 追加の作業が必要な場合の詳細:

---
検証完了日時: 2025-09-12 HH:MM
承認者: [承認者名]
