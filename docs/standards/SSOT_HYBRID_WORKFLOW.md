# SSOT ハイブリッドワークフロー

**作成日**: 2026-01-21  
**バージョン**: 1.0.0  
**月額コスト**: 約$1（月20タスク想定）

---

## 📋 概要

Cursorでの手動作成とGPT-4o-miniによる自動監査を組み合わせた、低コスト・高品質なSSOT作成ワークフロー。

---

## 🔄 ワークフロー

```
┌─────────────────────────────────────────────────────────┐
│ Step 1: SSOT作成（Cursor）                              │
│                                                         │
│ >> write SSOT_XXX                                       │
│                                                         │
│ ・SSOT_QUALITY_CHECKLIST.md を参照                      │
│ ・既存SSOTパターンを踏襲                                │
│ ・人間が確認しながら作成                                │
└─────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────┐
│ Step 2: SSOT監査（自動）                                │
│                                                         │
│ node scripts/ssot-audit/audit-ssot.cjs <SSOTパス>       │
│                                                         │
│ ・技術的正確性チェック（GPT-4o-mini）                   │
│ ・実装可能性チェック（GPT-4o-mini）                     │
│ ・コスト: $0.01/回                                      │
└─────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────┐
│ Step 3: レポート確認（Cursor）                          │
│                                                         │
│ evidence/ssot-audit/SSOT_XXX-AUDIT-REPORT.md            │
│                                                         │
│ ・スコア確認（80点以上で合格）                          │
│ ・Critical指摘を確認                                    │
└─────────────────────────────────────────────────────────┘
                           ↓
         ┌─────────────────┴─────────────────┐
         ↓                                   ↓
┌─────────────────────┐         ┌─────────────────────┐
│ スコア80点以上       │         │ スコア80点未満       │
│                     │         │                     │
│ → Step 5へ          │         │ → Step 4へ          │
└─────────────────────┘         └─────────────────────┘
                                            ↓
┌─────────────────────────────────────────────────────────┐
│ Step 4: SSOT修正（Cursor）                              │
│                                                         │
│ ・Critical指摘を修正                                    │
│ ・Warning指摘を可能な限り対応                           │
│ ・Step 2に戻って再監査                                  │
└─────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────┐
│ Step 5: プロンプト生成（Cursor）                        │
│                                                         │
│ >> prmt <タスクID>                                      │
│                                                         │
│ ・SSOTからプロンプト自動生成                            │
│ ・実装AIに渡して実行                                    │
└─────────────────────────────────────────────────────────┘
```

---

## 📊 評価基準

### スコア内訳（100点満点）

| カテゴリ | 配点 | チェック項目 |
|:---------|:-----|:-------------|
| **技術的正確性** | 50点 | DB設計、API設計、認証 |
| **実装可能性** | 50点 | 要件ID、Accept条件、チェックリスト |

### 合格基準

| スコア | 判定 | アクション |
|:-------|:-----|:-----------|
| 90+ | ✅ 優秀 | そのまま進行 |
| 80-89 | ✅ 良好 | 軽微な修正推奨（進行可） |
| 60-79 | 🟡 要改善 | Warning対応推奨 |
| 0-59 | 🔴 要修正 | Critical対応必須 |

---

## 🚀 クイックスタート

### 1. 新規SSOT作成

```bash
# Cursorで作成
>> write SSOT_NEW_FEATURE
```

### 2. 監査実行

```bash
# ターミナルで実行
cd /Users/kaneko/hotel-kanri
node scripts/ssot-audit/audit-ssot.cjs docs/03_ssot/00_foundation/SSOT_NEW_FEATURE.md
```

### 3. レポート確認

```bash
# レポートを開く
cat evidence/ssot-audit/SSOT_NEW_FEATURE-AUDIT-REPORT.md
```

### 4. プロンプト生成

```bash
# Cursorで実行
>> prmt COM-123
```

---

## 💰 コスト比較

| 構成 | 月額（20タスク） | 年額 |
|:-----|:-----------------|:-----|
| **ハイブリッド（採用）** | **$0.80** | **$9.60** |
| 全自動（GPT-4o） | $8.20 | $98.40 |
| 全自動（Sonnet） | $11.20 | $134.40 |
| 全自動（Opus） | $54.80 | $657.60 |

**ハイブリッド構成により、全自動の1/10以下のコストで同等の品質保証を実現。**

---

## 📁 ファイル構成

```
hotel-kanri/
├── scripts/
│   └── ssot-audit/
│       ├── audit-ssot.cjs      # 監査スクリプト
│       └── README.md           # 使い方
├── evidence/
│   └── ssot-audit/
│       ├── SSOT_XXX-*.json     # 監査結果（JSON）
│       └── SSOT_XXX-AUDIT-REPORT.md  # 監査レポート
└── docs/
    └── standards/
        └── SSOT_HYBRID_WORKFLOW.md  # このドキュメント
```

---

## 🔧 カスタマイズ

### チェック項目の変更

`scripts/ssot-audit/audit-ssot.cjs`の`CHECKLIST`を編集：

```javascript
const CHECKLIST = {
  technical: [
    { id: 'T01', name: 'カスタム項目', category: 'カスタム' },
    // ...
  ],
  implementability: [
    // ...
  ]
};
```

### モデルの変更

```javascript
const CONFIG = {
  models: {
    auditor1: 'gpt-4o',      // より高精度
    auditor2: 'gpt-4o-mini'  // コスト重視
  }
};
```

---

## 📚 関連ドキュメント

- [SSOT品質チェックリスト](../03_ssot/00_foundation/SSOT_QUALITY_CHECKLIST.md)
- [SSOT作成ルール](../03_ssot/SSOT_CREATION_RULES.md)
- [監査スクリプトREADME](../../scripts/ssot-audit/README.md)

---

**作成者**: Luna（統合管理）  
**最終更新**: 2026-01-21
