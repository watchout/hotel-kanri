# ğŸ” SSOT: ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³æ©Ÿèƒ½

**Doc-ID**: SSOT-SAAS-SUPER-ADMIN-001  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 2.0.1  
**ä½œæˆæ—¥**: 2025å¹´10æœˆ7æ—¥  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ğŸ”´ æ‰¿èªæ¸ˆã¿ï¼ˆæœ€é«˜æ¨©å¨ï¼‰  
**æ‰€æœ‰è€…**: Izaï¼ˆçµ±åˆç®¡ç†è€…ï¼‰

**é–¢é€£SSOT**:
- [SSOT_SAAS_MULTITENANT.md](../00_foundation/SSOT_SAAS_MULTITENANT.md) - ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆåŸºç›¤ï¼ˆæŠ€è¡“çš„ä»•çµ„ã¿ï¼‰
- [SSOT_SAAS_ADMIN_AUTHENTICATION.md](../00_foundation/SSOT_SAAS_ADMIN_AUTHENTICATION.md) - ã‚¹ã‚¿ãƒƒãƒ•ãƒ­ã‚°ã‚¤ãƒ³èªè¨¼
- [SSOT_SAAS_DATABASE_SCHEMA.md](../00_foundation/SSOT_SAAS_DATABASE_SCHEMA.md) - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ
- [SSOT_PRODUCTION_PARITY_RULES.md](../00_foundation/SSOT_PRODUCTION_PARITY_RULES.md) - æœ¬ç•ªåŒç­‰ãƒ«ãƒ¼ãƒ«

---

## ğŸ“‹ ç›®æ¬¡

1. [æ¦‚è¦](#æ¦‚è¦)
2. [å¿…é ˆè¦ä»¶ï¼ˆCRITICALï¼‰](#å¿…é ˆè¦ä»¶critical)
3. [SSOTã«æº–æ‹ ã—ãªã„ã¨ç™ºç”Ÿã™ã‚‹å•é¡Œ](#ssoã«æº–æ‹ ã—ãªã„ã¨ç™ºç”Ÿã™ã‚‹å•é¡Œ)
4. [ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³ã®å®šç¾©](#ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³ã®å®šç¾©)
5. [ä¸»è¦æ©Ÿèƒ½](#ä¸»è¦æ©Ÿèƒ½)
6. [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ](#ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ)
7. [APIä»•æ§˜](#apiä»•æ§˜)
8. [ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…](#ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…)
9. [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£](#ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£)
10. [æ—¢å­˜å®Ÿè£…çŠ¶æ³](#æ—¢å­˜å®Ÿè£…çŠ¶æ³)
11. [å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ](#å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ)

---

## ğŸ“‹ æ¦‚è¦

### ç›®çš„
ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®åŸºå¹¹è¨­å®šã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®ç·åˆç®¡ç†ç”»é¢ã®å®Œå…¨ãªä»•æ§˜ã‚’å®šç¾©ã™ã‚‹ã€‚

### é©ç”¨ç¯„å›²
- ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³èªè¨¼
- ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†ï¼ˆCRUDï¼‰
- æ–™é‡‘ãƒ—ãƒ©ãƒ³ç®¡ç†ï¼ˆå‹•çš„ç·¨é›†ï¼‰
- AIç®¡ç†æ©Ÿèƒ½
- ä½¿ç”¨é‡ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°
- ã‚¢ãƒ©ãƒ¼ãƒˆæ©Ÿèƒ½
- ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“è¨­å®š

### å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼
- **ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…**ï¼ˆæˆ‘ã€…ï¼‰
- **ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³æ¨©é™ã‚’æŒã¤ãƒ¦ãƒ¼ã‚¶ãƒ¼**

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: Vue 3 + Nuxt 3 + TypeScript
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Express + TypeScript (hotel-common)
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: PostgreSQL + Prisma
- **èªè¨¼**: Sessionèªè¨¼ï¼ˆRedis + HttpOnly Cookieï¼‰
- **ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•**: ç‹¬ç«‹ã—ãŸã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã¾ãŸã¯ç‰¹åˆ¥ãªãƒ‘ã‚¹ï¼ˆ`/admin/super-admin`ï¼‰

---

## âš ï¸ å¿…é ˆè¦ä»¶ï¼ˆCRITICALï¼‰

### 1. ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³å°‚ç”¨èªè¨¼

**ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³ã¯é€šå¸¸ã®ã‚¹ã‚¿ãƒƒãƒ•èªè¨¼ã¨ã¯å®Œå…¨ã«åˆ†é›¢ã™ã‚‹ã“ã¨ã€‚**

#### æ­£ã—ã„å®Ÿè£…
- âœ… `super_admin_users`ãƒ†ãƒ¼ãƒ–ãƒ«ã§ç®¡ç†
- âœ… å°‚ç”¨ã®èªè¨¼ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆ`/api/v1/super-admin/auth/login`ï¼‰
- âœ… 2FAå¿…é ˆ
- âœ… IPãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆå¯¾å¿œ
- âœ… ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ: 15åˆ†

#### ç¦æ­¢äº‹é …
- âŒ `staff`ãƒ†ãƒ¼ãƒ–ãƒ«ã§ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³ã‚’ç®¡ç†
- âŒ é€šå¸¸ã®ã‚¹ã‚¿ãƒƒãƒ•ãƒ­ã‚°ã‚¤ãƒ³APIã‚’ä½¿ç”¨
- âŒ 2FAãªã—ã§ã®ãƒ­ã‚°ã‚¤ãƒ³è¨±å¯

---

### 2. å…¨ãƒ†ãƒŠãƒ³ãƒˆã‚¢ã‚¯ã‚»ã‚¹æ¨©é™

**ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³ã¯å…¨ãƒ†ãƒŠãƒ³ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã€‚**

#### å®Ÿè£…è¦ä»¶
```typescript
// ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³åˆ¤å®š
if (req.user.role === 'super_admin') {
  // ãƒ†ãƒŠãƒ³ãƒˆIDãƒ•ã‚£ãƒ«ã‚¿ã‚’é©ç”¨ã—ãªã„
  const tenants = await prisma.tenant.findMany();
} else {
  // é€šå¸¸ã®ã‚¹ã‚¿ãƒƒãƒ•ã¯ãƒ†ãƒŠãƒ³ãƒˆIDãƒ•ã‚£ãƒ«ã‚¿å¿…é ˆ
  const tenantId = req.user.tenant_id;
  if (!tenantId) {
    throw new Error('Tenant ID required');
  }
}
```

---

### 3. æœ¬ç•ªåŒç­‰å®Ÿè£…

**é–‹ç™ºç’°å¢ƒã¨æœ¬ç•ªç’°å¢ƒã§åŒã˜å®Ÿè£…ã‚’ä¿è¨¼ã™ã‚‹ã“ã¨ã€‚**

#### ç¦æ­¢ãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
// âŒ çµ¶å¯¾ç¦æ­¢
const tenantId = user.tenant_id || 'default';

// âŒ ç’°å¢ƒåˆ†å²
if (process.env.NODE_ENV === 'development') {
  // é–‹ç™ºç’°å¢ƒã ã‘ã®å®Ÿè£…
}
```

#### æ­£ã—ã„å®Ÿè£…
```typescript
// âœ… æ­£ã—ã„
const tenantId = user.tenant_id;
if (!tenantId && user.role !== 'super_admin') {
  throw createError({
    statusCode: 400,
    message: 'Tenant ID required'
  });
}
```

**å‚ç…§**: [SSOT_PRODUCTION_PARITY_RULES.md](../00_foundation/SSOT_PRODUCTION_PARITY_RULES.md)

---

## âŒ SSOTã«æº–æ‹ ã—ãªã„ã¨ç™ºç”Ÿã™ã‚‹å•é¡Œ

### ğŸ”´ å•é¡Œ1: é€šå¸¸ã‚¹ã‚¿ãƒƒãƒ•ãŒã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³æ©Ÿèƒ½ã«ã‚¢ã‚¯ã‚»ã‚¹

**ç—‡çŠ¶**: æ¨©é™ã®ãªã„ã‚¹ã‚¿ãƒƒãƒ•ãŒå…¨ãƒ†ãƒŠãƒ³ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã‚’é–²è¦§ãƒ»ç·¨é›†ã§ãã¦ã—ã¾ã†

**åŸå› **: 
```typescript
// âŒ é–“é•ã£ãŸå®Ÿè£…
if (req.user) {
  // å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
  const tenants = await prisma.tenant.findMany();
}
```

**å¯¾å¿œç­–ï¼ˆSSOTã«è¨˜è¼‰æ¸ˆã¿ï¼‰**:
```typescript
// âœ… æ­£ã—ã„å®Ÿè£…
if (req.user.role !== 'super_admin') {
  throw createError({
    statusCode: 403,
    message: 'Super admin access required'
  });
}
```

---

### ğŸ”´ å•é¡Œ2: ãƒ—ãƒ©ãƒ³å¤‰æ›´æ™‚ã®ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶**: ãƒ—ãƒ©ãƒ³å¤‰æ›´å¾Œã€ãƒ†ãƒŠãƒ³ãƒˆãŒæ©Ÿèƒ½åˆ¶é™ã‚’è¶…ãˆã¦ä½¿ç”¨ã§ãã¦ã—ã¾ã†

**åŸå› **: ãƒ—ãƒ©ãƒ³å¤‰æ›´æ™‚ã«æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼ã‚’è¡Œã£ã¦ã„ãªã„

**å¯¾å¿œç­–ï¼ˆSSOTã«è¨˜è¼‰æ¸ˆã¿ï¼‰**:
```typescript
// ãƒ—ãƒ©ãƒ³å¤‰æ›´å‰ã«ä½¿ç”¨çŠ¶æ³ã‚’ç¢ºèª
const currentUsage = await getTenantUsage(tenantId);
if (currentUsage.deviceCount > newPlan.maxDevices) {
  throw new Error('Current device count exceeds new plan limit');
}
```

---

## ğŸ¯ ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³ã®å®šç¾©

### å½¹å‰²
ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®çµ±æ‹¬ç®¡ç†ã‚’è¡Œã†æœ€é«˜æ¨©é™ãƒ¦ãƒ¼ã‚¶ãƒ¼

### ä¸»è¦æ¨©é™

#### 1. ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†
- AIãƒ¢ãƒ‡ãƒ«è¨­å®šãƒ»ä¾¡æ ¼èª¿æ•´
- ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆè¨­å®š
- ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®è¨­å®šå¤‰æ›´

#### 2. ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†
- å…¨ãƒ†ãƒŠãƒ³ãƒˆã®ç›£è¦–ãƒ»ç®¡ç†
- ãƒ†ãƒŠãƒ³ãƒˆä½œæˆãƒ»ç·¨é›†ãƒ»å‰Šé™¤
- ãƒ—ãƒ©ãƒ³å¤‰æ›´ãƒ»èª²é‡‘è¨­å®š
- ã‚·ã‚¹ãƒ†ãƒ åˆ©ç”¨çŠ¶æ³åˆ†æ

#### 3. ãƒ—ãƒ©ãƒ³ç®¡ç†
- æ–™é‡‘ãƒ—ãƒ©ãƒ³ã®ä½œæˆãƒ»ç·¨é›†ãƒ»å‰Šé™¤
- æ©Ÿèƒ½åˆ¶é™ã®å‹•çš„å¤‰æ›´
- ãƒ—ãƒ©ãƒ³é©ç”¨ãƒ»å¤‰æ›´

#### 4. AIç®¡ç†
- AIãƒ¢ãƒ‡ãƒ«ç®¡ç†
- ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆç®¡ç†
- AIä½¿ç”¨çµ±è¨ˆ

#### 5. ä½¿ç”¨é‡ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°
- ãƒ†ãƒŠãƒ³ãƒˆã”ã¨ã®ä½¿ç”¨çŠ¶æ³
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ

#### 6. ã‚¢ãƒ©ãƒ¼ãƒˆç®¡ç†
- ä½¿ç”¨é‡ä¸Šé™ã‚¢ãƒ©ãƒ¼ãƒˆ
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒ©ãƒ¼ãƒˆ
- ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼é€šçŸ¥

#### 7. ãƒ­ã‚°ç®¡ç†
- ã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚°é–²è¦§
- ã‚µãƒ¼ãƒãƒ¼ãƒ­ã‚°é–²è¦§
- ãƒ­ã‚°æ¤œç´¢ãƒ»åˆ†æ
- ã‚¨ãƒ©ãƒ¼èª¿æŸ»æ”¯æ´

#### 8. AIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç† â­ **é‡è¦**
- ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†
- æ¥­æ…‹åˆ¥ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­å®š
- è¨€èªåˆ¥ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­å®š
- æ©Ÿèƒ½åˆ¥ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­å®š
- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

#### 9. ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“è¨­å®š
- ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ¢ãƒ¼ãƒ‰
- ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®š
- APIãƒ¬ãƒ¼ãƒˆåˆ¶é™
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ

#### 10. ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆç®¡ç†
- é€šè²¨ãƒ¬ãƒ¼ãƒˆè¨­å®š
- è‡ªå‹•æ›´æ–°è¨­å®š
- å±¥æ­´ç®¡ç†

#### 11. é€šçŸ¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†
- ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
- Slacké€šçŸ¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
- SMSé€šçŸ¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

#### 12. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©å…ƒ
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
- ãƒ†ãƒŠãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ/ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
- è¨­å®šãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—/å¾©å…ƒ

#### 13. ç›£æŸ»ãƒ­ã‚°é–²è¦§
- ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³æ“ä½œå±¥æ­´
- ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†æ“ä½œå±¥æ­´
- ãƒ—ãƒ©ãƒ³å¤‰æ›´å±¥æ­´
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆ

#### 14. ã‚·ã‚¹ãƒ†ãƒ ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šçŠ¶æ…‹
- Redisæ¥ç¶šçŠ¶æ…‹
- å„ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒçŠ¶æ…‹
- APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ 
- ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿç‡

#### 15. æŠ€è¡“ç®¡ç†
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š
- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©æ—§

### ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã‚¨ãƒªã‚¢
```
/admin/super-admin/*        # ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³å°‚ç”¨ã‚¨ãƒªã‚¢
  â”œâ”€ /dashboard             # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
  â”œâ”€ /tenants/*             # ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†
  â”œâ”€ /plans/*               # ãƒ—ãƒ©ãƒ³ç®¡ç†
  â”œâ”€ /ai/*                  # AIç®¡ç†
  â”œâ”€ /usage/*               # ä½¿ç”¨é‡ç›£è¦–
  â”œâ”€ /alerts/*              # ã‚¢ãƒ©ãƒ¼ãƒˆç®¡ç†
  â”œâ”€ /logs/*                # ãƒ­ã‚°ç®¡ç†
  â”œâ”€ /prompts/*             # AIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†
  â”œâ”€ /exchange-rates/*      # ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆç®¡ç†
  â”œâ”€ /notification-templates/* # é€šçŸ¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†
  â”œâ”€ /backup/*              # ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©å…ƒ
  â”œâ”€ /audit-logs/*          # ç›£æŸ»ãƒ­ã‚°é–²è¦§
  â”œâ”€ /health/*              # ã‚·ã‚¹ãƒ†ãƒ ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
  â””â”€ /settings/*            # ã‚·ã‚¹ãƒ†ãƒ è¨­å®š
```

---

## ğŸ“Š ä¸»è¦æ©Ÿèƒ½

### 1. ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†æ©Ÿèƒ½

#### ãƒ†ãƒŠãƒ³ãƒˆCRUD

**ãƒ†ãƒŠãƒ³ãƒˆä½œæˆ**:
- ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰å½¢å¼ã®UI
- åŸºæœ¬æƒ…å ±å…¥åŠ›ï¼ˆåå‰ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã€é€£çµ¡å…ˆï¼‰
- ãƒ—ãƒ©ãƒ³é¸æŠ
- åˆæœŸè¨­å®š
- ç¢ºèªãƒ»ä½œæˆ

**ãƒ†ãƒŠãƒ³ãƒˆç·¨é›†**:
- åŸºæœ¬æƒ…å ±ã®æ›´æ–°
- ãƒ—ãƒ©ãƒ³å¤‰æ›´
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´ï¼ˆactive/suspended/deletedï¼‰

**ãƒ†ãƒŠãƒ³ãƒˆå‰Šé™¤**:
- è«–ç†å‰Šé™¤ï¼ˆ`is_deleted = true`ï¼‰
- å‰Šé™¤å‰ã®ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
- å‰Šé™¤ç†ç”±ã®è¨˜éŒ²

#### ãƒ†ãƒŠãƒ³ãƒˆçŠ¶æ…‹ç®¡ç†

| çŠ¶æ…‹ | èª¬æ˜ | å‹•ä½œ |
|-----|------|------|
| `active` | æœ‰åŠ¹ | å…¨æ©Ÿèƒ½åˆ©ç”¨å¯èƒ½ |
| `suspended` | ä¸€æ™‚åœæ­¢ | ãƒ­ã‚°ã‚¤ãƒ³ä¸å¯ã€ãƒ‡ãƒ¼ã‚¿ä¿æŒ |
| `deleted` | å‰Šé™¤æ¸ˆã¿ | ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯ã€ãƒ‡ãƒ¼ã‚¿ä¿æŒï¼ˆå¾©å…ƒå¯èƒ½ï¼‰ |

---

### 2. æ–™é‡‘ãƒ—ãƒ©ãƒ³ç®¡ç†æ©Ÿèƒ½

#### ãƒ—ãƒ©ãƒ³ãƒã‚¹ã‚¿ãƒ¼ç®¡ç†

**ãƒ—ãƒ©ãƒ³å®šç¾©**:
```typescript
interface Plan {
  id: string
  systemType: 'hotel-saas' | 'hotel-pms' | 'hotel-member'
  businessType: 'leisure' | 'omotenasuai'
  planType: 'economy' | 'professional' | 'enterprise'
  planCategory: string
  
  // æ–™é‡‘è¨­å®š
  monthlyPrice: number
  additionalDeviceCost: number
  roomTerminalCost: number
  frontDeskCost: number
  kitchenCost: number
  barCost: number
  housekeepingCost: number
  managerCost: number
  commonAreaCost: number
  multilingualUpgradePrice: number
  
  // æ•°å€¤åˆ¶é™
  maxDevices: number
  maxMonthlyOrders: number
  maxMonthlyAiRequests: number
  maxStorageGB: number
  
  // æ©Ÿèƒ½ãƒ•ãƒ©ã‚°ï¼ˆON/OFFåˆ¶å¾¡ï¼‰
  enableAiConcierge: boolean
  enableMultilingual: boolean
  enableLayoutEditor: boolean
  enableFacilityGuide: boolean
  enableAiBusinessSupport: boolean
  
  // ãƒ¡ã‚¿æƒ…å ±
  displayName: string
  description: string
  isActive: boolean
  createdAt: string
  updatedAt: string
}
```

**é‡è¦**: æ—¢å­˜ã®`system_plan_restrictions`ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½¿ç”¨

**å‚ç…§**: [SSOT_SAAS_MULTITENANT.md](../00_foundation/SSOT_SAAS_MULTITENANT.md) - `system_plan_restrictions`ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©

---

#### ãƒ—ãƒ©ãƒ³ä½œæˆ

**UIç”»é¢**: `/admin/super-admin/plans/create`

**å…¥åŠ›é …ç›®**:

1. **åŸºæœ¬æƒ…å ±**
   - ã‚·ã‚¹ãƒ†ãƒ ç¨®åˆ¥ï¼ˆhotel-saas/hotel-pms/hotel-memberï¼‰
   - æ¥­æ…‹ç¨®åˆ¥ï¼ˆleisure/omotenasuaiï¼‰
   - ãƒ—ãƒ©ãƒ³ç¨®åˆ¥ï¼ˆeconomy/professional/enterpriseï¼‰
   - ãƒ—ãƒ©ãƒ³ã‚«ãƒ†ã‚´ãƒªï¼ˆç´°åˆ†åŒ–ç”¨ï¼‰
   - è¡¨ç¤ºå
   - èª¬æ˜æ–‡

2. **æ–™é‡‘è¨­å®š**
   - æœˆé¡åŸºæœ¬æ–™é‡‘
   - è¿½åŠ ãƒ‡ãƒã‚¤ã‚¹æ–™é‡‘
   - ç«¯æœ«ç¨®åˆ¥ã”ã¨ã®æ–™é‡‘
     - å®¢å®¤ç«¯æœ«
     - ãƒ•ãƒ­ãƒ³ãƒˆç«¯æœ«
     - ã‚­ãƒƒãƒãƒ³ç«¯æœ«
     - ãƒãƒ¼ç«¯æœ«
     - æ¸…æƒç«¯æœ«
     - ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ç«¯æœ«
     - å…±ç”¨ã‚¨ãƒªã‚¢ç«¯æœ«
   - å¤šè¨€èªã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ–™é‡‘

3. **æ•°å€¤åˆ¶é™è¨­å®š**
   - æœ€å¤§ãƒ‡ãƒã‚¤ã‚¹æ•°
   - æœˆé–“æœ€å¤§æ³¨æ–‡æ•°
   - æœˆé–“æœ€å¤§AIãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°
   - æœ€å¤§ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å®¹é‡ï¼ˆGBï¼‰

4. **æ©Ÿèƒ½åˆ¶å¾¡è¨­å®š**ï¼ˆON/OFFåˆ‡ã‚Šæ›¿ãˆï¼‰
   - AIã‚³ãƒ³ã‚·ã‚§ãƒ«ã‚¸ãƒ¥æ©Ÿèƒ½
   - å¤šè¨€èªæ©Ÿèƒ½
   - ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚¨ãƒ‡ã‚£ã‚¿
   - æ–½è¨­ã‚¬ã‚¤ãƒ‰æ©Ÿèƒ½
   - AIãƒ“ã‚¸ãƒã‚¹ã‚µãƒãƒ¼ãƒˆ

**ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**:
- åŒä¸€ã®`systemType + businessType + planType + planCategory`ã®çµ„ã¿åˆã‚ã›ã¯ä¸å¯
- æœˆé¡æ–™é‡‘ã¯0å††ä»¥ä¸Š
- æ•°å€¤åˆ¶é™ã¯0ä»¥ä¸Š
- è¡¨ç¤ºåãƒ»èª¬æ˜æ–‡ã¯å¿…é ˆ

**ä½œæˆãƒ•ãƒ­ãƒ¼**:
```
1. åŸºæœ¬æƒ…å ±å…¥åŠ›
   â†“
2. æ–™é‡‘è¨­å®š
   â†“
3. æ•°å€¤åˆ¶é™è¨­å®š
   â†“
4. æ©Ÿèƒ½åˆ¶å¾¡è¨­å®š
   â†“
5. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç¢ºèª
   â†“
6. ä½œæˆå®Ÿè¡Œ
   â†“
7. å®Œäº†é€šçŸ¥
```

---

#### ãƒ—ãƒ©ãƒ³ç·¨é›†ï¼ˆå‹•çš„æ©Ÿèƒ½åˆ¶å¾¡ï¼‰

**UIç”»é¢**: `/admin/super-admin/plans/[id]/edit`

**ç·¨é›†å¯èƒ½é …ç›®**:

1. **æ–™é‡‘è¨­å®šã®å¤‰æ›´**
   - æœˆé¡æ–™é‡‘ã®èª¿æ•´
   - å„ç¨®ç«¯æœ«æ–™é‡‘ã®èª¿æ•´
   - å³åº§ã«å…¨ãƒ†ãƒŠãƒ³ãƒˆã«åæ˜ 

2. **æ•°å€¤åˆ¶é™ã®å‹•çš„å¤‰æ›´**
   - ãƒ‡ãƒã‚¤ã‚¹æ•°ä¸Šé™ã®å¤‰æ›´
   - æ³¨æ–‡æ•°ä¸Šé™ã®å¤‰æ›´
   - AIãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°ä¸Šé™ã®å¤‰æ›´
   - ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä¸Šé™ã®å¤‰æ›´

3. **æ©Ÿèƒ½ãƒ•ãƒ©ã‚°ã®å‹•çš„ON/OFF**
   - AIã‚³ãƒ³ã‚·ã‚§ãƒ«ã‚¸ãƒ¥æ©Ÿèƒ½ã®æœ‰åŠ¹åŒ–/ç„¡åŠ¹åŒ–
   - å¤šè¨€èªæ©Ÿèƒ½ã®æœ‰åŠ¹åŒ–/ç„¡åŠ¹åŒ–
   - ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã®æœ‰åŠ¹åŒ–/ç„¡åŠ¹åŒ–
   - æ–½è¨­ã‚¬ã‚¤ãƒ‰æ©Ÿèƒ½ã®æœ‰åŠ¹åŒ–/ç„¡åŠ¹åŒ–
   - AIãƒ“ã‚¸ãƒã‚¹ã‚µãƒãƒ¼ãƒˆã®æœ‰åŠ¹åŒ–/ç„¡åŠ¹åŒ–

**é‡è¦ãªä»•æ§˜**:

1. **å³æ™‚åæ˜ **
   - ãƒ—ãƒ©ãƒ³è¨­å®šå¤‰æ›´å¾Œã€å³åº§ã«å…¨ãƒ†ãƒŠãƒ³ãƒˆã«åæ˜ 
   - ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ã‚¯ãƒªã‚¢ï¼ˆRedisï¼‰
   - ãƒ†ãƒŠãƒ³ãƒˆã¸ã®é€šçŸ¥ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

2. **æ—¢å­˜ãƒ†ãƒŠãƒ³ãƒˆã¸ã®å½±éŸ¿ç¢ºèª**
   - å¤‰æ›´å‰ã«å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ†ãƒŠãƒ³ãƒˆæ•°ã‚’è¡¨ç¤º
   - åˆ¶é™å€¤ã‚’ä¸‹ã’ã‚‹å ´åˆã®è­¦å‘Šè¡¨ç¤º
   - æ©Ÿèƒ½ã‚’ç„¡åŠ¹åŒ–ã™ã‚‹å ´åˆã®å½±éŸ¿ç¯„å›²è¡¨ç¤º

3. **ãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰æ™‚ã®å‹•ä½œ**
   - **ãƒ‡ãƒã‚¤ã‚¹æ•°å‰Šæ¸›**: è¶…éåˆ†ã®ãƒ‡ãƒã‚¤ã‚¹ã‚’è‡ªå‹•ç„¡åŠ¹åŒ–ï¼ˆæœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ—¥æ™‚ãŒå¤ã„é †ï¼‰
   - **æ³¨æ–‡æ•°å‰Šæ¸›**: æ–°è¦æ³¨æ–‡ã‚’åˆ¶é™ã€æ—¢å­˜æ³¨æ–‡ã¯ä¿æŒ
   - **AIæ©Ÿèƒ½ç„¡åŠ¹åŒ–**: æ—¢å­˜ã®AIè¨­å®šã¯ä¿æŒã€æ–°è¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ‹’å¦
   - **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å‰Šæ¸›**: æ–°è¦ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚’åˆ¶é™ã€æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã¯ä¿æŒ

4. **ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ™‚ã®å‹•ä½œ**
   - å³åº§ã«æ–°æ©Ÿèƒ½ãŒåˆ©ç”¨å¯èƒ½
   - ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ãŸãƒ‡ãƒã‚¤ã‚¹ã‚’å†æœ‰åŠ¹åŒ–
   - åˆ¶é™ãŒç·©å’Œã•ã‚ŒãŸã“ã¨ã‚’ãƒ†ãƒŠãƒ³ãƒˆã«é€šçŸ¥

**ç·¨é›†ãƒ•ãƒ­ãƒ¼**:
```
1. ãƒ—ãƒ©ãƒ³é¸æŠ
   â†“
2. ç¾åœ¨ã®è¨­å®šç¢ºèª
   â†“
3. å¤‰æ›´å†…å®¹å…¥åŠ›
   â†“
4. å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ†ãƒŠãƒ³ãƒˆç¢ºèª
   â”œâ”€ å½±éŸ¿ãªã— â†’ å³åº§ã«é©ç”¨
   â””â”€ å½±éŸ¿ã‚ã‚Š â†’ è­¦å‘Šè¡¨ç¤º
       â†“
5. ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
   â”œâ”€ ã€Œã“ã®ãƒ—ãƒ©ãƒ³ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã€‡ã€‡ä»¶ã®ãƒ†ãƒŠãƒ³ãƒˆã«å½±éŸ¿ã—ã¾ã™ã€
   â”œâ”€ ã€Œãƒ‡ãƒã‚¤ã‚¹æ•°è¶…é: â–³â–³ä»¶ã®ãƒ†ãƒŠãƒ³ãƒˆã€
   â””â”€ ã€Œæ©Ÿèƒ½ç„¡åŠ¹åŒ–: Ã—Ã—ä»¶ã®ãƒ†ãƒŠãƒ³ãƒˆã€
       â†“
6. é©ç”¨å®Ÿè¡Œ
   â†“
7. ãƒ†ãƒŠãƒ³ãƒˆã¸ã®é€šçŸ¥ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
   â†“
8. å®Œäº†
```

**UIè¡¨ç¤ºä¾‹**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ—ãƒ©ãƒ³ç·¨é›†: ã‚¨ã‚³ãƒãƒŸãƒ¼ãƒ—ãƒ©ãƒ³ï¼ˆãƒ¬ã‚¸ãƒ£ãƒ¼å‘ã‘ï¼‰â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚ ã€æ•°å€¤åˆ¶é™ã€‘                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ æœ€å¤§ãƒ‡ãƒã‚¤ã‚¹æ•°: [30] â†’ [50]         â”‚    â”‚
â”‚ â”‚ å½±éŸ¿: 5ä»¶ã®ãƒ†ãƒŠãƒ³ãƒˆã§åˆ¶é™ãŒç·©å’Œ     â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                             â”‚
â”‚ ã€æ©Ÿèƒ½åˆ¶å¾¡ã€‘                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ AIã‚³ãƒ³ã‚·ã‚§ãƒ«ã‚¸ãƒ¥: [OFF] â†’ [ON]      â”‚    â”‚
â”‚ â”‚ å½±éŸ¿: 120ä»¶ã®ãƒ†ãƒŠãƒ³ãƒˆã§æ©Ÿèƒ½ãŒæœ‰åŠ¹åŒ– â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚¨ãƒ‡ã‚£ã‚¿: [ON] â†’ [OFF]    â”‚    â”‚
â”‚ â”‚ âš ï¸ è­¦å‘Š: 80ä»¶ã®ãƒ†ãƒŠãƒ³ãƒˆã§æ©Ÿèƒ½ãŒ     â”‚    â”‚
â”‚ â”‚         ç„¡åŠ¹åŒ–ã•ã‚Œã¾ã™               â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                             â”‚
â”‚ [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]  [ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼]  [é©ç”¨]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### ãƒ—ãƒ©ãƒ³å‰Šé™¤

**UIç”»é¢**: `/admin/super-admin/plans/[id]`

**å‰Šé™¤æ–¹å¼**: è«–ç†å‰Šé™¤ï¼ˆ`is_deleted = true`ï¼‰

**å‰Šé™¤æ¡ä»¶**:
- âœ… ä½¿ç”¨ä¸­ã®ãƒ†ãƒŠãƒ³ãƒˆãŒã„ãªã„å ´åˆã®ã¿å‰Šé™¤å¯èƒ½
- âŒ 1ä»¶ã§ã‚‚ãƒ†ãƒŠãƒ³ãƒˆãŒä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯å‰Šé™¤ä¸å¯

**å‰Šé™¤å‰ãƒã‚§ãƒƒã‚¯**:
```typescript
// ä½¿ç”¨ä¸­ãƒ†ãƒŠãƒ³ãƒˆæ•°ã‚’ç¢ºèª
const tenantCount = await prisma.tenantSystemPlan.count({
  where: { planId: planId }
});

if (tenantCount > 0) {
  throw new Error(`ã“ã®ãƒ—ãƒ©ãƒ³ã¯${tenantCount}ä»¶ã®ãƒ†ãƒŠãƒ³ãƒˆãŒä½¿ç”¨ä¸­ã®ãŸã‚å‰Šé™¤ã§ãã¾ã›ã‚“`);
}
```

**å‰Šé™¤ãƒ•ãƒ­ãƒ¼**:
```
1. ãƒ—ãƒ©ãƒ³é¸æŠ
   â†“
2. å‰Šé™¤ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
   â†“
3. ä½¿ç”¨ä¸­ãƒ†ãƒŠãƒ³ãƒˆç¢ºèª
   â”œâ”€ ä½¿ç”¨ä¸­ â†’ ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºï¼ˆå‰Šé™¤ä¸å¯ï¼‰
   â””â”€ æœªä½¿ç”¨ â†’ ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
       â†“
4. å‰Šé™¤ç†ç”±å…¥åŠ›ï¼ˆä»»æ„ï¼‰
   â†“
5. å‰Šé™¤å®Ÿè¡Œï¼ˆè«–ç†å‰Šé™¤ï¼‰
   â†“
6. å®Œäº†
```

#### ãƒ—ãƒ©ãƒ³å¤‰æ›´ãƒ•ãƒ­ãƒ¼

```
1. ãƒ†ãƒŠãƒ³ãƒˆé¸æŠ
   â†“
2. ç¾åœ¨ã®ãƒ—ãƒ©ãƒ³ç¢ºèª
   â†“
3. æ–°ã—ã„ãƒ—ãƒ©ãƒ³é¸æŠ
   â†“
4. ä½¿ç”¨çŠ¶æ³ç¢ºèªï¼ˆåˆ¶é™è¶…éãƒã‚§ãƒƒã‚¯ï¼‰
   â†“
5. å½±éŸ¿ç¢ºèªï¼ˆãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰æ™‚ï¼‰
   â†“
6. ç¢ºèªãƒ»é©ç”¨
   â†“
7. ãƒ†ãƒŠãƒ³ãƒˆã«é€šçŸ¥
```

**ãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰æ™‚ã®æ³¨æ„**:
- ãƒ‡ãƒã‚¤ã‚¹æ•°è¶…éã®å ´åˆã€è¶…éåˆ†ã‚’ç„¡åŠ¹åŒ–
- AIæ©Ÿèƒ½ç„¡åŠ¹åŒ–ã®å ´åˆã€æ—¢å­˜ã®AIè¨­å®šã‚’ä¿æŒ
- ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è¶…éã®å ´åˆã€ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰åˆ¶é™

---

### 3. AIç®¡ç†æ©Ÿèƒ½

#### AIãƒ¢ãƒ‡ãƒ«ç®¡ç†

**åˆ©ç”¨å¯èƒ½ãªãƒ¢ãƒ‡ãƒ«**:
- GPT-4
- GPT-3.5-turbo
- Claude 3
- ãã®ä»–

**ãƒ¢ãƒ‡ãƒ«è¨­å®š**:
- temperature
- max_tokens
- top_p
- frequency_penalty
- presence_penalty

**ãƒ¢ãƒ‡ãƒ«ã”ã¨ã®ã‚³ã‚¹ãƒˆè¨­å®š**:
```typescript
interface ModelCost {
  modelName: string
  inputTokenCost: number   // 1000ãƒˆãƒ¼ã‚¯ãƒ³ã‚ãŸã‚Šã®æ–™é‡‘
  outputTokenCost: number  // 1000ãƒˆãƒ¼ã‚¯ãƒ³ã‚ãŸã‚Šã®æ–™é‡‘
  currency: 'USD' | 'JPY'
}
```

#### ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆç®¡ç†

**ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆå‰²ã‚Šå½“ã¦**:
- ãƒ†ãƒŠãƒ³ãƒˆã”ã¨ã®ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆè¨­å®š
- æœˆæ¬¡è‡ªå‹•è£œå……
- æ‰‹å‹•è£œå……

**ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆæ¶ˆè²»**:
- AIãƒªã‚¯ã‚¨ã‚¹ãƒˆã”ã¨ã«æ¶ˆè²»
- ãƒˆãƒ¼ã‚¯ãƒ³æ•°ãƒ™ãƒ¼ã‚¹ã®è¨ˆç®—
- æ¶ˆè²»å±¥æ­´ã®è¨˜éŒ²

**ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆæ®‹é«˜ç¢ºèª**:
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ®‹é«˜è¡¨ç¤º
- æ¶ˆè²»äºˆæ¸¬
- ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®šï¼ˆæ®‹é«˜10%ä»¥ä¸‹ï¼‰

#### AIä½¿ç”¨çµ±è¨ˆ

**ãƒ†ãƒŠãƒ³ãƒˆã”ã¨ã®ä½¿ç”¨é‡**:
- ç·ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°
- ç·ãƒˆãƒ¼ã‚¯ãƒ³æ•°
- ãƒ¢ãƒ‡ãƒ«åˆ¥ä½¿ç”¨é‡
- ã‚³ã‚¹ãƒˆåˆ†æ

**ç•°å¸¸æ¤œçŸ¥**:
- æ€¥æ¿€ãªä½¿ç”¨é‡å¢—åŠ 
- ç•°å¸¸ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³
- ä¸æ­£åˆ©ç”¨ã®ç–‘ã„

---

### 4. ä½¿ç”¨é‡ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½

#### ç›£è¦–é …ç›®

| é …ç›® | èª¬æ˜ | åˆ¶é™å€¤ |
|-----|------|--------|
| ãƒ‡ãƒã‚¤ã‚¹æ•° | ç™»éŒ²æ¸ˆã¿ãƒ‡ãƒã‚¤ã‚¹æ•° | ãƒ—ãƒ©ãƒ³ã”ã¨ã«è¨­å®š |
| æ³¨æ–‡æ•° | æœˆé–“æ³¨æ–‡æ•° | ãƒ—ãƒ©ãƒ³ã”ã¨ã«è¨­å®š |
| AIä½¿ç”¨é‡ | æœˆé–“AIãƒˆãƒ¼ã‚¯ãƒ³æ•° | ãƒ—ãƒ©ãƒ³ã”ã¨ã«è¨­å®š |
| ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä½¿ç”¨é‡ | ç”»åƒãƒ»å‹•ç”»ã®åˆè¨ˆã‚µã‚¤ã‚º | ãƒ—ãƒ©ãƒ³ã”ã¨ã«è¨­å®š |
| APIå‘¼ã³å‡ºã—æ•° | æœˆé–“APIå‘¼ã³å‡ºã—æ•° | ãƒ—ãƒ©ãƒ³ã”ã¨ã«è¨­å®š |

#### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

**å…¨ä½“æ¦‚è¦**:
- å…¨ãƒ†ãƒŠãƒ³ãƒˆã®ä½¿ç”¨çŠ¶æ³
- åˆ¶é™å€¤ã«å¯¾ã™ã‚‹ä½¿ç”¨ç‡
- ãƒˆãƒ¬ãƒ³ãƒ‰ã‚°ãƒ©ãƒ•
- ã‚³ã‚¹ãƒˆäºˆæ¸¬

**ãƒ†ãƒŠãƒ³ãƒˆåˆ¥è©³ç´°**:
- ä½¿ç”¨é‡ã®æ¨ç§»
- åˆ¶é™å€¤ã¨ã®æ¯”è¼ƒ
- ç•°å¸¸æ¤œçŸ¥
- ã‚¢ãƒ©ãƒ¼ãƒˆå±¥æ­´

---

### 5. ã‚¢ãƒ©ãƒ¼ãƒˆæ©Ÿèƒ½

#### ã‚¢ãƒ©ãƒ¼ãƒˆç¨®é¡

| ã‚¢ãƒ©ãƒ¼ãƒˆç¨®é¡ | èª¬æ˜ | é‡è¦åº¦ |
|------------|------|--------|
| `usage_limit` | ä½¿ç”¨é‡ä¸Šé™åˆ°é”ï¼ˆ90%ã€100%ï¼‰ | High |
| `security` | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒ©ãƒ¼ãƒˆ | Critical |
| `payment` | æ”¯æ‰•ã„é…å»¶ | High |
| `system_error` | ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼ | Medium |
| `anomaly` | ç•°å¸¸ãªä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³ | Medium |

#### é€šçŸ¥æ–¹æ³•

**ãƒ¡ãƒ¼ãƒ«é€šçŸ¥**:
- ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†è€…ã«é€ä¿¡
- ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³ã«é€ä¿¡

**Slacké€šçŸ¥**:
- å°‚ç”¨ãƒãƒ£ãƒ³ãƒãƒ«ã«æŠ•ç¨¿
- ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³æ©Ÿèƒ½

**SMSé€šçŸ¥**ï¼ˆç·Šæ€¥æ™‚ã®ã¿ï¼‰:
- Critical ãƒ¬ãƒ™ãƒ«ã®ã‚¢ãƒ©ãƒ¼ãƒˆ
- ã‚·ã‚¹ãƒ†ãƒ ãƒ€ã‚¦ãƒ³æ™‚

**ç®¡ç†ç”»é¢å†…é€šçŸ¥**:
- ãƒ™ãƒ«ã‚¢ã‚¤ã‚³ãƒ³ã§é€šçŸ¥
- æœªèª­ä»¶æ•°è¡¨ç¤º

#### ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š

**é–¾å€¤è¨­å®š**:
- ä½¿ç”¨é‡90%ã§Warning
- ä½¿ç”¨é‡100%ã§Critical

**é€šçŸ¥å…ˆè¨­å®š**:
- ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
- Slack Webhook URL
- é›»è©±ç•ªå·ï¼ˆSMSç”¨ï¼‰

**é€šçŸ¥é »åº¦è¨­å®š**:
- å³æ™‚é€šçŸ¥
- 1æ™‚é–“ã”ã¨
- 1æ—¥1å›

---

### 6. ãƒ­ã‚°ç®¡ç†æ©Ÿèƒ½

#### ç›®çš„
å„ãƒ›ãƒ†ãƒ«ï¼ˆãƒ†ãƒŠãƒ³ãƒˆï¼‰ã®ã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚°ãƒ»ã‚µãƒ¼ãƒãƒ¼ãƒ­ã‚°ã‚’ä¸€å…ƒç®¡ç†ã—ã€ã‚¨ãƒ©ãƒ¼èª¿æŸ»ãƒ»ã‚µãƒãƒ¼ãƒˆå¯¾å¿œã‚’åŠ¹ç‡åŒ–ã™ã‚‹ã€‚

#### ã‚¢ãƒ©ãƒ¼ãƒˆç®¡ç†ã¨ã®é•ã„

| é …ç›® | ã‚¢ãƒ©ãƒ¼ãƒˆç®¡ç† | ãƒ­ã‚°ç®¡ç† |
|-----|------------|---------|
| **ç›®çš„** | ç•°å¸¸æ¤œçŸ¥â†’å³åº§ã®é€šçŸ¥â†’å¯¾å¿œä¿ƒé€² | è©³ç´°ãªå±¥æ­´ä¿å­˜â†’äº‹å¾Œåˆ†æâ†’æ ¹æœ¬åŸå› èª¿æŸ» |
| **é‡ç‚¹** | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§ | ç¶²ç¾…æ€§ãƒ»æ¤œç´¢æ€§ |
| **é‹ç”¨** | ä»Šã™ãå¯¾å¿œãŒå¿…è¦ãªå•é¡Œã‚’é€šçŸ¥ | éå»ã«ä½•ãŒèµ·ããŸã‹ã‚’è©³ç´°ã«è¿½è·¡ |
| **æŠ€è¡“** | é–¾å€¤ç›£è¦–ã€ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã€é€šçŸ¥é…ä¿¡ | ãƒ­ã‚°åé›†ã€é•·æœŸä¿å­˜ã€å…¨æ–‡æ¤œç´¢ã€ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚° |

#### ä¸»è¦æ©Ÿèƒ½

**ã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚°é–²è¦§**:
- hotel-saas
- hotel-pms
- hotel-member
- hotel-common

**ã‚µãƒ¼ãƒãƒ¼ãƒ­ã‚°é–²è¦§**:
- Nginx
- PM2
- PostgreSQL
- Redis

**ãƒ­ã‚°æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°**:
- ãƒ†ãƒŠãƒ³ãƒˆåˆ¥ãƒ•ã‚£ãƒ«ã‚¿
- æ—¥æ™‚ç¯„å›²æŒ‡å®š
- ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ï¼ˆerror/warn/info/debugï¼‰
- ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢
- ã‚µãƒ¼ãƒ“ã‚¹åˆ¥ãƒ•ã‚£ãƒ«ã‚¿

**ãƒ­ã‚°ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**:
- CSVå½¢å¼
- JSONå½¢å¼
- æœŸé–“æŒ‡å®šã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

**ãƒ­ã‚°ä¿æŒæœŸé–“è¨­å®š**:
- ãƒ†ãƒŠãƒ³ãƒˆåˆ¥è¨­å®š
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 90æ—¥é–“
- é‡è¦ãƒ­ã‚°: 1å¹´é–“

#### ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«å®šç¾©

| ãƒ¬ãƒ™ãƒ« | èª¬æ˜ | ç”¨é€” |
|-------|------|------|
| `error` | ã‚¨ãƒ©ãƒ¼ | ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼ã€ä¾‹å¤–ã€éšœå®³ |
| `warn` | è­¦å‘Š | æ½œåœ¨çš„ãªå•é¡Œã€éæ¨å¥¨æ©Ÿèƒ½ã®ä½¿ç”¨ |
| `info` | æƒ…å ± | é€šå¸¸ã®å‹•ä½œã€é‡è¦ãªã‚¤ãƒ™ãƒ³ãƒˆ |
| `debug` | ãƒ‡ãƒãƒƒã‚° | é–‹ç™ºãƒ»ãƒ‡ãƒãƒƒã‚°ç”¨ã®è©³ç´°æƒ…å ± |

#### ãƒ­ã‚°ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæƒ…å ±

**ã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚°**:
- ã‚¨ãƒ©ãƒ¼ã‚¹ã‚¿ãƒƒã‚¯
- ãƒªã‚¯ã‚¨ã‚¹ãƒˆæƒ…å ±ï¼ˆURLã€ãƒ¡ã‚½ãƒƒãƒ‰ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼‰
- ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ï¼ˆIDã€ãƒ†ãƒŠãƒ³ãƒˆIDï¼‰
- IPã‚¢ãƒ‰ãƒ¬ã‚¹
- User Agent
- ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—

**ã‚µãƒ¼ãƒãƒ¼ãƒ­ã‚°**:
- ã‚µãƒ¼ãƒãƒ¼ç¨®åˆ¥
- ãƒ—ãƒ­ã‚»ã‚¹ID
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡
- CPUä½¿ç”¨ç‡
- ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—

---

### 7. AIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†æ©Ÿèƒ½ â­ **æœ€é‡è¦**

#### ç›®çš„
AIã‚³ãƒ³ã‚·ã‚§ãƒ«ã‚¸ãƒ¥ã®å¿œç­”å“è³ªã‚’å‹•çš„ã«èª¿æ•´ã—ã€ãƒ›ãƒ†ãƒ«ã®æ¥­æ…‹ã‚„è¨€èªã«å¿œã˜ãŸæœ€é©ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æä¾›ã™ã‚‹ã€‚

#### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®éšå±¤æ§‹é€ 

```
ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆå…¨ãƒ†ãƒŠãƒ³ãƒˆå…±é€šï¼‰
  â†“
æ¥­æ…‹åˆ¥ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆleisure/omotenasuaiï¼‰
  â†“
è¨€èªåˆ¥ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆja/en/zh/koç­‰ï¼‰
  â†“
æ©Ÿèƒ½åˆ¥ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆorder/facility/tourismç­‰ï¼‰
  â†“
ãƒ†ãƒŠãƒ³ãƒˆåˆ¥ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ï¼ˆå€‹åˆ¥ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºï¼‰
```

**å„ªå…ˆé †ä½**: ãƒ†ãƒŠãƒ³ãƒˆåˆ¥ > æ©Ÿèƒ½åˆ¥ > è¨€èªåˆ¥ > æ¥­æ…‹åˆ¥ > ã‚·ã‚¹ãƒ†ãƒ 

---

#### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç¨®åˆ¥

##### 1. ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆå…¨ãƒ†ãƒŠãƒ³ãƒˆå…±é€šï¼‰

**ç”¨é€”**: å…¨AIã‚³ãƒ³ã‚·ã‚§ãƒ«ã‚¸ãƒ¥ã®åŸºæœ¬å‹•ä½œã‚’å®šç¾©

**å†…å®¹ä¾‹**:
```
ã‚ãªãŸã¯ãƒ›ãƒ†ãƒ«ã®AIã‚³ãƒ³ã‚·ã‚§ãƒ«ã‚¸ãƒ¥ã§ã™ã€‚
ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã‚’å³å®ˆã—ã¦ãã ã•ã„ï¼š
1. ä¸å¯§ã§è¦ªã—ã¿ã‚„ã™ã„è¨€è‘‰é£ã„ã‚’å¿ƒãŒã‘ã‚‹
2. ãŠå®¢æ§˜ã®è¦æœ›ã‚’æ­£ç¢ºã«ç†è§£ã—ã€é©åˆ‡ãªææ¡ˆã‚’è¡Œã†
3. ä¸æ˜ãªç‚¹ã¯ç¢ºèªã—ã€æ¨æ¸¬ã§å›ç­”ã—ãªã„
4. ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã«é…æ…®ã—ã€å€‹äººæƒ…å ±ã‚’é©åˆ‡ã«æ‰±ã†
5. ãƒ›ãƒ†ãƒ«ã®ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’æãªã‚ãªã„å¯¾å¿œã‚’å¿ƒãŒã‘ã‚‹
```

**ç®¡ç†é …ç›®**:
- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæœ¬æ–‡
- æœ‰åŠ¹/ç„¡åŠ¹ãƒ•ãƒ©ã‚°
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·
- ä½œæˆæ—¥æ™‚ãƒ»æ›´æ–°æ—¥æ™‚
- ä½œæˆè€…ãƒ»æ›´æ–°è€…

---

##### 2. æ¥­æ…‹åˆ¥ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

**æ¥­æ…‹ç¨®åˆ¥**:
- `leisure`: ãƒ¬ã‚¸ãƒ£ãƒ¼ãƒ›ãƒ†ãƒ«å‘ã‘
- `omotenasuai`: ãŠã‚‚ã¦ãªã™AIå‘ã‘

**ãƒ¬ã‚¸ãƒ£ãƒ¼ãƒ›ãƒ†ãƒ«å‘ã‘ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹**:
```
ã“ã®ãƒ›ãƒ†ãƒ«ã¯ã‚«ãƒƒãƒ—ãƒ«å‘ã‘ã®ãƒ¬ã‚¸ãƒ£ãƒ¼ãƒ›ãƒ†ãƒ«ã§ã™ã€‚
ä»¥ä¸‹ã®ç‚¹ã«ç‰¹ã«æ³¨æ„ã—ã¦ãã ã•ã„ï¼š
1. ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã‚’æœ€é‡è¦–ã™ã‚‹
2. ãƒ­ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãªé›°å›²æ°—ã‚’å¤§åˆ‡ã«ã™ã‚‹
3. ç‰¹åˆ¥ãªè¨˜å¿µæ—¥ã®ã‚µãƒãƒ¼ãƒˆã‚’ç©æ¥µçš„ã«ææ¡ˆã™ã‚‹
4. å®¢å®¤å†…ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆãƒ«ãƒ¼ãƒ ã‚µãƒ¼ãƒ“ã‚¹ã€ã‚¢ãƒ¡ãƒ‹ãƒ†ã‚£ç­‰ï¼‰ã‚’å……å®Ÿã•ã›ã‚‹
5. å‘¨è¾ºã®è¦³å…‰ã‚¹ãƒãƒƒãƒˆã‚„ãƒ‡ãƒ¼ãƒˆã‚¹ãƒãƒƒãƒˆã‚’ææ¡ˆã™ã‚‹
```

**ãŠã‚‚ã¦ãªã™AIå‘ã‘ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹**:
```
ã“ã®ãƒ›ãƒ†ãƒ«ã¯é«˜å“è³ªãªãŠã‚‚ã¦ãªã—ã‚’æä¾›ã™ã‚‹ãƒ›ãƒ†ãƒ«ã§ã™ã€‚
ä»¥ä¸‹ã®ç‚¹ã«ç‰¹ã«æ³¨æ„ã—ã¦ãã ã•ã„ï¼š
1. æœ€é«˜ç´šã®ãƒ›ã‚¹ãƒ”ã‚¿ãƒªãƒ†ã‚£ã‚’æä¾›ã™ã‚‹
2. ãŠå®¢æ§˜ä¸€äººã²ã¨ã‚Šã«åˆã‚ã›ãŸãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã•ã‚ŒãŸå¯¾å¿œ
3. æ—¥æœ¬ã®ä¼çµ±çš„ãªãŠã‚‚ã¦ãªã—ã®å¿ƒã‚’å¤§åˆ‡ã«ã™ã‚‹
4. ç´°ã‚„ã‹ãªæ°—é…ã‚Šã¨å…ˆå›ã‚Šã—ãŸã‚µãƒ¼ãƒ“ã‚¹ææ¡ˆ
5. æ–‡åŒ–çš„ãªèƒŒæ™¯ã‚’è€ƒæ…®ã—ãŸå¯¾å¿œ
```

---

##### 3. è¨€èªåˆ¥ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

**å¯¾å¿œè¨€èª**:
- `ja`: æ—¥æœ¬èª
- `en`: è‹±èª
- `zh`: ä¸­å›½èªï¼ˆç°¡ä½“å­—ï¼‰
- `zh-TW`: ä¸­å›½èªï¼ˆç¹ä½“å­—ï¼‰
- `ko`: éŸ“å›½èª

**è¨€èªåˆ¥ã®æ³¨æ„äº‹é …**:
```typescript
{
  ja: "æ•¬èªã‚’é©åˆ‡ã«ä½¿ç”¨ã—ã€ä¸å¯§ãªæ—¥æœ¬èªã§å¯¾å¿œã—ã¦ãã ã•ã„ã€‚",
  en: "Use polite and professional English. Avoid slang or overly casual expressions.",
  zh: "ä½¿ç”¨ç¤¼è²Œå’Œä¸“ä¸šçš„ä¸­æ–‡ã€‚æ³¨æ„æ–‡åŒ–å·®å¼‚ï¼Œæä¾›é€‚åˆä¸­å›½å®¢äººçš„æœåŠ¡å»ºè®®ã€‚",
  ko: "ì •ì¤‘í•˜ê³  ì „ë¬¸ì ì¸ í•œêµ­ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”. ë¬¸í™”ì  ì°¨ì´ë¥¼ ê³ ë ¤í•˜ì—¬ ëŒ€ì‘í•˜ì„¸ìš”."
}
```

---

##### 4. æ©Ÿèƒ½åˆ¥ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

**æ©Ÿèƒ½ç¨®åˆ¥**:
- `order`: æ³¨æ–‡å—ä»˜ï¼ˆãƒ«ãƒ¼ãƒ ã‚µãƒ¼ãƒ“ã‚¹ã€é£²é£Ÿæ³¨æ–‡ï¼‰
- `facility`: æ–½è¨­æ¡ˆå†…ï¼ˆé¤¨å†…æ–½è¨­ã€è¨­å‚™èª¬æ˜ï¼‰
- `tourism`: è¦³å…‰æ¡ˆå†…ï¼ˆå‘¨è¾ºè¦³å…‰ã‚¹ãƒãƒƒãƒˆã€äº¤é€šæ¡ˆå†…ï¼‰
- `concierge`: ã‚³ãƒ³ã‚·ã‚§ãƒ«ã‚¸ãƒ¥ï¼ˆäºˆç´„ä»£è¡Œã€æ‰‹é…ï¼‰
- `housekeeping`: ãƒã‚¦ã‚¹ã‚­ãƒ¼ãƒ”ãƒ³ã‚°ï¼ˆæ¸…æƒä¾é ¼ã€ã‚¢ãƒ¡ãƒ‹ãƒ†ã‚£è¿½åŠ ï¼‰
- `checkout`: ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆï¼ˆç²¾ç®—ã€è·ç‰©é ã‹ã‚Šï¼‰

**æ³¨æ–‡å—ä»˜ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹**:
```
ãŠå®¢æ§˜ã‹ã‚‰ã®æ³¨æ–‡ã‚’å—ã‘ä»˜ã‘ã¾ã™ã€‚
ä»¥ä¸‹ã®æ‰‹é †ã§å¯¾å¿œã—ã¦ãã ã•ã„ï¼š
1. æ³¨æ–‡å†…å®¹ã‚’æ­£ç¢ºã«ç¢ºèªã™ã‚‹
2. æ•°é‡ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼æƒ…å ±ã‚’ç¢ºèªã™ã‚‹
3. æä¾›æ™‚é–“ã®å¸Œæœ›ã‚’ç¢ºèªã™ã‚‹
4. æ³¨æ–‡å†…å®¹ã‚’å¾©å”±ã—ã¦ç¢ºèªã™ã‚‹
5. æ³¨æ–‡ã‚’ç¢ºå®šã—ã€æä¾›äºˆå®šæ™‚åˆ»ã‚’ä¼ãˆã‚‹
```

**æ–½è¨­æ¡ˆå†…ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹**:
```
ãƒ›ãƒ†ãƒ«ã®æ–½è¨­ã«ã¤ã„ã¦ã”æ¡ˆå†…ã—ã¾ã™ã€‚
ä»¥ä¸‹ã®æƒ…å ±ã‚’æä¾›ã—ã¦ãã ã•ã„ï¼š
1. æ–½è¨­ã®å ´æ‰€ï¼ˆãƒ•ãƒ­ã‚¢ã€éƒ¨å±‹ç•ªå·ï¼‰
2. å–¶æ¥­æ™‚é–“ãƒ»åˆ©ç”¨å¯èƒ½æ™‚é–“
3. åˆ©ç”¨æ–¹æ³•ãƒ»æ³¨æ„äº‹é …
4. æ–™é‡‘ï¼ˆæœ‰æ–™ã®å ´åˆï¼‰
5. äºˆç´„ã®å¿…è¦æ€§
```

---

#### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†æ©Ÿèƒ½

##### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆ

**UIç”»é¢**: `/admin/super-admin/prompts/create`

**å…¥åŠ›é …ç›®**:
1. **åŸºæœ¬æƒ…å ±**
   - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå
   - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç¨®åˆ¥ï¼ˆsystem/business/language/functionï¼‰
   - å¯¾è±¡æ¥­æ…‹ï¼ˆleisure/omotenasuaiï¼‰â€»æ¥­æ…‹åˆ¥ã®å ´åˆ
   - å¯¾è±¡è¨€èªï¼ˆja/en/zh/koï¼‰â€»è¨€èªåˆ¥ã®å ´åˆ
   - å¯¾è±¡æ©Ÿèƒ½ï¼ˆorder/facility/tourismç­‰ï¼‰â€»æ©Ÿèƒ½åˆ¥ã®å ´åˆ

2. **ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå†…å®¹**
   - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæœ¬æ–‡ï¼ˆMarkdownå¯¾å¿œï¼‰
   - å¤‰æ•°åŸ‹ã‚è¾¼ã¿å¯èƒ½ï¼ˆ`{{hotelName}}`, `{{customerName}}`ç­‰ï¼‰

3. **ãƒ¡ã‚¿æƒ…å ±**
   - èª¬æ˜æ–‡
   - ã‚¿ã‚°ï¼ˆæ¤œç´¢ç”¨ï¼‰
   - æœ‰åŠ¹/ç„¡åŠ¹ãƒ•ãƒ©ã‚°

**ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**:
- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæœ¬æ–‡ã¯å¿…é ˆ
- åŒä¸€ã®ç¨®åˆ¥ãƒ»å¯¾è±¡ã®çµ„ã¿åˆã‚ã›ã¯1ã¤ã®ã¿
- å¤‰æ•°ã®æ§‹æ–‡ãƒã‚§ãƒƒã‚¯

---

##### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç·¨é›†

**UIç”»é¢**: `/admin/super-admin/prompts/[id]/edit`

**ç·¨é›†å¯èƒ½é …ç›®**:
- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæœ¬æ–‡
- èª¬æ˜æ–‡
- ã‚¿ã‚°
- æœ‰åŠ¹/ç„¡åŠ¹ãƒ•ãƒ©ã‚°

**é‡è¦ãªä»•æ§˜**:

1. **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†**
   - ç·¨é›†æ™‚ã«è‡ªå‹•çš„ã«æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½œæˆ
   - éå»ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä¿æŒï¼ˆæœ€å¤§100ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰
   - ãƒãƒ¼ã‚¸ãƒ§ãƒ³é–“ã®å·®åˆ†è¡¨ç¤º
   - éå»ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¸ã®ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯å¯èƒ½

2. **å¤‰æ›´å±¥æ­´**
   - å¤‰æ›´æ—¥æ™‚
   - å¤‰æ›´è€…
   - å¤‰æ›´å†…å®¹ï¼ˆdiffå½¢å¼ï¼‰
   - å¤‰æ›´ç†ç”±ï¼ˆä»»æ„ï¼‰

3. **å³æ™‚åæ˜ **
   - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ›´æ–°å¾Œã€å³åº§ã«å…¨ãƒ†ãƒŠãƒ³ãƒˆã«åæ˜ 
   - Redisã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ã‚¯ãƒªã‚¢
   - å®Ÿè¡Œä¸­ã®AIã‚»ãƒƒã‚·ãƒ§ãƒ³ã¯æ¬¡å›ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‹ã‚‰é©ç”¨

---

##### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼

**æ©Ÿèƒ½**: å®Ÿéš›ã®AIå¿œç­”ã‚’ãƒ†ã‚¹ãƒˆ

**UIç”»é¢**: `/admin/super-admin/prompts/[id]/preview`

**æ©Ÿèƒ½è©³ç´°**:
1. ãƒ†ã‚¹ãƒˆç”¨ã®å…¥åŠ›ã‚’é€ä¿¡
2. é¸æŠã—ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§AIå¿œç­”ã‚’ç”Ÿæˆ
3. å¿œç­”å†…å®¹ã‚’ç¢ºèª
4. è¤‡æ•°ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ†ã‚¹ãƒˆãŒå¯èƒ½

**ãƒ†ã‚¹ãƒˆé …ç›®**:
- æ¥­æ…‹åˆ¥ã®å¿œç­”ã®é•ã„
- è¨€èªåˆ¥ã®å¿œç­”ã®é•ã„
- æ©Ÿèƒ½åˆ¥ã®å¿œç­”ã®é•ã„
- å¤‰æ•°åŸ‹ã‚è¾¼ã¿ã®å‹•ä½œç¢ºèª

---

##### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

**ç”¨é€”**: ã‚ˆãä½¿ã†ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä¿å­˜

**ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¾‹**:
- ä¸å¯§ãªæ¥å®¢ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
- ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ãªæ¥å®¢ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
- å¤šè¨€èªå¯¾å¿œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
- æ¥­æ…‹åˆ¥ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

**æ©Ÿèƒ½**:
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰æ–°è¦ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆ
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å…±æœ‰
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ/ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

---

#### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå¤‰æ•°

**åˆ©ç”¨å¯èƒ½ãªå¤‰æ•°**:
```typescript
{
  // ãƒ›ãƒ†ãƒ«æƒ…å ±
  hotelName: string,           // ãƒ›ãƒ†ãƒ«å
  hotelAddress: string,        // ãƒ›ãƒ†ãƒ«ä½æ‰€
  hotelPhone: string,          // ãƒ›ãƒ†ãƒ«é›»è©±ç•ªå·
  
  // ãŠå®¢æ§˜æƒ…å ±
  customerName: string,        // ãŠå®¢æ§˜å
  roomNumber: string,          // å®¢å®¤ç•ªå·
  checkInDate: string,         // ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³æ—¥
  checkOutDate: string,        // ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆæ—¥
  
  // ç¾åœ¨æ™‚åˆ»
  currentTime: string,         // ç¾åœ¨æ™‚åˆ»
  currentDate: string,         // ç¾åœ¨æ—¥ä»˜
  
  // è¨€èª
  language: string,            // è¨€èªã‚³ãƒ¼ãƒ‰ï¼ˆja/en/zh/koï¼‰
  
  // æ¥­æ…‹
  businessType: string         // æ¥­æ…‹ï¼ˆleisure/omotenasuaiï¼‰
}
```

**ä½¿ç”¨ä¾‹**:
```
ã„ã‚‰ã£ã—ã‚ƒã„ã¾ã›ã€{{hotelName}}ã¸ã‚ˆã†ã“ãã€‚
{{customerName}}æ§˜ã€{{roomNumber}}å·å®¤ã§ã”ã–ã„ã¾ã™ã­ã€‚
æœ¬æ—¥ã¯{{currentDate}}ã§ã”ã–ã„ã¾ã™ã€‚
ä½•ã‹ã”ç”¨å‘½ãŒã”ã–ã„ã¾ã—ãŸã‚‰ã€ãŠæ°—è»½ã«ãŠç”³ã—ä»˜ã‘ãã ã•ã„ã€‚
```

---

### 8. ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“è¨­å®š

#### ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®š

**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ—ãƒ©ãƒ³è¨­å®š**:
- æ–°è¦ãƒ†ãƒŠãƒ³ãƒˆä½œæˆæ™‚ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ—ãƒ©ãƒ³

**ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®æ©Ÿèƒ½ON/OFF**:
- AIæ©Ÿèƒ½ã®æœ‰åŠ¹/ç„¡åŠ¹
- å¤šè¨€èªæ©Ÿèƒ½ã®æœ‰åŠ¹/ç„¡åŠ¹
- ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã®æœ‰åŠ¹/ç„¡åŠ¹

**ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ¢ãƒ¼ãƒ‰**:
- å…¨ãƒ†ãƒŠãƒ³ãƒˆã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™
- ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ç”»é¢è¡¨ç¤º
- ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½

**APIãƒ¬ãƒ¼ãƒˆåˆ¶é™**:
- ãƒ†ãƒŠãƒ³ãƒˆã”ã¨ã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™
- IPã”ã¨ã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™

#### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š

**ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒªã‚·ãƒ¼**:
- æœ€å°æ–‡å­—æ•°
- è¤‡é›‘ã•è¦ä»¶
- æœ‰åŠ¹æœŸé™

**ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ**:
- ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³: 15åˆ†
- é€šå¸¸ã‚¹ã‚¿ãƒƒãƒ•: 1æ™‚é–“

**IPãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆ**:
- ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™
- è¨±å¯IPã‚¢ãƒ‰ãƒ¬ã‚¹ãƒªã‚¹ãƒˆ

**2FAå¼·åˆ¶**:
- ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³ã¯2FAå¿…é ˆ
- é€šå¸¸ã‚¹ã‚¿ãƒƒãƒ•ã¯ä»»æ„

---

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆSSOTã§å®šç¾©æ¸ˆã¿ï¼‰

#### `tenants`
- ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³ã‹ã‚‰ç®¡ç†
- è©³ç´°: [SSOT_SAAS_MULTITENANT.md](../00_foundation/SSOT_SAAS_MULTITENANT.md)

#### `system_plan_restrictions`
- ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³ã‹ã‚‰å‹•çš„ã«ç·¨é›†å¯èƒ½
- è©³ç´°: [SSOT_SAAS_MULTITENANT.md](../00_foundation/SSOT_SAAS_MULTITENANT.md)

#### `tenant_system_plan`
- ãƒ†ãƒŠãƒ³ãƒˆÃ—ãƒ—ãƒ©ãƒ³ã®ç´ä»˜ã‘
- è©³ç´°: [SSOT_SAAS_MULTITENANT.md](../00_foundation/SSOT_SAAS_MULTITENANT.md)

---

### æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³å°‚ç”¨ï¼‰

#### `super_admin_users`

**Prismaã‚¹ã‚­ãƒ¼ãƒ**:
```prisma
model SuperAdminUser {
  id                String    @id @default(uuid())
  email             String    @unique
  passwordHash      String    @map("password_hash")
  name              String
  role              String    // 'super_admin', 'admin'
  isActive          Boolean   @default(true) @map("is_active")
  twoFactorSecret   String?   @map("two_factor_secret")
  twoFactorEnabled  Boolean   @default(false) @map("two_factor_enabled")
  lastLoginAt       DateTime? @map("last_login_at")
  lastLoginIp       String?   @map("last_login_ip")
  failedLoginCount  Int       @default(0) @map("failed_login_count")
  lockedUntil       DateTime? @map("locked_until")
  createdAt         DateTime  @default(now()) @map("created_at")
  updatedAt         DateTime  @updatedAt @map("updated_at")
  
  @@index([email])
  @@index([isActive])
  @@map("super_admin_users")
}
```

**é‡è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
- `twoFactorSecret`: TOTPç§˜å¯†éµ
- `twoFactorEnabled`: 2FAæœ‰åŠ¹ãƒ•ãƒ©ã‚°
- `failedLoginCount`: ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—å›æ•°ï¼ˆ5å›ã§30åˆ†ãƒ­ãƒƒã‚¯ï¼‰
- `lockedUntil`: ãƒ­ãƒƒã‚¯è§£é™¤æ—¥æ™‚

---

#### `tenant_usage_logs`

**Prismaã‚¹ã‚­ãƒ¼ãƒ**:
```prisma
model TenantUsageLog {
  id                String    @id @default(uuid())
  tenantId          String    @map("tenant_id")
  date              DateTime  @db.Date
  deviceCount       Int       @map("device_count")
  orderCount        Int       @map("order_count")
  aiTokenCount      Int       @map("ai_token_count")
  storageGb         Float     @map("storage_gb")
  apiCallCount      Int       @map("api_call_count")
  createdAt         DateTime  @default(now()) @map("created_at")
  
  tenant            Tenant    @relation(fields: [tenantId], references: [id])
  
  @@unique([tenantId, date], map: "uniq_tenant_date")
  @@index([tenantId])
  @@index([date])
  @@map("tenant_usage_logs")
}
```

**ãƒ‡ãƒ¼ã‚¿åé›†**:
- æ—¥æ¬¡ãƒãƒƒãƒã§é›†è¨ˆ
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

---

#### `ai_credit_transactions`

**Prismaã‚¹ã‚­ãƒ¼ãƒ**:
```prisma
model AiCreditTransaction {
  id                String    @id @default(uuid())
  tenantId          String    @map("tenant_id")
  amount            Int       // ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆé‡ï¼ˆæ­£ï¼šè¿½åŠ ã€è² ï¼šæ¶ˆè²»ï¼‰
  type              String    // 'allocation', 'consumption', 'refund'
  description       String?
  modelName         String?   @map("model_name")
  tokenCount        Int?      @map("token_count")
  requestId         String?   @map("request_id")
  createdAt         DateTime  @default(now()) @map("created_at")
  
  tenant            Tenant    @relation(fields: [tenantId], references: [id])
  
  @@index([tenantId])
  @@index([type])
  @@index([createdAt])
  @@map("ai_credit_transactions")
}
```

**ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç¨®é¡**:
- `allocation`: ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆå‰²ã‚Šå½“ã¦
- `consumption`: ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆæ¶ˆè²»
- `refund`: ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆè¿”é‡‘

---

#### `system_alerts`

**Prismaã‚¹ã‚­ãƒ¼ãƒ**:
```prisma
model SystemAlert {
  id                String    @id @default(uuid())
  tenantId          String?   @map("tenant_id")  // nullã®å ´åˆã¯ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ã‚¢ãƒ©ãƒ¼ãƒˆ
  alertType         String    @map("alert_type")  // 'usage_limit', 'security', 'payment', etc.
  severity          String    // 'low', 'medium', 'high', 'critical'
  title             String
  message           String
  metadata          Json?     // è¿½åŠ æƒ…å ±
  isResolved        Boolean   @default(false) @map("is_resolved")
  resolvedAt        DateTime? @map("resolved_at")
  resolvedBy        String?   @map("resolved_by")
  createdAt         DateTime  @default(now()) @map("created_at")
  
  tenant            Tenant?   @relation(fields: [tenantId], references: [id])
  
  @@index([tenantId])
  @@index([alertType])
  @@index([severity])
  @@index([isResolved])
  @@index([createdAt])
  @@map("system_alerts")
}
```

**é‡è¦åº¦**:
- `low`: æƒ…å ±ãƒ¬ãƒ™ãƒ«
- `medium`: æ³¨æ„ãƒ¬ãƒ™ãƒ«
- `high`: è­¦å‘Šãƒ¬ãƒ™ãƒ«
- `critical`: ç·Šæ€¥ãƒ¬ãƒ™ãƒ«

---

#### `super_admin_audit_logs`

**Prismaã‚¹ã‚­ãƒ¼ãƒ**:
```prisma
model SuperAdminAuditLog {
  id                String    @id @default(uuid())
  adminId           String    @map("admin_id")
  action            String    // 'create', 'update', 'delete', 'login', etc.
  targetType        String    @map("target_type")  // 'tenant', 'plan', 'alert', etc.
  targetId          String?   @map("target_id")
  beforeData        Json?     @map("before_data")
  afterData         Json?     @map("after_data")
  ipAddress         String    @map("ip_address")
  userAgent         String    @map("user_agent")
  createdAt         DateTime  @default(now()) @map("created_at")
  
  @@index([adminId])
  @@index([action])
  @@index([targetType])
  @@index([createdAt])
  @@map("super_admin_audit_logs")
}
```

**ç›£æŸ»å¯¾è±¡**:
- å…¨æ“ä½œã‚’è¨˜éŒ²
- å¤‰æ›´å‰å¾Œã®å€¤ã‚’ä¿å­˜
- æ“ä½œè€…ã®è¨˜éŒ²
- IPã‚¢ãƒ‰ãƒ¬ã‚¹ãƒ»User Agent

---

#### `system_logs`

**Prismaã‚¹ã‚­ãƒ¼ãƒ**:
```prisma
model SystemLog {
  id          String    @id @default(uuid())
  tenantId    String?   @map("tenant_id")  // nullã®å ´åˆã¯ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ãƒ­ã‚°
  service     String    // 'hotel-saas' | 'hotel-pms' | 'hotel-member' | 'hotel-common'
  level       String    // 'error' | 'warn' | 'info' | 'debug'
  message     String    @db.Text
  context     Json?     // ã‚¨ãƒ©ãƒ¼ã‚¹ã‚¿ãƒƒã‚¯ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆæƒ…å ±ç­‰
  userId      String?   @map("user_id")     // é–¢é€£ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆã‚ã‚Œã°ï¼‰
  ipAddress   String?   @map("ip_address")
  userAgent   String?   @map("user_agent")
  timestamp   DateTime  @default(now())
  
  tenant      Tenant?   @relation(fields: [tenantId], references: [id])
  
  @@index([tenantId, timestamp])
  @@index([service, level, timestamp])
  @@index([level, timestamp])
  @@map("system_logs")
}
```

**é‡è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
- `service`: ã©ã®ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰ã®ãƒ­ã‚°ã‹
- `level`: ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ï¼ˆerror/warn/info/debugï¼‰
- `context`: ã‚¨ãƒ©ãƒ¼ã‚¹ã‚¿ãƒƒã‚¯ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆæƒ…å ±ç­‰ã®è©³ç´°æƒ…å ±
- `timestamp`: ãƒ­ã‚°ç™ºç”Ÿæ—¥æ™‚

---

#### `server_logs`

**Prismaã‚¹ã‚­ãƒ¼ãƒ**:
```prisma
model ServerLog {
  id          String    @id @default(uuid())
  server      String    // 'nginx' | 'pm2' | 'postgresql' | 'redis'
  level       String    // 'error' | 'warn' | 'info' | 'debug'
  message     String    @db.Text
  context     Json?     // ãƒ—ãƒ­ã‚»ã‚¹IDã€ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ç­‰
  timestamp   DateTime  @default(now())
  
  @@index([server, level, timestamp])
  @@index([level, timestamp])
  @@map("server_logs")
}
```

**é‡è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
- `server`: ã©ã®ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã®ãƒ­ã‚°ã‹
- `context`: ãƒ—ãƒ­ã‚»ã‚¹IDã€ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã€CPUä½¿ç”¨ç‡ç­‰

---

#### `ai_prompts`

**Prismaã‚¹ã‚­ãƒ¼ãƒ**:
```prisma
model AiPrompt {
  id                String    @id @default(uuid())
  name              String    // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå
  promptType        String    @map("prompt_type")  // 'system' | 'business' | 'language' | 'function'
  businessType      String?   @map("business_type")  // 'leisure' | 'omotenasuai'
  language          String?   // 'ja' | 'en' | 'zh' | 'zh-TW' | 'ko'
  functionType      String?   @map("function_type")  // 'order' | 'facility' | 'tourism' | 'concierge' | 'housekeeping' | 'checkout'
  content           String    @db.Text  // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæœ¬æ–‡
  description       String?   // èª¬æ˜æ–‡
  tags              String[]  // ã‚¿ã‚°ï¼ˆæ¤œç´¢ç”¨ï¼‰
  isActive          Boolean   @default(true) @map("is_active")
  version           Int       @default(1)
  createdBy         String    @map("created_by")
  updatedBy         String    @map("updated_by")
  createdAt         DateTime  @default(now()) @map("created_at")
  updatedAt         DateTime  @updatedAt @map("updated_at")
  
  versions          AiPromptVersion[]
  
  @@unique([promptType, businessType, language, functionType], map: "uniq_prompt_combination")
  @@index([promptType])
  @@index([businessType])
  @@index([language])
  @@index([functionType])
  @@index([isActive])
  @@map("ai_prompts")
}
```

**é‡è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
- `promptType`: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ç¨®åˆ¥
- `businessType`: æ¥­æ…‹ç¨®åˆ¥ï¼ˆæ¥­æ…‹åˆ¥ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å ´åˆï¼‰
- `language`: è¨€èªã‚³ãƒ¼ãƒ‰ï¼ˆè¨€èªåˆ¥ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å ´åˆï¼‰
- `functionType`: æ©Ÿèƒ½ç¨®åˆ¥ï¼ˆæ©Ÿèƒ½åˆ¥ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å ´åˆï¼‰
- `content`: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæœ¬æ–‡
- `version`: ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·

**ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„**:
- `promptType + businessType + language + functionType`ã®çµ„ã¿åˆã‚ã›ã¯1ã¤ã®ã¿

---

#### `ai_prompt_versions`

**Prismaã‚¹ã‚­ãƒ¼ãƒ**:
```prisma
model AiPromptVersion {
  id                String    @id @default(uuid())
  promptId          String    @map("prompt_id")
  version           Int
  content           String    @db.Text
  description       String?
  changeReason      String?   @map("change_reason")  // å¤‰æ›´ç†ç”±
  createdBy         String    @map("created_by")
  createdAt         DateTime  @default(now()) @map("created_at")
  
  prompt            AiPrompt  @relation(fields: [promptId], references: [id])
  
  @@unique([promptId, version], map: "uniq_prompt_version")
  @@index([promptId])
  @@index([createdAt])
  @@map("ai_prompt_versions")
}
```

**é‡è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
- `promptId`: å…ƒã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆID
- `version`: ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·
- `content`: ãã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæœ¬æ–‡
- `changeReason`: å¤‰æ›´ç†ç”±

**ç”¨é€”**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã€å¤‰æ›´å±¥æ­´ã®ä¿æŒ

---

#### `exchange_rates`

**Prismaã‚¹ã‚­ãƒ¼ãƒ**:
```prisma
model ExchangeRate {
  id                String    @id @default(uuid())
  baseCurrency      String    @map("base_currency")  // åŸºæº–é€šè²¨ï¼ˆJPYï¼‰
  targetCurrency    String    @map("target_currency")  // å¯¾è±¡é€šè²¨ï¼ˆUSD, EUR, CNYç­‰ï¼‰
  rate              Float     // ãƒ¬ãƒ¼ãƒˆ
  source            String?   // ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ï¼ˆ'manual' | 'auto' | 'api_name'ï¼‰
  effectiveDate     DateTime  @map("effective_date")  // é©ç”¨æ—¥
  createdBy         String?   @map("created_by")  // ä½œæˆè€…ï¼ˆæ‰‹å‹•è¨­å®šã®å ´åˆï¼‰
  createdAt         DateTime  @default(now()) @map("created_at")
  
  @@unique([baseCurrency, targetCurrency, effectiveDate], map: "uniq_exchange_rate")
  @@index([baseCurrency, targetCurrency])
  @@index([effectiveDate])
  @@map("exchange_rates")
}
```

**é‡è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
- `baseCurrency`: åŸºæº–é€šè²¨ï¼ˆé€šå¸¸ã¯JPYï¼‰
- `targetCurrency`: å¯¾è±¡é€šè²¨
- `rate`: ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆ
- `source`: ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ï¼ˆæ‰‹å‹• or è‡ªå‹•ï¼‰
- `effectiveDate`: é©ç”¨æ—¥

---

#### `notification_templates`

**Prismaã‚¹ã‚­ãƒ¼ãƒ**:
```prisma
model NotificationTemplate {
  id                String    @id @default(uuid())
  name              String    // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå
  templateType      String    @map("template_type")  // 'email' | 'slack' | 'sms'
  category          String    // ã‚«ãƒ†ã‚´ãƒªï¼ˆ'alert' | 'tenant_notification' | 'system'ï¼‰
  subject           String?   // ä»¶åï¼ˆãƒ¡ãƒ¼ãƒ«ã®å ´åˆï¼‰
  content           String    @db.Text  // æœ¬æ–‡
  variables         String[]  // åˆ©ç”¨å¯èƒ½ãªå¤‰æ•°
  isActive          Boolean   @default(true) @map("is_active")
  createdBy         String    @map("created_by")
  updatedBy         String    @map("updated_by")
  createdAt         DateTime  @default(now()) @map("created_at")
  updatedAt         DateTime  @updatedAt @map("updated_at")
  
  @@index([templateType])
  @@index([category])
  @@index([isActive])
  @@map("notification_templates")
}
```

**é‡è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
- `templateType`: é€šçŸ¥ç¨®åˆ¥ï¼ˆemail/slack/smsï¼‰
- `category`: ã‚«ãƒ†ã‚´ãƒª
- `subject`: ä»¶åï¼ˆãƒ¡ãƒ¼ãƒ«ã®å ´åˆï¼‰
- `content`: æœ¬æ–‡ï¼ˆå¤‰æ•°åŸ‹ã‚è¾¼ã¿å¯èƒ½ï¼‰
- `variables`: åˆ©ç”¨å¯èƒ½ãªå¤‰æ•°ãƒªã‚¹ãƒˆ

---

#### `system_health_checks`

**Prismaã‚¹ã‚­ãƒ¼ãƒ**:
```prisma
model SystemHealthCheck {
  id                String    @id @default(uuid())
  checkType         String    @map("check_type")  // 'database' | 'redis' | 'api' | 'service'
  target            String    // ãƒã‚§ãƒƒã‚¯å¯¾è±¡ï¼ˆ'hotel-saas' | 'hotel-pms' | 'hotel-member' | 'hotel-common'ï¼‰
  status            String    // 'healthy' | 'degraded' | 'down'
  responseTime      Int?      @map("response_time")  // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ ï¼ˆmsï¼‰
  errorMessage      String?   @map("error_message")
  metadata          Json?     // è¿½åŠ æƒ…å ±
  checkedAt         DateTime  @default(now()) @map("checked_at")
  
  @@index([checkType, target])
  @@index([status])
  @@index([checkedAt])
  @@map("system_health_checks")
}
```

**é‡è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
- `checkType`: ãƒã‚§ãƒƒã‚¯ç¨®åˆ¥
- `target`: ãƒã‚§ãƒƒã‚¯å¯¾è±¡
- `status`: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆhealthy/degraded/downï¼‰
- `responseTime`: ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ 
- `checkedAt`: ãƒã‚§ãƒƒã‚¯æ—¥æ™‚

**ç”¨é€”**: ã‚·ã‚¹ãƒ†ãƒ ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã®å±¥æ­´ä¿å­˜

---

## ğŸŒ APIä»•æ§˜

### èªè¨¼API

#### POST /api/v1/super-admin/auth/login

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```typescript
{
  email: string,
  password: string,
  twoFactorCode?: string  // 2FAæœ‰åŠ¹æ™‚ã¯å¿…é ˆ
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆæˆåŠŸï¼‰**:
```typescript
{
  success: true,
  data: {
    sessionId: string,
    user: {
      id: string,
      email: string,
      name: string,
      role: 'super_admin' | 'admin',
      twoFactorEnabled: boolean
    }
  }
}
```

**Set-Cookie**:
```
super-admin-session-id=<sessionId>; HttpOnly; Secure; SameSite=Strict; Max-Age=900
```

**ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
- `401 INVALID_CREDENTIALS`: èªè¨¼å¤±æ•—
- `403 TWO_FACTOR_REQUIRED`: 2FAã‚³ãƒ¼ãƒ‰å¿…è¦
- `403 ACCOUNT_LOCKED`: ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ­ãƒƒã‚¯ä¸­

---

### ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†API

#### GET /api/v1/super-admin/tenants

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```
GET /api/v1/super-admin/tenants?page=1&limit=20&status=active
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```typescript
{
  success: true,
  data: {
    tenants: Array<{
      id: string,
      name: string,
      domain: string,
      planType: string,
      status: 'active' | 'suspended' | 'deleted',
      contactEmail: string,
      createdAt: string,
      updatedAt: string
    }>,
    pagination: {
      page: number,
      limit: number,
      total: number,
      totalPages: number
    }
  }
}
```

---

#### POST /api/v1/super-admin/tenants

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```typescript
{
  name: string,
  domain: string,
  planType: string,
  contactEmail: string,
  settings?: object
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```typescript
{
  success: true,
  data: {
    tenant: {
      id: string,
      name: string,
      domain: string,
      planType: string,
      status: 'active',
      contactEmail: string,
      createdAt: string
    }
  }
}
```

**ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
- `400 VALIDATION_ERROR`: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼
- `409 DOMAIN_ALREADY_EXISTS`: ãƒ‰ãƒ¡ã‚¤ãƒ³é‡è¤‡

---

#### PUT /api/v1/super-admin/tenants/:id

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```typescript
{
  name?: string,
  domain?: string,
  planType?: string,
  contactEmail?: string,
  status?: 'active' | 'suspended' | 'deleted',
  settings?: object
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```typescript
{
  success: true,
  data: {
    tenant: {
      id: string,
      name: string,
      // ... æ›´æ–°å¾Œã®æƒ…å ±
    }
  }
}
```

---

#### DELETE /api/v1/super-admin/tenants/:id

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```
DELETE /api/v1/super-admin/tenants/:id?reason=å¥‘ç´„çµ‚äº†
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```typescript
{
  success: true,
  data: {
    message: 'Tenant deleted successfully'
  }
}
```

**æ³¨æ„**: è«–ç†å‰Šé™¤ï¼ˆ`is_deleted = true`ï¼‰

---

### ãƒ—ãƒ©ãƒ³ç®¡ç†API

#### GET /api/v1/super-admin/plans

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```typescript
{
  success: true,
  data: {
    plans: Array<{
      id: string,
      systemType: string,
      businessType: string,
      planType: string,
      planCategory: string,
      monthlyPrice: number,
      maxDevices: number,
      enableAiConcierge: boolean,
      enableMultilingual: boolean,
      enableLayoutEditor: boolean,
      maxMonthlyOrders: number,
      maxMonthlyAiRequests: number,
      maxStorageGB: number,
      displayName: string,
      description: string,
      isActive: boolean
    }>
  }
}
```

---

#### POST /api/v1/super-admin/plans

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```typescript
{
  systemType: 'hotel-saas' | 'hotel-pms' | 'hotel-member',
  businessType: 'leisure' | 'omotenasuai',
  planType: 'economy' | 'professional' | 'enterprise',
  planCategory: string,
  monthlyPrice: number,
  maxDevices: number,
  enableAiConcierge: boolean,
  enableMultilingual: boolean,
  enableLayoutEditor: boolean,
  maxMonthlyOrders: number,
  maxMonthlyAiRequests: number,
  maxStorageGB: number,
  displayName: string,
  description: string
}
```

---

#### PUT /api/v1/super-admin/plans/:id

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```typescript
{
  // åŸºæœ¬æƒ…å ±ï¼ˆå¤‰æ›´ä¸å¯ï¼‰
  // systemType, businessType, planType, planCategory ã¯å¤‰æ›´ä¸å¯
  
  // æ–™é‡‘è¨­å®šï¼ˆå¤‰æ›´å¯èƒ½ï¼‰
  monthlyPrice?: number,
  additionalDeviceCost?: number,
  roomTerminalCost?: number,
  frontDeskCost?: number,
  kitchenCost?: number,
  barCost?: number,
  housekeepingCost?: number,
  managerCost?: number,
  commonAreaCost?: number,
  multilingualUpgradePrice?: number,
  
  // æ•°å€¤åˆ¶é™ï¼ˆå‹•çš„å¤‰æ›´å¯èƒ½ï¼‰
  maxDevices?: number,
  maxMonthlyOrders?: number,
  maxMonthlyAiRequests?: number,
  maxStorageGB?: number,
  
  // æ©Ÿèƒ½ãƒ•ãƒ©ã‚°ï¼ˆå‹•çš„ON/OFFå¯èƒ½ï¼‰
  enableAiConcierge?: boolean,
  enableMultilingual?: boolean,
  enableLayoutEditor?: boolean,
  enableFacilityGuide?: boolean,
  enableAiBusinessSupport?: boolean,
  
  // ãƒ¡ã‚¿æƒ…å ±
  displayName?: string,
  description?: string
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```typescript
{
  success: true,
  data: {
    plan: {
      id: string,
      // ... æ›´æ–°å¾Œã®ãƒ—ãƒ©ãƒ³æƒ…å ±
    },
    impact: {
      affectedTenantCount: number,  // å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ†ãƒŠãƒ³ãƒˆæ•°
      warnings: Array<{
        type: 'device_limit_exceeded' | 'feature_disabled' | 'storage_exceeded',
        tenantCount: number,
        message: string
      }>
    }
  }
}
```

**é‡è¦ãªå‹•ä½œ**:
1. ãƒ—ãƒ©ãƒ³æ›´æ–°å¾Œã€å³åº§ã«å…¨ãƒ†ãƒŠãƒ³ãƒˆã«åæ˜ 
2. Redisã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢
3. å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ†ãƒŠãƒ³ãƒˆã‚’ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã§è¿”ã™
4. ãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰æ™‚ã®è­¦å‘Šã‚’å«ã‚€

---

#### GET /api/v1/super-admin/plans/:id/impact

**èª¬æ˜**: ãƒ—ãƒ©ãƒ³å¤‰æ›´å‰ã«å½±éŸ¿ã‚’ç¢ºèªã™ã‚‹API

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```
GET /api/v1/super-admin/plans/:id/impact?maxDevices=20&enableAiConcierge=false
```

**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**: å¤‰æ›´äºˆå®šã®å€¤

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```typescript
{
  success: true,
  data: {
    currentPlan: {
      // ç¾åœ¨ã®ãƒ—ãƒ©ãƒ³è¨­å®š
    },
    proposedChanges: {
      // å¤‰æ›´äºˆå®šã®å†…å®¹
    },
    impact: {
      totalTenants: number,  // ã“ã®ãƒ—ãƒ©ãƒ³ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ†ãƒŠãƒ³ãƒˆç·æ•°
      affectedTenants: number,  // å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ†ãƒŠãƒ³ãƒˆæ•°
      details: {
        deviceLimitExceeded: {
          count: number,
          tenantIds: string[]
        },
        featureDisabled: {
          count: number,
          features: string[],
          tenantIds: string[]
        },
        storageExceeded: {
          count: number,
          tenantIds: string[]
        }
      },
      warnings: Array<{
        severity: 'low' | 'medium' | 'high',
        message: string
      }>
    }
  }
}
```

---

#### POST /api/v1/super-admin/tenants/:id/change-plan

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```typescript
{
  newPlanId: string,
  effectiveDate?: string  // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: å³æ™‚
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```typescript
{
  success: true,
  data: {
    message: 'Plan changed successfully',
    warnings?: Array<string>  // ãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰æ™‚ã®è­¦å‘Š
  }
}
```

---

### AIç®¡ç†API

#### GET /api/v1/super-admin/ai/models

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```typescript
{
  success: true,
  data: {
    models: Array<{
      id: string,
      name: string,
      provider: 'openai' | 'anthropic',
      inputTokenCost: number,
      outputTokenCost: number,
      isActive: boolean
    }>
  }
}
```

---

#### GET /api/v1/super-admin/ai/credits/:tenantId

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```typescript
{
  success: true,
  data: {
    tenantId: string,
    balance: number,
    monthlyAllocation: number,
    consumed: number,
    remaining: number
  }
}
```

---

#### POST /api/v1/super-admin/ai/credits/allocate

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```typescript
{
  tenantId: string,
  amount: number,
  description?: string
}
```

---

### ä½¿ç”¨é‡ç›£è¦–API

#### GET /api/v1/super-admin/usage/overview

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```typescript
{
  success: true,
  data: {
    totalTenants: number,
    activeTenants: number,
    totalDevices: number,
    totalOrders: number,
    totalAiTokens: number,
    totalStorageGB: number
  }
}
```

---

#### GET /api/v1/super-admin/usage/:tenantId

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```typescript
{
  success: true,
  data: {
    tenantId: string,
    currentMonth: {
      deviceCount: number,
      orderCount: number,
      aiTokenCount: number,
      storageGb: number,
      apiCallCount: number
    },
    limits: {
      maxDevices: number,
      maxMonthlyOrders: number,
      maxMonthlyAiRequests: number,
      maxStorageGB: number
    },
    usageRate: {
      devices: number,  // ãƒ‘ãƒ¼ã‚»ãƒ³ãƒ†ãƒ¼ã‚¸
      orders: number,
      aiTokens: number,
      storage: number
    }
  }
}
```

---

### ã‚¢ãƒ©ãƒ¼ãƒˆç®¡ç†API

#### GET /api/v1/super-admin/alerts

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```typescript
{
  success: true,
  data: {
    alerts: Array<{
      id: string,
      tenantId: string | null,
      alertType: string,
      severity: 'low' | 'medium' | 'high' | 'critical',
      title: string,
      message: string,
      isResolved: boolean,
      createdAt: string
    }>
  }
}
```

---

#### POST /api/v1/super-admin/alerts/:id/resolve

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```typescript
{
  resolution: string  // è§£æ±ºå†…å®¹
}
```

---

### ãƒ­ã‚°ç®¡ç†API

#### GET /api/v1/super-admin/logs/system

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```
GET /api/v1/super-admin/logs/system?tenantId=xxx&service=hotel-saas&level=error&keyword=timeout&startDate=2025-10-01&endDate=2025-10-07&page=1&limit=50
```

**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | å‹ | å¿…é ˆ | èª¬æ˜ |
|----------|---|------|------|
| `tenantId` | string | âŒ | ãƒ†ãƒŠãƒ³ãƒˆIDï¼ˆæŒ‡å®šã—ãªã„å ´åˆã¯å…¨ãƒ†ãƒŠãƒ³ãƒˆï¼‰ |
| `service` | string | âŒ | ã‚µãƒ¼ãƒ“ã‚¹åï¼ˆhotel-saas/hotel-pms/hotel-member/hotel-commonï¼‰ |
| `level` | string | âŒ | ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ï¼ˆerror/warn/info/debugï¼‰ |
| `keyword` | string | âŒ | ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ |
| `startDate` | string | âŒ | é–‹å§‹æ—¥æ™‚ï¼ˆISO 8601å½¢å¼ï¼‰ |
| `endDate` | string | âŒ | çµ‚äº†æ—¥æ™‚ï¼ˆISO 8601å½¢å¼ï¼‰ |
| `page` | number | âœ… | ãƒšãƒ¼ã‚¸ç•ªå· |
| `limit` | number | âœ… | 1ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®ä»¶æ•° |

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```typescript
{
  success: true,
  data: {
    logs: Array<{
      id: string,
      tenantId: string | null,
      service: string,
      level: string,
      message: string,
      context: object | null,
      userId: string | null,
      ipAddress: string | null,
      userAgent: string | null,
      timestamp: string
    }>,
    pagination: {
      page: number,
      limit: number,
      total: number,
      totalPages: number
    }
  }
}
```

---

#### GET /api/v1/super-admin/logs/server

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```
GET /api/v1/super-admin/logs/server?server=nginx&level=error&keyword=connection&startDate=2025-10-01&endDate=2025-10-07&page=1&limit=50
```

**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | å‹ | å¿…é ˆ | èª¬æ˜ |
|----------|---|------|------|
| `server` | string | âŒ | ã‚µãƒ¼ãƒãƒ¼åï¼ˆnginx/pm2/postgresql/redisï¼‰ |
| `level` | string | âŒ | ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ï¼ˆerror/warn/info/debugï¼‰ |
| `keyword` | string | âŒ | ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ |
| `startDate` | string | âŒ | é–‹å§‹æ—¥æ™‚ï¼ˆISO 8601å½¢å¼ï¼‰ |
| `endDate` | string | âŒ | çµ‚äº†æ—¥æ™‚ï¼ˆISO 8601å½¢å¼ï¼‰ |
| `page` | number | âœ… | ãƒšãƒ¼ã‚¸ç•ªå· |
| `limit` | number | âœ… | 1ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®ä»¶æ•° |

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```typescript
{
  success: true,
  data: {
    logs: Array<{
      id: string,
      server: string,
      level: string,
      message: string,
      context: object | null,
      timestamp: string
    }>,
    pagination: {
      page: number,
      limit: number,
      total: number,
      totalPages: number
    }
  }
}
```

---

#### GET /api/v1/super-admin/logs/system/export

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```
GET /api/v1/super-admin/logs/system/export?tenantId=xxx&service=hotel-saas&level=error&startDate=2025-10-01&endDate=2025-10-07&format=csv
```

**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**: GET /api/v1/super-admin/logs/systemã¨åŒã˜ + `format`

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | å‹ | å¿…é ˆ | èª¬æ˜ |
|----------|---|------|------|
| `format` | string | âœ… | ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå½¢å¼ï¼ˆcsv/jsonï¼‰ |

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
- Content-Type: `text/csv` ã¾ãŸã¯ `application/json`
- ãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

---

#### GET /api/v1/super-admin/logs/server/export

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```
GET /api/v1/super-admin/logs/server/export?server=nginx&level=error&startDate=2025-10-01&endDate=2025-10-07&format=json
```

**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**: GET /api/v1/super-admin/logs/serverã¨åŒã˜ + `format`

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
- Content-Type: `text/csv` ã¾ãŸã¯ `application/json`
- ãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

---

## ğŸ¨ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…

### ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

**ãƒ•ã‚¡ã‚¤ãƒ«**: `/Users/kaneko/hotel-saas/layouts/super-admin.vue`

```vue
<template>
  <div class="super-admin-layout">
    <SuperAdminSidebar />
    <div class="main-content">
      <SuperAdminHeader />
      <main>
        <slot />
      </main>
    </div>
  </div>
</template>
```

---

### ç”»é¢ä¸€è¦§

#### 1. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- **ãƒ‘ã‚¹**: `/admin/super-admin/dashboard`
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `/pages/admin/super-admin/dashboard/index.vue`
- **å†…å®¹**: å…¨ä½“æ¦‚è¦ã€ä½¿ç”¨é‡ã‚µãƒãƒªãƒ¼ã€ã‚¢ãƒ©ãƒ¼ãƒˆä¸€è¦§

#### 2. ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†
- **ãƒ†ãƒŠãƒ³ãƒˆä¸€è¦§**: `/admin/super-admin/tenants`
- **ãƒ†ãƒŠãƒ³ãƒˆè©³ç´°**: `/admin/super-admin/tenants/[id]`
- **ãƒ†ãƒŠãƒ³ãƒˆä½œæˆ**: `/admin/super-admin/tenants/create`
- **ãƒ†ãƒŠãƒ³ãƒˆç·¨é›†**: `/admin/super-admin/tenants/[id]/edit`

#### 3. ãƒ—ãƒ©ãƒ³ç®¡ç†
- **ãƒ—ãƒ©ãƒ³ä¸€è¦§**: `/admin/super-admin/plans`
- **ãƒ—ãƒ©ãƒ³ä½œæˆ**: `/admin/super-admin/plans/create`
- **ãƒ—ãƒ©ãƒ³ç·¨é›†**: `/admin/super-admin/plans/[id]/edit`

#### 4. AIç®¡ç†
- **ãƒ¢ãƒ‡ãƒ«ç®¡ç†**: `/admin/super-admin/ai/models`
- **ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆç®¡ç†**: `/admin/super-admin/ai/credits`
- **ä½¿ç”¨çµ±è¨ˆ**: `/admin/super-admin/ai/usage`

#### 5. ä½¿ç”¨é‡ç›£è¦–
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**: `/admin/super-admin/usage`
- **ãƒ†ãƒŠãƒ³ãƒˆåˆ¥è©³ç´°**: `/admin/super-admin/usage/[tenantId]`

#### 6. ã‚¢ãƒ©ãƒ¼ãƒˆç®¡ç†
- **ã‚¢ãƒ©ãƒ¼ãƒˆä¸€è¦§**: `/admin/super-admin/alerts`
- **ã‚¢ãƒ©ãƒ¼ãƒˆè©³ç´°**: `/admin/super-admin/alerts/[id]`

#### 7. ãƒ­ã‚°ç®¡ç†
- **ã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚°**: `/admin/super-admin/logs/system`
- **ã‚µãƒ¼ãƒãƒ¼ãƒ­ã‚°**: `/admin/super-admin/logs/server`
- **ãƒ­ã‚°è©³ç´°**: `/admin/super-admin/logs/[id]`

#### 8. ã‚·ã‚¹ãƒ†ãƒ è¨­å®š
- **ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®š**: `/admin/super-admin/settings`
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š**: `/admin/super-admin/settings/security`

---

### Composable

#### useSuperAdmin

**ãƒ•ã‚¡ã‚¤ãƒ«**: `/Users/kaneko/hotel-saas/composables/useSuperAdmin.ts`

```typescript
export const useSuperAdmin = () => {
  const user = ref<SuperAdminUser | null>(null)
  const isAuthenticated = computed(() => !!user.value)
  
  const login = async (email: string, password: string, twoFactorCode?: string) => {
    const response = await $fetch('/api/v1/super-admin/auth/login', {
      method: 'POST',
      credentials: 'include',
      body: { email, password, twoFactorCode }
    })
    
    if (response.success) {
      user.value = response.data.user
      return true
    }
    return false
  }
  
  const logout = async () => {
    await $fetch('/api/v1/super-admin/auth/logout', {
      method: 'POST',
      credentials: 'include'
    })
    user.value = null
  }
  
  return {
    user,
    isAuthenticated,
    login,
    logout
  }
}
```

---

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### èªè¨¼ãƒ»èªå¯

#### 1. ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³å°‚ç”¨èªè¨¼
- å°‚ç”¨ã®èªè¨¼ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- `super_admin_users`ãƒ†ãƒ¼ãƒ–ãƒ«ã§ç®¡ç†
- é€šå¸¸ã®ã‚¹ã‚¿ãƒƒãƒ•èªè¨¼ã¨ã¯å®Œå…¨ã«åˆ†é›¢

#### 2. 2FAå¿…é ˆ
- TOTPæ–¹å¼ï¼ˆGoogle Authenticatorç­‰ï¼‰
- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚³ãƒ¼ãƒ‰ç™ºè¡Œ
- 2FAç„¡åŠ¹åŒ–ã¯ç®¡ç†è€…æ‰¿èªå¿…é ˆ

#### 3. IPãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆ
- ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™
- è¨±å¯IPã‚¢ãƒ‰ãƒ¬ã‚¹ãƒªã‚¹ãƒˆç®¡ç†
- é•åæ™‚ã¯å³åº§ã«ãƒ–ãƒ­ãƒƒã‚¯

#### 4. ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
- ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³: 15åˆ†
- è‡ªå‹•ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
- å†èªè¨¼å¿…é ˆ

---

### ç›£æŸ»ãƒ­ã‚°

#### è¨˜éŒ²å¯¾è±¡
- å…¨æ“ä½œã‚’è¨˜éŒ²
- å¤‰æ›´å‰å¾Œã®å€¤ã‚’ä¿å­˜
- æ“ä½œè€…ã®è¨˜éŒ²
- IPã‚¢ãƒ‰ãƒ¬ã‚¹ãƒ»User Agent
- ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—

#### ãƒ­ã‚°ä¿æŒæœŸé–“
- æœ€ä½1å¹´é–“
- æ³•ä»¤éµå®ˆã®ãŸã‚é•·æœŸä¿å­˜

---

### ãƒ‡ãƒ¼ã‚¿ä¿è­·

#### 1. æ©Ÿå¯†æƒ…å ±ã®æš—å·åŒ–
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: bcrypt
- 2FAç§˜å¯†éµ: AES-256
- APIã‚­ãƒ¼: æš—å·åŒ–ä¿å­˜

#### 2. ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
- æ¨©é™ãƒ¬ãƒ™ãƒ«ã«ã‚ˆã‚‹åˆ¶é™
- ç›£æŸ»ãƒ­ã‚°ã§è¿½è·¡

#### 3. ãƒ‡ãƒ¼ã‚¿ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
- æ—¥æ¬¡è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
- é€±æ¬¡ãƒ•ãƒ«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
- ç½å®³å¾©æ—§è¨ˆç”»

---

## ğŸ“Š æ—¢å­˜å®Ÿè£…çŠ¶æ³

### hotel-saas

| æ©Ÿèƒ½ | å®Ÿè£…çŠ¶æ³ | ãƒ•ã‚¡ã‚¤ãƒ« |
|-----|---------|---------|
| ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³èªè¨¼ | âŒ æœªå®Ÿè£… | - |
| ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†UI | âŒ æœªå®Ÿè£… | - |
| ãƒ—ãƒ©ãƒ³ç®¡ç†UI | âŒ æœªå®Ÿè£… | - |
| AIç®¡ç†UI | âŒ æœªå®Ÿè£… | - |
| ä½¿ç”¨é‡ç›£è¦–UI | âŒ æœªå®Ÿè£… | - |
| ã‚¢ãƒ©ãƒ¼ãƒˆç®¡ç†UI | âŒ æœªå®Ÿè£… | - |
| ãƒ­ã‚°ç®¡ç†UI | âŒ æœªå®Ÿè£… | - |
| ã‚·ã‚¹ãƒ†ãƒ è¨­å®šUI | âŒ æœªå®Ÿè£… | - |

---

### hotel-common

| æ©Ÿèƒ½ | å®Ÿè£…çŠ¶æ³ | ãƒ•ã‚¡ã‚¤ãƒ« |
|-----|---------|---------|
| ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³èªè¨¼API | âŒ æœªå®Ÿè£… | - |
| ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†API | ğŸŸ¡ éƒ¨åˆ†å®Ÿè£… | `/src/api/tenant-service-api.ts` |
| ãƒ—ãƒ©ãƒ³ç®¡ç†API | ğŸŸ¡ éƒ¨åˆ†å®Ÿè£… | `/src/api/tenant-service-api.ts` |
| AIç®¡ç†API | âŒ æœªå®Ÿè£… | - |
| ä½¿ç”¨é‡ç›£è¦–API | âŒ æœªå®Ÿè£… | - |
| ã‚¢ãƒ©ãƒ¼ãƒˆç®¡ç†API | âŒ æœªå®Ÿè£… | - |
| ãƒ­ã‚°ç®¡ç†API | âŒ æœªå®Ÿè£… | - |

**æ³¨è¨˜**: ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†APIã€ãƒ—ãƒ©ãƒ³ç®¡ç†APIã¯åŸºæœ¬çš„ãªCRUDæ“ä½œã®ã¿å®Ÿè£…æ¸ˆã¿ã€‚ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³å°‚ç”¨ã®æ©Ÿèƒ½ã¯æœªå®Ÿè£…ã€‚

---

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

| ãƒ†ãƒ¼ãƒ–ãƒ« | å®Ÿè£…çŠ¶æ³ | èª¬æ˜ |
|---------|---------|------|
| `tenants` | âœ… å®Ÿè£…æ¸ˆã¿ | ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆSSOTã§å®šç¾© |
| `system_plan_restrictions` | âœ… å®Ÿè£…æ¸ˆã¿ | ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆSSOTã§å®šç¾© |
| `tenant_system_plan` | âœ… å®Ÿè£…æ¸ˆã¿ | ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆSSOTã§å®šç¾© |
| `super_admin_users` | âŒ æœªå®Ÿè£… | æ–°è¦ä½œæˆå¿…è¦ |
| `tenant_usage_logs` | âŒ æœªå®Ÿè£… | æ–°è¦ä½œæˆå¿…è¦ |
| `ai_credit_transactions` | âŒ æœªå®Ÿè£… | æ–°è¦ä½œæˆå¿…è¦ |
| `system_alerts` | âŒ æœªå®Ÿè£… | æ–°è¦ä½œæˆå¿…è¦ |
| `super_admin_audit_logs` | âŒ æœªå®Ÿè£… | æ–°è¦ä½œæˆå¿…è¦ |
| `system_logs` | âŒ æœªå®Ÿè£… | æ–°è¦ä½œæˆå¿…è¦ |
| `server_logs` | âŒ æœªå®Ÿè£… | æ–°è¦ä½œæˆå¿…è¦ |
| `ai_prompts` | âŒ æœªå®Ÿè£… | æ–°è¦ä½œæˆå¿…è¦ |
| `ai_prompt_versions` | âŒ æœªå®Ÿè£… | æ–°è¦ä½œæˆå¿…è¦ |
| `exchange_rates` | âŒ æœªå®Ÿè£… | æ–°è¦ä½œæˆå¿…è¦ |
| `notification_templates` | âŒ æœªå®Ÿè£… | æ–°è¦ä½œæˆå¿…è¦ |
| `system_health_checks` | âŒ æœªå®Ÿè£… | æ–°è¦ä½œæˆå¿…è¦ |

---

## âœ… å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### Phase 1: å¿…é ˆæ©Ÿèƒ½ï¼ˆæœ€å„ªå…ˆï¼‰

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- [ ] `super_admin_users`ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] `tenant_usage_logs`ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] `ai_credit_transactions`ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] `system_alerts`ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] `super_admin_audit_logs`ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] `system_logs`ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] `server_logs`ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] `ai_prompts`ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] `ai_prompt_versions`ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] `exchange_rates`ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] `notification_templates`ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] `system_health_checks`ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ

#### hotel-common
- [ ] ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³èªè¨¼APIå®Ÿè£…
  - [ ] `POST /api/v1/super-admin/auth/login`
  - [ ] `POST /api/v1/super-admin/auth/logout`
  - [ ] `GET /api/v1/super-admin/auth/me`
- [ ] ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†APIå®Ÿè£…
  - [ ] `GET /api/v1/super-admin/tenants`
  - [ ] `GET /api/v1/super-admin/tenants/:id`
  - [ ] `POST /api/v1/super-admin/tenants`
  - [ ] `PUT /api/v1/super-admin/tenants/:id`
  - [ ] `DELETE /api/v1/super-admin/tenants/:id`
- [ ] ãƒ—ãƒ©ãƒ³ç®¡ç†APIå®Ÿè£…
  - [ ] `GET /api/v1/super-admin/plans`
  - [ ] `POST /api/v1/super-admin/plans`
  - [ ] `PUT /api/v1/super-admin/plans/:id`ï¼ˆå‹•çš„æ©Ÿèƒ½åˆ¶å¾¡å¯¾å¿œï¼‰
  - [ ] `GET /api/v1/super-admin/plans/:id/impact`ï¼ˆå½±éŸ¿ç¢ºèªï¼‰
  - [ ] `POST /api/v1/super-admin/tenants/:id/change-plan`
- [ ] ãƒ—ãƒ©ãƒ³å¤‰æ›´æ™‚ã®å½±éŸ¿ç¢ºèªãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
  - [ ] ãƒ‡ãƒã‚¤ã‚¹æ•°è¶…éãƒã‚§ãƒƒã‚¯
  - [ ] æ©Ÿèƒ½ç„¡åŠ¹åŒ–å½±éŸ¿ãƒã‚§ãƒƒã‚¯
  - [ ] ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è¶…éãƒã‚§ãƒƒã‚¯
- [ ] ãƒ—ãƒ©ãƒ³å¤‰æ›´æ™‚ã®è‡ªå‹•å‡¦ç†å®Ÿè£…
  - [ ] Redisã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
  - [ ] è¶…éãƒ‡ãƒã‚¤ã‚¹è‡ªå‹•ç„¡åŠ¹åŒ–
  - [ ] ãƒ†ãƒŠãƒ³ãƒˆé€šçŸ¥
- [ ] åŸºæœ¬çš„ãªä½¿ç”¨é‡ç›£è¦–APIå®Ÿè£…
  - [ ] `GET /api/v1/super-admin/usage/overview`
  - [ ] `GET /api/v1/super-admin/usage/:tenantId`
- [ ] AIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†APIå®Ÿè£… â­ **é‡è¦**
  - [ ] `GET /api/v1/super-admin/prompts`
  - [ ] `POST /api/v1/super-admin/prompts`
  - [ ] `PUT /api/v1/super-admin/prompts/:id`
  - [ ] `DELETE /api/v1/super-admin/prompts/:id`
  - [ ] `GET /api/v1/super-admin/prompts/:id/versions`
  - [ ] `POST /api/v1/super-admin/prompts/:id/rollback`
  - [ ] `POST /api/v1/super-admin/prompts/:id/preview`
- [ ] ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆç®¡ç†APIå®Ÿè£…
  - [ ] `GET /api/v1/super-admin/exchange-rates`
  - [ ] `POST /api/v1/super-admin/exchange-rates`
  - [ ] `PUT /api/v1/super-admin/exchange-rates/:id`
- [ ] é€šçŸ¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†APIå®Ÿè£…
  - [ ] `GET /api/v1/super-admin/notification-templates`
  - [ ] `POST /api/v1/super-admin/notification-templates`
  - [ ] `PUT /api/v1/super-admin/notification-templates/:id`
- [ ] ã‚·ã‚¹ãƒ†ãƒ ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯APIå®Ÿè£…
  - [ ] `GET /api/v1/super-admin/health`
  - [ ] `GET /api/v1/super-admin/health/history`

#### hotel-saas
- [ ] ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ãƒ‰ãƒŸãƒ³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆä½œæˆ
  - [ ] `/layouts/super-admin.vue`
  - [ ] `/components/SuperAdminSidebar.vue`
  - [ ] `/components/SuperAdminHeader.vue`
- [ ] èªè¨¼ç”»é¢å®Ÿè£…
  - [ ] `/pages/admin/super-admin/login.vue`
  - [ ] `useSuperAdmin` Composable
- [ ] ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰å®Ÿè£…
  - [ ] `/pages/admin/super-admin/dashboard/index.vue`
- [ ] ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†ç”»é¢å®Ÿè£…
  - [ ] `/pages/admin/super-admin/tenants/index.vue`
  - [ ] `/pages/admin/super-admin/tenants/[id].vue`
  - [ ] `/pages/admin/super-admin/tenants/create.vue`
  - [ ] `/pages/admin/super-admin/tenants/[id]/edit.vue`
- [ ] ãƒ—ãƒ©ãƒ³ç®¡ç†ç”»é¢å®Ÿè£…
  - [ ] `/pages/admin/super-admin/plans/index.vue`ï¼ˆãƒ—ãƒ©ãƒ³ä¸€è¦§ï¼‰
  - [ ] `/pages/admin/super-admin/plans/create.vue`ï¼ˆãƒ—ãƒ©ãƒ³ä½œæˆï¼‰
  - [ ] `/pages/admin/super-admin/plans/[id]/edit.vue`ï¼ˆãƒ—ãƒ©ãƒ³ç·¨é›†ãƒ»å‹•çš„æ©Ÿèƒ½åˆ¶å¾¡ï¼‰
  - [ ] ãƒ—ãƒ©ãƒ³ç·¨é›†ç”»é¢ã®å½±éŸ¿ç¢ºèªUIå®Ÿè£…
    - [ ] å¤‰æ›´å‰å¾Œã®æ¯”è¼ƒè¡¨ç¤º
    - [ ] å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ†ãƒŠãƒ³ãƒˆæ•°è¡¨ç¤º
    - [ ] è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
    - [ ] ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
- [ ] AIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†ç”»é¢å®Ÿè£… â­ **é‡è¦**
  - [ ] `/pages/admin/super-admin/prompts/index.vue`ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¸€è¦§ï¼‰
  - [ ] `/pages/admin/super-admin/prompts/create.vue`ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆï¼‰
  - [ ] `/pages/admin/super-admin/prompts/[id]/edit.vue`ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç·¨é›†ï¼‰
  - [ ] `/pages/admin/super-admin/prompts/[id]/preview.vue`ï¼ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰
  - [ ] `/pages/admin/super-admin/prompts/[id]/versions.vue`ï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´ï¼‰
- [ ] ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆç®¡ç†ç”»é¢å®Ÿè£…
  - [ ] `/pages/admin/super-admin/exchange-rates/index.vue`
- [ ] é€šçŸ¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†ç”»é¢å®Ÿè£…
  - [ ] `/pages/admin/super-admin/notification-templates/index.vue`
- [ ] ã‚·ã‚¹ãƒ†ãƒ ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ç”»é¢å®Ÿè£…
  - [ ] `/pages/admin/super-admin/health/index.vue`

---

### Phase 2: é‡è¦æ©Ÿèƒ½ï¼ˆé«˜å„ªå…ˆåº¦ï¼‰

#### hotel-common
- [ ] ãƒ—ãƒ©ãƒ³å¤‰æ›´ãƒ•ãƒ­ãƒ¼å®Ÿè£…ï¼ˆæ‹¡å¼µï¼‰
  - [ ] ä½¿ç”¨çŠ¶æ³ç¢ºèª
  - [ ] ãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰æ™‚ã®è­¦å‘Š
  - [ ] ãƒ†ãƒŠãƒ³ãƒˆé€šçŸ¥
  - [ ] ãƒ—ãƒ©ãƒ³å¤‰æ›´å±¥æ­´è¨˜éŒ²
- [ ] æ©Ÿèƒ½åˆ¶å¾¡ã®å‹•çš„é©ç”¨
  - [ ] ãƒ—ãƒ©ãƒ³å¤‰æ›´æ™‚ã®å³æ™‚åæ˜ 
  - [ ] æ©Ÿèƒ½ãƒ•ãƒ©ã‚°ã®æ¤œè¨¼ãƒ­ã‚¸ãƒƒã‚¯
  - [ ] åˆ¶é™å€¤è¶…éæ™‚ã®è‡ªå‹•å¯¾å¿œ
- [ ] ã‚¢ãƒ©ãƒ¼ãƒˆæ©Ÿèƒ½å®Ÿè£…
  - [ ] `GET /api/v1/super-admin/alerts`
  - [ ] `POST /api/v1/super-admin/alerts/:id/resolve`
  - [ ] ã‚¢ãƒ©ãƒ¼ãƒˆè‡ªå‹•ç”Ÿæˆ
- [ ] AIç®¡ç†ï¼ˆåŸºæœ¬ï¼‰å®Ÿè£…
  - [ ] `GET /api/v1/super-admin/ai/models`
  - [ ] `GET /api/v1/super-admin/ai/credits/:tenantId`
  - [ ] `POST /api/v1/super-admin/ai/credits/allocate`

#### hotel-saas
- [ ] ä½¿ç”¨é‡ç›£è¦–ç”»é¢å®Ÿè£…
  - [ ] `/pages/admin/super-admin/usage/index.vue`
  - [ ] `/pages/admin/super-admin/usage/[tenantId].vue`
- [ ] ã‚¢ãƒ©ãƒ¼ãƒˆç®¡ç†ç”»é¢å®Ÿè£…
  - [ ] `/pages/admin/super-admin/alerts/index.vue`
  - [ ] `/pages/admin/super-admin/alerts/[id].vue`
- [ ] ãƒ­ã‚°ç®¡ç†ç”»é¢å®Ÿè£…ï¼ˆåŸºæœ¬ï¼‰
  - [ ] `/pages/admin/super-admin/logs/system.vue`
  - [ ] `/pages/admin/super-admin/logs/server.vue`
- [ ] AIç®¡ç†ç”»é¢å®Ÿè£…ï¼ˆåŸºæœ¬ï¼‰
  - [ ] `/pages/admin/super-admin/ai/models/index.vue`
  - [ ] `/pages/admin/super-admin/ai/credits/index.vue`

---

### Phase 3: æ‹¡å¼µæ©Ÿèƒ½ï¼ˆä¸­å„ªå…ˆåº¦ï¼‰

#### hotel-common
- [ ] AIã‚¯ãƒ¬ã‚¸ãƒƒãƒˆç®¡ç†
  - [ ] æœˆæ¬¡è‡ªå‹•è£œå……
  - [ ] ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆæ¶ˆè²»å±¥æ­´
- [ ] è©³ç´°ãªä½¿ç”¨é‡åˆ†æ
  - [ ] ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ
  - [ ] ã‚³ã‚¹ãƒˆäºˆæ¸¬
- [ ] ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½
  - [ ] æœˆæ¬¡ãƒ¬ãƒãƒ¼ãƒˆ
  - [ ] å¹´æ¬¡ãƒ¬ãƒãƒ¼ãƒˆ
- [ ] ãƒ­ã‚°ç®¡ç†ï¼ˆæ‹¡å¼µï¼‰
  - [ ] ãƒ­ã‚°ä¿æŒæœŸé–“è¨­å®šAPI
  - [ ] ãƒ­ã‚°çµ±è¨ˆãƒ»åˆ†æAPI
  - [ ] ãƒ­ã‚°ã‚¢ãƒ©ãƒ¼ãƒˆé€£æº

#### hotel-saas
- [ ] AIä½¿ç”¨çµ±è¨ˆç”»é¢å®Ÿè£…
  - [ ] `/pages/admin/super-admin/ai/usage/index.vue`
- [ ] ãƒ­ã‚°ç®¡ç†ç”»é¢å®Ÿè£…ï¼ˆæ‹¡å¼µï¼‰
  - [ ] `/pages/admin/super-admin/logs/[id].vue` ï¼ˆãƒ­ã‚°è©³ç´°ï¼‰
  - [ ] ãƒ­ã‚°æ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿é«˜åº¦åŒ–
  - [ ] ãƒ­ã‚°çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- [ ] ã‚·ã‚¹ãƒ†ãƒ è¨­å®šç”»é¢å®Ÿè£…
  - [ ] `/pages/admin/super-admin/settings/index.vue`
  - [ ] `/pages/admin/super-admin/settings/security.vue`

---

### Phase 4: é«˜åº¦ãªæ©Ÿèƒ½ï¼ˆä½å„ªå…ˆåº¦ï¼‰

- [ ] äºˆæ¸¬åˆ†æ
- [ ] è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
- [ ] ã‚«ã‚¹ã‚¿ãƒ ã‚¢ãƒ©ãƒ¼ãƒˆ
- [ ] å¤šè¨€èªå¯¾å¿œ
- [ ] ãƒ†ãƒ¼ãƒã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

---

## ğŸ“š é–¢é€£SSOT

- [SSOT_SAAS_MULTITENANT.md](../00_foundation/SSOT_SAAS_MULTITENANT.md) - ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆåŸºç›¤ï¼ˆæŠ€è¡“çš„ä»•çµ„ã¿ï¼‰
- [SSOT_SAAS_ADMIN_AUTHENTICATION.md](../00_foundation/SSOT_SAAS_ADMIN_AUTHENTICATION.md) - ã‚¹ã‚¿ãƒƒãƒ•ãƒ­ã‚°ã‚¤ãƒ³èªè¨¼
- [SSOT_SAAS_DATABASE_SCHEMA.md](../00_foundation/SSOT_SAAS_DATABASE_SCHEMA.md) - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ
- [SSOT_PRODUCTION_PARITY_RULES.md](../00_foundation/SSOT_PRODUCTION_PARITY_RULES.md) - æœ¬ç•ªåŒç­‰ãƒ«ãƒ¼ãƒ«
- [SSOT_SAAS_PERMISSION_SYSTEM.md](../00_foundation/SSOT_SAAS_PERMISSION_SYSTEM.md) - æ¨©é™ç®¡ç†ï¼ˆä½œæˆäºˆå®šï¼‰
- [SSOT_SAAS_BILLING.md](./SSOT_SAAS_BILLING.md) - è«‹æ±‚ç®¡ç†ï¼ˆä½œæˆäºˆå®šï¼‰
- [SSOT_SAAS_AUDIT_LOG.md](./SSOT_SAAS_AUDIT_LOG.md) - ç›£æŸ»ãƒ­ã‚°ï¼ˆä½œæˆäºˆå®šï¼‰

---

## ğŸ”„ å¤‰æ›´å±¥æ­´

| ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | æ—¥ä»˜ | å¤‰æ›´å†…å®¹ | æ‹…å½“ |
|-----------|------|---------|------|
| 1.0.0 | 2025-10-7 | åˆç‰ˆä½œæˆ | Iza |
| 1.1.0 | 2025-10-7 | ãƒ­ã‚°ç®¡ç†æ©Ÿèƒ½ã‚’è¿½åŠ ï¼ˆã‚¢ãƒ©ãƒ¼ãƒˆç®¡ç†ã¨åˆ†é›¢ï¼‰ | Iza |
| 1.2.0 | 2025-10-7 | ãƒ—ãƒ©ãƒ³åˆ¥æ©Ÿèƒ½åˆ¶å¾¡ã®å‹•çš„è¨­å®šæ©Ÿèƒ½ã‚’è¿½åŠ ï¼ˆæ–™é‡‘ãƒ»æ•°å€¤åˆ¶é™ãƒ»æ©Ÿèƒ½ãƒ•ãƒ©ã‚°ã®å‹•çš„å¤‰æ›´ã€å½±éŸ¿ç¢ºèªAPIã€å³æ™‚åæ˜ ï¼‰ | Iza |
| 2.0.0 | 2025-10-7 | é‡è¦æ©Ÿèƒ½ã‚’å¤§å¹…è¿½åŠ ï¼šAIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†ï¼ˆã‚·ã‚¹ãƒ†ãƒ /æ¥­æ…‹/è¨€èª/æ©Ÿèƒ½åˆ¥ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ï¼‰ã€ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“è¨­å®šã€ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆç®¡ç†ã€é€šçŸ¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†ã€ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©å…ƒã€ç›£æŸ»ãƒ­ã‚°é–²è¦§ã€ã‚·ã‚¹ãƒ†ãƒ ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ | Iza |
| 2.0.1 | 2025-10-7 | å“è³ªãƒã‚§ãƒƒã‚¯ï¼šPrismaã‚¹ã‚­ãƒ¼ãƒã®`@default()`ã‚’`uuid()`ã«çµ±ä¸€ï¼ˆæ—¢å­˜ã‚¹ã‚­ãƒ¼ãƒã¨ã®æ•´åˆæ€§ï¼‰ | Iza |

---

**æœ€çµ‚æ›´æ–°**: 2025å¹´10æœˆ7æ—¥  
**ä½œæˆè€…**: AI Assistant (Iza - çµ±åˆç®¡ç†è€…)  
**æ‰¿èªè€…**: Izaï¼ˆçµ±åˆç®¡ç†è€…ï¼‰

---

**ã“ã®SSOTã¯ã€æ—¢å­˜ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆSSOT_SAAS_SUPER_ADMIN_MEMO.mdï¼‰ã¨å®Ÿè£…çŠ¶æ³ã‚’åŸºã«ä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚**  
**æƒ³åƒã‚„æ¨æ¸¬ã«ã‚ˆã‚‹è¨˜è¼‰ã¯ä¸€åˆ‡å«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚**
