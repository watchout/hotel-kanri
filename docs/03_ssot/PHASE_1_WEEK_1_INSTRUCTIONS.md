# ğŸ“‹ Phase 1 Week 1: æ¨©é™ãƒ»ãƒ¡ãƒ‡ã‚£ã‚¢åŸºç›¤ å®Ÿè£…æŒ‡ç¤ºæ›¸

**æœŸé–“**: 2025-10-15 ã€œ 10-21ï¼ˆ7æ—¥é–“ï¼‰  
**ç›®æ¨™**: æ¨©é™ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã¨ãƒ¡ãƒ‡ã‚£ã‚¢ç®¡ç†åŸºç›¤ã®å®Œæˆ  
**å„ªå…ˆåº¦**: ğŸ”´ **æœ€å„ªå…ˆ**ï¼ˆå…¨ç®¡ç†æ©Ÿèƒ½ã®å‰ææ¡ä»¶ï¼‰  
**æ‹…å½“**: Izaï¼ˆæ¨©é™ãƒ»ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆï¼‰ã€Sunï¼ˆãƒ¡ãƒ‡ã‚£ã‚¢ç®¡ç†ï¼‰

---

## ğŸ“– å¿…èª­ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### å…¨ã‚¿ã‚¹ã‚¯å…±é€š
1. **SSOT_PROGRESS_MASTER.md**
   - ãƒ‘ã‚¹: `/Users/kaneko/hotel-kanri/docs/03_ssot/SSOT_PROGRESS_MASTER.md`
   - Phase 1ã®å…¨ä½“åƒã¨ã‚¿ã‚¹ã‚¯ä¾å­˜é–¢ä¿‚

2. **Phase 0å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ**
   - ãƒ‘ã‚¹: `/Users/kaneko/hotel-kanri/docs/03_ssot/PHASE_0_COMPLETION_REPORT.md`
   - å‰ãƒ•ã‚§ãƒ¼ã‚ºã®æˆæœã¨æ•™è¨“

### ã‚¿ã‚¹ã‚¯åˆ¥å¿…èª­SSOT
- **Task 1 (PERMISSION_SYSTEM)**: SSOTæœªä½œæˆ â†’ **å…ˆã«ä½œæˆãŒå¿…è¦**
- **Task 2 (MULTITENANT)**: `SSOT_SAAS_MULTITENANT.md` (v1.5.0)
- **Task 3-4 (MEDIA_MANAGEMENT)**: SSOTæœªä½œæˆ â†’ **å…ˆã«ä½œæˆãŒå¿…è¦**

---

## ğŸ¯ Week 1 ã‚¿ã‚¹ã‚¯ä¸€è¦§

| # | é …ç›® | ç¨®åˆ¥ | æ‹…å½“ | å·¥æ•° | ä¾å­˜é–¢ä¿‚ | çŠ¶æ…‹ |
|:-:|:-----|:----:|:----:|:----:|:---------|:----:|
| **1** | **PERMISSION_SYSTEM** | SSOT+å®Ÿè£… | Iza | 4æ—¥ | ãªã—ï¼ˆæœ€å„ªå…ˆï¼‰ | âŒ |
| **2** | MULTITENANT v1.6.0 | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ— | Iza | 1æ—¥ | Task 1å®Œäº†å¾Œ | âŒ |
| **3** | MEDIA_MANAGEMENT | SSOTä½œæˆ | Sun | 2æ—¥ | Task 1ã¨ä¸¦è¡Œå¯ | âŒ |
| **4** | MEDIA_MANAGEMENT | å®Ÿè£… | Sun | 3æ—¥ | Task 3å®Œäº†å¾Œ | âŒ |

**Week 1 é€²æ—**: 0/4 (0.0%)

---

## ğŸ”´ Task 1: PERMISSION_SYSTEMï¼ˆæ¨©é™ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼‰å®Ÿè£…

**æ‹…å½“**: Iza  
**å·¥æ•°**: 4æ—¥é–“  
**å„ªå…ˆåº¦**: ğŸ”´ **æœ€å„ªå…ˆ**ï¼ˆå…¨ç®¡ç†æ©Ÿèƒ½ã®å‰ææ¡ä»¶ï¼‰  
**é‡è¦æ€§**: ã“ã®ã‚·ã‚¹ãƒ†ãƒ ãŒå®Œæˆã—ãªã„ã¨ã€Phase 1 Week 2ä»¥é™ã®å…¨ã¦ã®ç®¡ç†æ©Ÿèƒ½ãŒå®Ÿè£…ã§ãã¾ã›ã‚“

### ğŸ“‹ å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—

#### Step 1: SSOTä½œæˆï¼ˆDay 1 åˆå‰ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `/Users/kaneko/hotel-kanri/docs/03_ssot/01_admin_features/SSOT_PERMISSION_SYSTEM.md`

**å¿…é ˆé …ç›®**:

```markdown
# SSOT: æ¨©é™ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆPermission Systemï¼‰

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0  
**ä½œæˆæ—¥**: 2025-10-15  
**æœ€çµ‚æ›´æ–°**: 2025-10-15  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ğŸŸ¢ ç­–å®šå®Œäº†  
**å®Ÿè£…çŠ¶æ³**: hotel-saas v0.0 / hotel-common v0.0

## ğŸ“‹ æ¦‚è¦

### ç›®çš„
- ç®¡ç†è€…ã®æ¨©é™ã‚’ä¸€å…ƒç®¡ç†
- ç”»é¢ãƒ»æ©Ÿèƒ½å˜ä½ã§ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- ãƒ­ãƒ¼ãƒ«ï¼ˆå½¹å‰²ï¼‰ãƒ™ãƒ¼ã‚¹ã®æ¨©é™ç®¡ç†

### ã‚¹ã‚³ãƒ¼ãƒ—
- âœ… ãƒ­ãƒ¼ãƒ«å®šç¾©ï¼ˆã‚ªãƒ¼ãƒŠãƒ¼ã€ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã€ã‚¹ã‚¿ãƒƒãƒ•ç­‰ï¼‰
- âœ… æ¨©é™å®šç¾©ï¼ˆç”»é¢ãƒ»æ©Ÿèƒ½å˜ä½ï¼‰
- âœ… ãƒ­ãƒ¼ãƒ«-æ¨©é™ã®ãƒãƒƒãƒ”ãƒ³ã‚°
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼-ãƒ­ãƒ¼ãƒ«ã®ãƒãƒƒãƒ”ãƒ³ã‚°
- âœ… æ¨©é™ãƒã‚§ãƒƒã‚¯ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
- âœ… æ¨©é™ãƒã‚§ãƒƒã‚¯Composable
- âŒ å‹•çš„æ¨©é™ï¼ˆPhase 3ä»¥é™ï¼‰
- âŒ çµ„ç¹”éšå±¤æ¨©é™ï¼ˆPhase 3ä»¥é™ï¼‰

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹æˆ

#### 1. rolesï¼ˆãƒ­ãƒ¼ãƒ«ï¼‰
```prisma
model Role {
  id          String   @id @default(uuid()) @map("role_id")
  tenantId    String   @map("tenant_id")
  name        String   // "ã‚ªãƒ¼ãƒŠãƒ¼"ã€"ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼"ã€"ã‚¹ã‚¿ãƒƒãƒ•"
  code        String   // "OWNER"ã€"MANAGER"ã€"STAFF"
  description String?
  priority    Int      // å„ªå…ˆåº¦ï¼ˆæ•°å€¤ãŒå¤§ãã„ã»ã©æ¨©é™å¼·ã„ï¼‰
  isSystem    Boolean  @default(false) @map("is_system") // ã‚·ã‚¹ãƒ†ãƒ ãƒ­ãƒ¼ãƒ«
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  permissions RolePermission[]
  users       UserRole[]

  @@unique([tenantId, code])
  @@map("roles")
}
```

#### 2. permissionsï¼ˆæ¨©é™ï¼‰
```prisma
model Permission {
  id          String   @id @default(uuid()) @map("permission_id")
  name        String   // "æ³¨æ–‡ç®¡ç†"ã€"ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç®¡ç†"
  code        String   @unique // "ORDER_MANAGE"ã€"MENU_MANAGE"
  category    String   // "ORDER"ã€"MENU"ã€"ROOM"ã€"STAFF"
  description String?
  isSystem    Boolean  @default(true) @map("is_system")
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  roles       RolePermission[]

  @@map("permissions")
}
```

#### 3. role_permissionsï¼ˆãƒ­ãƒ¼ãƒ«-æ¨©é™ãƒãƒƒãƒ”ãƒ³ã‚°ï¼‰
```prisma
model RolePermission {
  roleId       String   @map("role_id")
  permissionId String   @map("permission_id")
  createdAt    DateTime @default(now()) @map("created_at")

  role         Role       @relation(fields: [roleId], references: [id], onDelete: Cascade)
  permission   Permission @relation(fields: [permissionId], references: [id], onDelete: Cascade)

  @@id([roleId, permissionId])
  @@map("role_permissions")
}
```

#### 4. user_rolesï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼-ãƒ­ãƒ¼ãƒ«ãƒãƒƒãƒ”ãƒ³ã‚°ï¼‰
```prisma
model UserRole {
  userId    String   @map("user_id")
  roleId    String   @map("role_id")
  tenantId  String   @map("tenant_id")
  createdAt DateTime @default(now()) @map("created_at")

  role      Role @relation(fields: [roleId], references: [id], onDelete: Cascade)

  @@id([userId, roleId])
  @@map("user_roles")
}
```

### ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é †åº
1. `permissions` ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
2. `roles` ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
3. `role_permissions` ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
4. `user_roles` ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
5. ã‚·ã‚¹ãƒ†ãƒ æ¨©é™ãƒ»ãƒ­ãƒ¼ãƒ«ã®åˆæœŸãƒ‡ãƒ¼ã‚¿æŠ•å…¥

## ğŸ”§ APIè¨­è¨ˆ

### hotel-common API

#### 1. æ¨©é™ãƒã‚§ãƒƒã‚¯API
```typescript
GET /api/v1/permissions/check
Query: { tenantId, userId, permissionCode }
Response: { hasPermission: boolean }
```

#### 2. ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™ä¸€è¦§å–å¾—
```typescript
GET /api/v1/permissions/user/:userId
Query: { tenantId }
Response: { permissions: Permission[], roles: Role[] }
```

#### 3. ãƒ­ãƒ¼ãƒ«ä¸€è¦§å–å¾—
```typescript
GET /api/v1/roles
Query: { tenantId }
Response: { roles: Role[] }
```

#### 4. ãƒ­ãƒ¼ãƒ«ä½œæˆ
```typescript
POST /api/v1/roles
Body: { tenantId, name, code, description, priority, permissionIds }
Response: { role: Role }
```

#### 5. ãƒ­ãƒ¼ãƒ«-æ¨©é™æ›´æ–°
```typescript
PUT /api/v1/roles/:roleId/permissions
Body: { permissionIds: string[] }
Response: { success: boolean }
```

#### 6. ãƒ¦ãƒ¼ã‚¶ãƒ¼-ãƒ­ãƒ¼ãƒ«å‰²ã‚Šå½“ã¦
```typescript
POST /api/v1/users/:userId/roles
Body: { tenantId, roleIds: string[] }
Response: { success: boolean }
```

### hotel-saas APIï¼ˆãƒ—ãƒ­ã‚­ã‚·ï¼‰

å…¨ã¦hotel-common APIã‚’å‘¼ã³å‡ºã™ãƒ—ãƒ­ã‚­ã‚·ã¨ã—ã¦å®Ÿè£…ã€‚

## ğŸ¨ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¨­è¨ˆ

### Composable: `usePermissions()`

```typescript
// composables/usePermissions.ts
export const usePermissions = () => {
  const hasPermission = async (permissionCode: string): Promise<boolean> => {
    // ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‹ã‚‰ãƒ†ãƒŠãƒ³ãƒˆIDãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’å–å¾—
    // hotel-common APIã§æ¨©é™ãƒã‚§ãƒƒã‚¯
  };

  const hasAnyPermission = async (permissionCodes: string[]): Promise<boolean> => {
    // ã„ãšã‚Œã‹ã®æ¨©é™ã‚’æŒã£ã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
  };

  const hasAllPermissions = async (permissionCodes: string[]): Promise<boolean> => {
    // å…¨ã¦ã®æ¨©é™ã‚’æŒã£ã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
  };

  return { hasPermission, hasAnyPermission, hasAllPermissions };
};
```

### Middleware: `permission.ts`

```typescript
// middleware/permission.ts
export default defineNuxtRouteMiddleware(async (to, from) => {
  const requiredPermission = to.meta.permission as string | undefined;
  
  if (!requiredPermission) {
    return; // æ¨©é™ä¸è¦ãªãƒšãƒ¼ã‚¸
  }

  const { hasPermission } = usePermissions();
  const allowed = await hasPermission(requiredPermission);

  if (!allowed) {
    return navigateTo('/admin/forbidden');
  }
});
```

### ãƒšãƒ¼ã‚¸å®šç¾©ä¾‹

```vue
<script setup lang="ts">
definePageMeta({
  middleware: ['auth', 'permission'],
  permission: 'ORDER_MANAGE' // å¿…è¦ãªæ¨©é™
});
</script>
```

## ğŸ“Š åˆæœŸãƒ‡ãƒ¼ã‚¿

### ã‚·ã‚¹ãƒ†ãƒ æ¨©é™
- ORDER_VIEW: æ³¨æ–‡é–²è¦§
- ORDER_MANAGE: æ³¨æ–‡ç®¡ç†
- MENU_VIEW: ãƒ¡ãƒ‹ãƒ¥ãƒ¼é–²è¦§
- MENU_MANAGE: ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç®¡ç†
- ROOM_VIEW: å®¢å®¤é–²è¦§
- ROOM_MANAGE: å®¢å®¤ç®¡ç†
- STAFF_VIEW: ã‚¹ã‚¿ãƒƒãƒ•é–²è¦§
- STAFF_MANAGE: ã‚¹ã‚¿ãƒƒãƒ•ç®¡ç†
- SYSTEM_MANAGE: ã‚·ã‚¹ãƒ†ãƒ è¨­å®šç®¡ç†

### ã‚·ã‚¹ãƒ†ãƒ ãƒ­ãƒ¼ãƒ«
- OWNER: ã‚ªãƒ¼ãƒŠãƒ¼ï¼ˆå…¨æ¨©é™ï¼‰
- MANAGER: ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ï¼ˆSYSTEM_MANAGEä»¥å¤–ï¼‰
- STAFF: ã‚¹ã‚¿ãƒƒãƒ•ï¼ˆVIEWç³»ã®ã¿ï¼‰

## âš ï¸ åˆ¶ç´„äº‹é …

1. **ãƒ†ãƒŠãƒ³ãƒˆåˆ†é›¢å¿…é ˆ**: å…¨ã¦ã®ãƒ­ãƒ¼ãƒ«ãƒ»æ¨©é™ã¯ãƒ†ãƒŠãƒ³ãƒˆIDã§åˆ†é›¢
2. **ã‚·ã‚¹ãƒ†ãƒ ãƒ­ãƒ¼ãƒ«ä¿è­·**: isSystem=trueã®ãƒ­ãƒ¼ãƒ«ã¯å‰Šé™¤ãƒ»ç·¨é›†ä¸å¯
3. **æ¨©é™ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™ã¯5åˆ†é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆRedisï¼‰
4. **å„ªå…ˆåº¦ç®¡ç†**: ãƒ­ãƒ¼ãƒ«ã®priorityã§æ¨©é™ã®å¼·ã•ã‚’ç®¡ç†
```

---

#### Step 2: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å®Ÿè£…ï¼ˆDay 1 åˆå¾Œ ã€œ Day 2 åˆå‰ï¼‰

**æ‹…å½“ã‚·ã‚¹ãƒ†ãƒ **: hotel-common

##### 2-1. Prismaã‚¹ã‚­ãƒ¼ãƒæ›´æ–°

**ãƒ•ã‚¡ã‚¤ãƒ«**: `/Users/kaneko/hotel-common/prisma/schema.prisma`

**è¿½åŠ å†…å®¹**:
- SSOTã®4ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©ã‚’è¿½åŠ 
- `@@map`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã§snake_caseæŒ‡å®šå¿…é ˆ
- ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š

##### 2-2. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ

```bash
cd /Users/kaneko/hotel-common
npx prisma migrate dev --name add_permission_system
```

##### 2-3. åˆæœŸãƒ‡ãƒ¼ã‚¿æŠ•å…¥

**ãƒ•ã‚¡ã‚¤ãƒ«**: `/Users/kaneko/hotel-common/prisma/seeds/permissions.ts`

```typescript
// ã‚·ã‚¹ãƒ†ãƒ æ¨©é™ã®æŠ•å…¥
const permissions = [
  { name: 'æ³¨æ–‡é–²è¦§', code: 'ORDER_VIEW', category: 'ORDER' },
  { name: 'æ³¨æ–‡ç®¡ç†', code: 'ORDER_MANAGE', category: 'ORDER' },
  // ... ä»–ã®æ¨©é™
];

// ã‚·ã‚¹ãƒ†ãƒ ãƒ­ãƒ¼ãƒ«ã®æŠ•å…¥
const roles = [
  { name: 'ã‚ªãƒ¼ãƒŠãƒ¼', code: 'OWNER', priority: 100, isSystem: true },
  { name: 'ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼', code: 'MANAGER', priority: 50, isSystem: true },
  { name: 'ã‚¹ã‚¿ãƒƒãƒ•', code: 'STAFF', priority: 10, isSystem: true },
];

// ãƒ­ãƒ¼ãƒ«-æ¨©é™ã®ãƒãƒƒãƒ”ãƒ³ã‚°
```

---

#### Step 3: hotel-common APIå®Ÿè£…ï¼ˆDay 2 åˆå¾Œ ã€œ Day 3ï¼‰

##### 3-1. æ¨©é™ãƒã‚§ãƒƒã‚¯ã‚µãƒ¼ãƒ“ã‚¹

**ãƒ•ã‚¡ã‚¤ãƒ«**: `/Users/kaneko/hotel-common/src/services/permission.service.ts`

```typescript
export class PermissionService {
  async checkPermission(
    tenantId: string,
    userId: string,
    permissionCode: string
  ): Promise<boolean> {
    // 1. ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç¢ºèªï¼ˆRedisï¼‰
    // 2. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ­ãƒ¼ãƒ«å–å¾—
    // 3. ãƒ­ãƒ¼ãƒ«ã®æ¨©é™å–å¾—
    // 4. æ¨©é™ã‚³ãƒ¼ãƒ‰ç…§åˆ
    // 5. ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä¿å­˜
  }

  async getUserPermissions(
    tenantId: string,
    userId: string
  ): Promise<{ permissions: Permission[], roles: Role[] }> {
    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¨æ¨©é™ãƒ»ãƒ­ãƒ¼ãƒ«å–å¾—
  }
}
```

##### 3-2. API Routeså®Ÿè£…

**ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª**: `/Users/kaneko/hotel-common/src/routes/permissions/`

å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«:
- `check.get.ts` - æ¨©é™ãƒã‚§ãƒƒã‚¯
- `user-permissions.get.ts` - ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™ä¸€è¦§
- `roles.get.ts` - ãƒ­ãƒ¼ãƒ«ä¸€è¦§
- `roles.post.ts` - ãƒ­ãƒ¼ãƒ«ä½œæˆ
- `role-permissions.put.ts` - ãƒ­ãƒ¼ãƒ«-æ¨©é™æ›´æ–°
- `user-roles.post.ts` - ãƒ¦ãƒ¼ã‚¶ãƒ¼-ãƒ­ãƒ¼ãƒ«å‰²ã‚Šå½“ã¦

**å…¨APIã§å¿…é ˆ**:
- âœ… ãƒ†ãƒŠãƒ³ãƒˆIDæ¤œè¨¼
- âœ… èªè¨¼ãƒã‚§ãƒƒã‚¯ï¼ˆSessionï¼‰
- âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- âœ… ãƒ­ã‚°å‡ºåŠ›

---

#### Step 4: hotel-saaså®Ÿè£…ï¼ˆDay 4ï¼‰

##### 4-1. Composableå®Ÿè£…

**ãƒ•ã‚¡ã‚¤ãƒ«**: `/Users/kaneko/hotel-saas/composables/usePermissions.ts`

```typescript
export const usePermissions = () => {
  const hasPermission = async (permissionCode: string): Promise<boolean> => {
    try {
      const { data } = await $fetch('/api/v1/permissions/check', {
        params: { permissionCode }
      });
      return data.hasPermission;
    } catch (error) {
      console.error('æ¨©é™ãƒã‚§ãƒƒã‚¯ã‚¨ãƒ©ãƒ¼:', error);
      return false;
    }
  };

  // ... ä»–ã®ãƒ¡ã‚½ãƒƒãƒ‰
};
```

##### 4-2. Middlewareå®Ÿè£…

**ãƒ•ã‚¡ã‚¤ãƒ«**: `/Users/kaneko/hotel-saas/middleware/permission.ts`

```typescript
export default defineNuxtRouteMiddleware(async (to, from) => {
  const requiredPermission = to.meta.permission as string | undefined;
  
  if (!requiredPermission) {
    return;
  }

  const { hasPermission } = usePermissions();
  const allowed = await hasPermission(requiredPermission);

  if (!allowed) {
    return navigateTo('/admin/forbidden');
  }
});
```

##### 4-3. ç®¡ç†ç”»é¢ã¸ã®é©ç”¨

**å¯¾è±¡ãƒšãƒ¼ã‚¸**:
- `/pages/admin/orders/**` â†’ `permission: 'ORDER_MANAGE'`
- `/pages/admin/menu/**` â†’ `permission: 'MENU_MANAGE'`
- `/pages/admin/rooms/**` â†’ `permission: 'ROOM_MANAGE'`
- `/pages/admin/staff/**` â†’ `permission: 'STAFF_MANAGE'`
- `/pages/admin/system/**` â†’ `permission: 'SYSTEM_MANAGE'`

**å„ãƒšãƒ¼ã‚¸ã«è¿½åŠ **:
```vue
<script setup lang="ts">
definePageMeta({
  middleware: ['auth', 'permission'],
  permission: 'ORDER_MANAGE' // é©åˆ‡ãªæ¨©é™ã‚³ãƒ¼ãƒ‰
});
</script>
```

##### 4-4. æ¨©é™ç®¡ç†ç”»é¢ä½œæˆ

**ãƒ•ã‚¡ã‚¤ãƒ«**: `/Users/kaneko/hotel-saas/pages/admin/system/permissions.vue`

**æ©Ÿèƒ½**:
- ãƒ­ãƒ¼ãƒ«ä¸€è¦§è¡¨ç¤º
- ãƒ­ãƒ¼ãƒ«ä½œæˆãƒ»ç·¨é›†
- ãƒ­ãƒ¼ãƒ«-æ¨©é™ãƒãƒƒãƒ”ãƒ³ã‚°ç·¨é›†
- ã‚¹ã‚¿ãƒƒãƒ•ã¸ã®ãƒ­ãƒ¼ãƒ«å‰²ã‚Šå½“ã¦

---

#### Step 5: ãƒ†ã‚¹ãƒˆãƒ»æ¤œè¨¼ï¼ˆDay 4 åˆå¾Œï¼‰

##### 5-1. å˜ä½“ãƒ†ã‚¹ãƒˆ

```bash
# hotel-common
cd /Users/kaneko/hotel-common
npm run test -- src/services/permission.service.test.ts

# hotel-saas
cd /Users/kaneko/hotel-saas
npm run test -- composables/usePermissions.test.ts
```

##### 5-2. çµ±åˆãƒ†ã‚¹ãƒˆ

**ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª**:
1. ã‚ªãƒ¼ãƒŠãƒ¼ãƒ­ãƒ¼ãƒ«ã¯å…¨æ¨©é™ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
2. ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ­ãƒ¼ãƒ«ã¯SYSTEM_MANAGEä»¥å¤–ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
3. ã‚¹ã‚¿ãƒƒãƒ•ãƒ­ãƒ¼ãƒ«ã¯VIEWç³»ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
4. æ¨©é™ãªã—ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯403ã‚¨ãƒ©ãƒ¼

##### 5-3. å‹•ä½œç¢ºèª

```bash
# hotel-commonèµ·å‹•
cd /Users/kaneko/hotel-common
npm run dev

# hotel-saasèµ·å‹•
cd /Users/kaneko/hotel-saas
npm run dev
```

**ç¢ºèªé …ç›®**:
- [ ] ãƒ­ãƒ¼ãƒ«ä½œæˆãƒ»ç·¨é›†ãŒæ­£å¸¸å‹•ä½œ
- [ ] æ¨©é™ãƒã‚§ãƒƒã‚¯ãŒæ­£å¸¸å‹•ä½œ
- [ ] ãƒšãƒ¼ã‚¸ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ãŒæ­£å¸¸å‹•ä½œ
- [ ] ãƒ†ãƒŠãƒ³ãƒˆåˆ†é›¢ãŒæ­£å¸¸å‹•ä½œ
- [ ] ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒæ­£å¸¸å‹•ä½œ

---

### Task 1 å®Œäº†æ¡ä»¶

- [ ] SSOTä½œæˆå®Œäº†ï¼ˆv1.0.0ï¼‰
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆå®Œäº†
- [ ] åˆæœŸãƒ‡ãƒ¼ã‚¿æŠ•å…¥å®Œäº†
- [ ] hotel-common APIå®Ÿè£…å®Œäº†
- [ ] hotel-saas Composable/Middlewareå®Ÿè£…å®Œäº†
- [ ] æ¨©é™ç®¡ç†ç”»é¢ä½œæˆå®Œäº†
- [ ] **å˜ä½“ãƒ†ã‚¹ãƒˆå®Œäº†**ï¼ˆ15ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹å…¨åˆæ ¼ï¼‰
- [ ] **ãƒ–ãƒ©ã‚¦ã‚¶ç›®è¦–ãƒ†ã‚¹ãƒˆå®Œäº†**ï¼ˆ10ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹å…¨åˆæ ¼ï¼‰ â† NEW!
- [ ] å‹•ä½œç¢ºèªå®Œäº†
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°å®Œäº†

**ğŸ“‹ ãƒ–ãƒ©ã‚¦ã‚¶ç›®è¦–ãƒ†ã‚¹ãƒˆé …ç›®**: `/Users/kaneko/hotel-kanri/docs/03_ssot/PERMISSION_SYSTEM_BROWSER_TEST.md`

---

## ğŸŸ¡ Task 2: MULTITENANT v1.6.0 ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—

**æ‹…å½“**: Iza  
**å·¥æ•°**: 1æ—¥é–“  
**ä¾å­˜**: Task 1å®Œäº†å¾Œã«ç€æ‰‹  
**ç›®çš„**: æ¨©é™ã‚·ã‚¹ãƒ†ãƒ çµ±åˆã€ãƒ†ãƒŠãƒ³ãƒˆç®¡ç†å¼·åŒ–

### ğŸ“‹ å®Ÿè£…å†…å®¹

#### 2-1. SSOTæ›´æ–°

**ãƒ•ã‚¡ã‚¤ãƒ«**: `/Users/kaneko/hotel-kanri/docs/03_ssot/00_foundation/SSOT_SAAS_MULTITENANT.md`

**å¤‰æ›´å†…å®¹**:
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³: v1.5.0 â†’ **v1.6.0**
- è¿½åŠ æ©Ÿèƒ½: æ¨©é™ã‚·ã‚¹ãƒ†ãƒ ã¨ã®çµ±åˆ
- ãƒ†ãƒŠãƒ³ãƒˆä½œæˆæ™‚ã«è‡ªå‹•çš„ã«ã‚·ã‚¹ãƒ†ãƒ ãƒ­ãƒ¼ãƒ«ä½œæˆ
- ãƒ†ãƒŠãƒ³ãƒˆå‰Šé™¤æ™‚ã«ãƒ­ãƒ¼ãƒ«ãƒ»æ¨©é™ã‚‚å‰Šé™¤

#### 2-2. hotel-commonå®Ÿè£…

**ãƒ•ã‚¡ã‚¤ãƒ«**: `/Users/kaneko/hotel-common/src/services/tenant.service.ts`

```typescript
export class TenantService {
  async createTenant(data: CreateTenantDto): Promise<Tenant> {
    // 1. ãƒ†ãƒŠãƒ³ãƒˆä½œæˆ
    const tenant = await prisma.tenant.create({ data });
    
    // 2. ã‚·ã‚¹ãƒ†ãƒ ãƒ­ãƒ¼ãƒ«è‡ªå‹•ä½œæˆï¼ˆNEWï¼‰
    await this.createSystemRoles(tenant.id);
    
    // 3. åˆæœŸç®¡ç†è€…ã«ã‚ªãƒ¼ãƒŠãƒ¼ãƒ­ãƒ¼ãƒ«å‰²ã‚Šå½“ã¦ï¼ˆNEWï¼‰
    await this.assignOwnerRole(tenant.id, data.adminUserId);
    
    return tenant;
  }

  async deleteTenant(tenantId: string): Promise<void> {
    // 1. ãƒ­ãƒ¼ãƒ«ãƒ»æ¨©é™å‰Šé™¤ï¼ˆNEWï¼‰
    await prisma.role.deleteMany({ where: { tenantId } });
    
    // 2. ãƒ†ãƒŠãƒ³ãƒˆå‰Šé™¤
    await prisma.tenant.delete({ where: { id: tenantId } });
  }

  private async createSystemRoles(tenantId: string): Promise<void> {
    // ã‚ªãƒ¼ãƒŠãƒ¼ã€ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã€ã‚¹ã‚¿ãƒƒãƒ•ãƒ­ãƒ¼ãƒ«ã‚’ä½œæˆ
  }
}
```

#### 2-3. ãƒ†ã‚¹ãƒˆ

**ç¢ºèªé …ç›®**:
- [ ] ãƒ†ãƒŠãƒ³ãƒˆä½œæˆæ™‚ã«ã‚·ã‚¹ãƒ†ãƒ ãƒ­ãƒ¼ãƒ«è‡ªå‹•ä½œæˆ
- [ ] ãƒ†ãƒŠãƒ³ãƒˆå‰Šé™¤æ™‚ã«ãƒ­ãƒ¼ãƒ«ãƒ»æ¨©é™ã‚‚å‰Šé™¤
- [ ] åˆæœŸç®¡ç†è€…ã«ã‚ªãƒ¼ãƒŠãƒ¼ãƒ­ãƒ¼ãƒ«å‰²ã‚Šå½“ã¦

### Task 2 å®Œäº†æ¡ä»¶

- [ ] SSOTæ›´æ–°å®Œäº†ï¼ˆv1.6.0ï¼‰
- [ ] hotel-commonå®Ÿè£…å®Œäº†
- [ ] hotel-saaså®Ÿè£…å®Œäº†ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
- [ ] ãƒ†ã‚¹ãƒˆå®Œäº†
- [ ] å‹•ä½œç¢ºèªå®Œäº†

---

## ğŸŸ¡ Task 3: MEDIA_MANAGEMENT SSOTä½œæˆ

**æ‹…å½“**: Sun  
**å·¥æ•°**: 2æ—¥é–“  
**ä¾å­˜**: Task 1ã¨ä¸¦è¡Œä½œæ¥­å¯èƒ½  
**ç›®çš„**: ç”»åƒãƒ»å‹•ç”»ç®¡ç†ã®ä»•æ§˜ç­–å®š

### ğŸ“‹ ä½œæˆå†…å®¹

#### 3-1. SSOTä½œæˆ

**ãƒ•ã‚¡ã‚¤ãƒ«**: `/Users/kaneko/hotel-kanri/docs/03_ssot/01_admin_features/SSOT_MEDIA_MANAGEMENT.md`

**å¿…é ˆé …ç›®**:

```markdown
# SSOT: ãƒ¡ãƒ‡ã‚£ã‚¢ç®¡ç†ï¼ˆMedia Managementï¼‰

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0  
**ä½œæˆæ—¥**: 2025-10-XX  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ğŸŸ¢ ç­–å®šå®Œäº†  
**å®Ÿè£…çŠ¶æ³**: hotel-saas v0.0 / hotel-common v0.0

## ğŸ“‹ æ¦‚è¦

### ç›®çš„
- ç”»åƒãƒ»å‹•ç”»ã®ä¸€å…ƒç®¡ç†
- ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”»åƒã€ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ç”»åƒç­‰ã®ç®¡ç†
- AIã‚³ãƒ³ã‚·ã‚§ãƒ«ã‚¸ãƒ¥ç”¨ãƒ¡ãƒ‡ã‚£ã‚¢ç®¡ç†

### ã‚¹ã‚³ãƒ¼ãƒ—
- âœ… ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆJPG, PNG, WebPï¼‰
- âœ… å‹•ç”»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆMP4ï¼‰
- âœ… ã‚µãƒ ãƒã‚¤ãƒ«è‡ªå‹•ç”Ÿæˆ
- âœ… ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¿ã‚°ç®¡ç†
- âœ… ãƒ¡ãƒ‡ã‚£ã‚¢ã‚«ãƒ†ã‚´ãƒªç®¡ç†
- âœ… ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ç®¡ç†ï¼ˆS3 or ãƒ­ãƒ¼ã‚«ãƒ«ï¼‰
- âŒ ç”»åƒç·¨é›†æ©Ÿèƒ½ï¼ˆPhase 3ä»¥é™ï¼‰
- âŒ å‹•ç”»ç·¨é›†æ©Ÿèƒ½ï¼ˆPhase 3ä»¥é™ï¼‰

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### media ãƒ†ãƒ¼ãƒ–ãƒ«
```prisma
model Media {
  id          String   @id @default(uuid()) @map("media_id")
  tenantId    String   @map("tenant_id")
  fileName    String   @map("file_name")
  fileType    String   @map("file_type") // "image/jpeg", "video/mp4"
  fileSize    Int      @map("file_size") // bytes
  width       Int?     // ç”»åƒã®å¹…
  height      Int?     // ç”»åƒã®é«˜ã•
  duration    Int?     // å‹•ç”»ã®é•·ã•ï¼ˆç§’ï¼‰
  url         String   // ã‚¢ã‚¯ã‚»ã‚¹URL
  thumbnailUrl String? @map("thumbnail_url")
  category    String   // "menu", "campaign", "ai", "other"
  tags        String[] // ã‚¿ã‚°é…åˆ—
  createdBy   String   @map("created_by")
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  @@map("media")
}
```

## ğŸ”§ APIè¨­è¨ˆ

### 1. ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
```typescript
POST /api/v1/media/upload
Content-Type: multipart/form-data
Body: { file, category, tags }
Response: { media: Media }
```

### 2. ãƒ¡ãƒ‡ã‚£ã‚¢ä¸€è¦§å–å¾—
```typescript
GET /api/v1/media
Query: { tenantId, category?, tags?, page, limit }
Response: { media: Media[], total: number }
```

### 3. ãƒ¡ãƒ‡ã‚£ã‚¢å‰Šé™¤
```typescript
DELETE /api/v1/media/:mediaId
Response: { success: boolean }
```

## ğŸ“¦ ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è¨­è¨ˆ

### ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹æ§‹é€ 
```
/media/{tenantId}/{category}/{year}/{month}/{uuid}.{ext}
/media/thumbnails/{tenantId}/{category}/{year}/{month}/{uuid}_thumb.{ext}
```

### ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
- é–‹ç™ºç’°å¢ƒ: ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆ`/public/uploads/`ï¼‰
- æœ¬ç•ªç’°å¢ƒ: AWS S3 or äº’æ›ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸

## âš ï¸ åˆ¶ç´„äº‹é …

1. **ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåˆ¶é™**: 
   - ç”»åƒ: æœ€å¤§10MB
   - å‹•ç”»: æœ€å¤§100MB
2. **å¯¾å¿œãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**:
   - ç”»åƒ: JPG, PNG, WebP
   - å‹•ç”»: MP4
3. **ã‚µãƒ ãƒã‚¤ãƒ«**: è‡ªå‹•ç”Ÿæˆï¼ˆ200x200pxï¼‰
4. **æ¨©é™**: MEDIA_MANAGEæ¨©é™å¿…é ˆ
```

#### 3-2. ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»æ‰¿èª

**ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼**: Izaï¼ˆçµ±åˆç®¡ç†ï¼‰

**ç¢ºèªé …ç›®**:
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆã®å¦¥å½“æ€§
- [ ] APIè¨­è¨ˆã®å¦¥å½“æ€§
- [ ] ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è¨­è¨ˆã®å¦¥å½“æ€§
- [ ] æ¨©é™ã‚·ã‚¹ãƒ†ãƒ ã¨ã®çµ±åˆ
- [ ] ãƒ†ãƒŠãƒ³ãƒˆåˆ†é›¢ã®å®Ÿè£…

### Task 3 å®Œäº†æ¡ä»¶

- [ ] SSOTä½œæˆå®Œäº†ï¼ˆv1.0.0ï¼‰
- [ ] ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Œäº†
- [ ] æ‰¿èªå®Œäº†

---

## ğŸŸ¡ Task 4: MEDIA_MANAGEMENT å®Ÿè£…

**æ‹…å½“**: Sun  
**å·¥æ•°**: 3æ—¥é–“  
**ä¾å­˜**: Task 3å®Œäº†å¾Œã«ç€æ‰‹  
**ç›®çš„**: ãƒ¡ãƒ‡ã‚£ã‚¢ç®¡ç†æ©Ÿèƒ½ã®å®Ÿè£…

### ğŸ“‹ å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—

#### 4-1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å®Ÿè£…ï¼ˆDay 1 åˆå‰ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `/Users/kaneko/hotel-common/prisma/schema.prisma`

- `media`ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ 
- ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ

#### 4-2. hotel-common APIå®Ÿè£…ï¼ˆDay 1 åˆå¾Œ ã€œ Day 2ï¼‰

**ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª**: `/Users/kaneko/hotel-common/src/routes/media/`

å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«:
- `upload.post.ts` - ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†
- `list.get.ts` - ä¸€è¦§å–å¾—
- `delete.delete.ts` - å‰Šé™¤å‡¦ç†

**å®Ÿè£…å†…å®¹**:
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†
- ã‚µãƒ ãƒã‚¤ãƒ«è‡ªå‹•ç”Ÿæˆï¼ˆSharp.jsä½¿ç”¨ï¼‰
- ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä¿å­˜ï¼ˆãƒ­ãƒ¼ã‚«ãƒ« or S3ï¼‰
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç™»éŒ²

#### 4-3. hotel-saaså®Ÿè£…ï¼ˆDay 2 åˆå¾Œ ã€œ Day 3ï¼‰

**Composable**: `/Users/kaneko/hotel-saas/composables/useMedia.ts`

```typescript
export const useMedia = () => {
  const uploadMedia = async (file: File, category: string, tags: string[]) => {
    const formData = new FormData();
    formData.append('file', file);
    formData.append('category', category);
    formData.append('tags', JSON.stringify(tags));

    return await $fetch('/api/v1/media/upload', {
      method: 'POST',
      body: formData
    });
  };

  const getMedia = async (params: MediaQuery) => {
    return await $fetch('/api/v1/media', { params });
  };

  return { uploadMedia, getMedia };
};
```

**ç®¡ç†ç”»é¢**: `/Users/kaneko/hotel-saas/pages/admin/media/index.vue`

**æ©Ÿèƒ½**:
- ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- ãƒ¡ãƒ‡ã‚£ã‚¢ä¸€è¦§è¡¨ç¤ºï¼ˆã‚°ãƒªãƒƒãƒ‰è¡¨ç¤ºï¼‰
- ãƒ¡ãƒ‡ã‚£ã‚¢å‰Šé™¤
- ã‚«ãƒ†ã‚´ãƒªãƒ»ã‚¿ã‚°ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼

#### 4-4. ãƒ†ã‚¹ãƒˆãƒ»æ¤œè¨¼ï¼ˆDay 3 åˆå¾Œï¼‰

**ç¢ºèªé …ç›®**:
- [ ] ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ­£å¸¸å‹•ä½œ
- [ ] å‹•ç”»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ­£å¸¸å‹•ä½œ
- [ ] ã‚µãƒ ãƒã‚¤ãƒ«è‡ªå‹•ç”Ÿæˆ
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåˆ¶é™
- [ ] æ¨©é™ãƒã‚§ãƒƒã‚¯å‹•ä½œ
- [ ] ãƒ†ãƒŠãƒ³ãƒˆåˆ†é›¢å‹•ä½œ

### Task 4 å®Œäº†æ¡ä»¶

- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆå®Œäº†
- [ ] hotel-common APIå®Ÿè£…å®Œäº†
- [ ] hotel-saaså®Ÿè£…å®Œäº†
- [ ] ç®¡ç†ç”»é¢ä½œæˆå®Œäº†
- [ ] ãƒ†ã‚¹ãƒˆå®Œäº†
- [ ] å‹•ä½œç¢ºèªå®Œäº†

---

## âœ… Week 1 å®Œäº†æ¡ä»¶

### å¿…é ˆæ¡ä»¶

- [ ] **Task 1: PERMISSION_SYSTEM å®Œäº†**
  - [ ] SSOT v1.0.0 ä½œæˆå®Œäº†
  - [ ] hotel-common/saaså®Ÿè£…å®Œäº†
  - [ ] å…¨ç®¡ç†ç”»é¢ã§æ¨©é™ãƒã‚§ãƒƒã‚¯å‹•ä½œ
  
- [ ] **Task 2: MULTITENANT v1.6.0 å®Œäº†**
  - [ ] SSOT v1.6.0 æ›´æ–°å®Œäº†
  - [ ] æ¨©é™ã‚·ã‚¹ãƒ†ãƒ çµ±åˆå®Œäº†
  
- [ ] **Task 3: MEDIA_MANAGEMENT SSOT å®Œäº†**
  - [ ] SSOT v1.0.0 ä½œæˆå®Œäº†
  - [ ] ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»æ‰¿èªå®Œäº†
  
- [ ] **Task 4: MEDIA_MANAGEMENT å®Ÿè£…å®Œäº†**
  - [ ] hotel-common/saaså®Ÿè£…å®Œäº†
  - [ ] ç®¡ç†ç”»é¢ä½œæˆå®Œäº†

### å“è³ªæ¡ä»¶

- [ ] å…¨APIã§ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Ÿè£…
- [ ] å…¨APIã§ãƒ†ãƒŠãƒ³ãƒˆIDæ¤œè¨¼å®Ÿè£…
- [ ] å…¨APIã§Sessionèªè¨¼ãƒã‚§ãƒƒã‚¯å®Ÿè£…
- [ ] ãƒ­ã‚°å‡ºåŠ›å®Ÿè£…
- [ ] ãƒ†ã‚¹ãƒˆå®Ÿè£…ãƒ»å®Ÿè¡Œå®Œäº†

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ¡ä»¶

- [ ] SSOTæ›´æ–°å®Œäº†
- [ ] é€²æ—ç®¡ç†ãƒã‚¹ã‚¿ãƒ¼æ›´æ–°å®Œäº†
- [ ] å®Ÿè£…çŠ¶æ³è¨˜éŒ²å®Œäº†

---

## ğŸ“Š é€²æ—å ±å‘Šãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

Week 1å®Œäº†å¾Œã€ä»¥ä¸‹ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§å ±å‘Šã—ã¦ãã ã•ã„ï¼š

```markdown
## Phase 1 Week 1 å®Œäº†å ±å‘Š

### Task 1: PERMISSION_SYSTEM
- [x] å®Œäº†
- SSOT: v1.0.0
- hotel-saaså®Ÿè£…: v1.0.0
- hotel-commonå®Ÿè£…: v1.0.0

### Task 2: MULTITENANT v1.6.0
- [x] å®Œäº†
- SSOT: v1.6.0
- hotel-saaså®Ÿè£…: v1.6.0
- hotel-commonå®Ÿè£…: v1.6.0

### Task 3: MEDIA_MANAGEMENT SSOT
- [x] å®Œäº†
- SSOT: v1.0.0

### Task 4: MEDIA_MANAGEMENT å®Ÿè£…
- [x] å®Œäº†
- hotel-saaså®Ÿè£…: v1.0.0
- hotel-commonå®Ÿè£…: v1.0.0

### å‹•ä½œç¢ºèª
- [x] æ¨©é™ã‚·ã‚¹ãƒ†ãƒ å‹•ä½œç¢ºèªå®Œäº†
- [x] ãƒ¡ãƒ‡ã‚£ã‚¢ç®¡ç†å‹•ä½œç¢ºèªå®Œäº†
- [x] ãƒ†ãƒŠãƒ³ãƒˆåˆ†é›¢ç¢ºèªå®Œäº†

Phase 1 Week 1 å®Œäº†ã—ã¾ã—ãŸã€‚Week 2ã«é€²ã¿ã¾ã™ã€‚
```

---

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- **é€²æ—ç®¡ç†ãƒã‚¹ã‚¿ãƒ¼**: `/Users/kaneko/hotel-kanri/docs/03_ssot/SSOT_PROGRESS_MASTER.md`
- **Phase 0å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ**: `/Users/kaneko/hotel-kanri/docs/03_ssot/PHASE_0_COMPLETION_REPORT.md`
- **SSOTä¸€è¦§**: `/Users/kaneko/hotel-kanri/docs/03_ssot/README.md`
- **å®Ÿè£…ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«**: `/Users/kaneko/hotel-kanri/.cursor/prompts/ssot_implementation_guard.md`

---

**Phase 1 Week 1 å®Ÿè£…æŒ‡ç¤ºæ›¸**  
**ä½œæˆæ—¥**: 2025å¹´10æœˆ13æ—¥  
**ä½œæˆè€…**: çµ±åˆç®¡ç†ï¼ˆIzaï¼‰  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0

