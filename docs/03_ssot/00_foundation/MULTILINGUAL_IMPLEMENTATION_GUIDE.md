# å¤šè¨€èªåŒ–ã‚·ã‚¹ãƒ†ãƒ  å®Ÿè£…ã‚¬ã‚¤ãƒ‰

**ä½œæˆæ—¥**: 2025-10-07  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0  
**å¯¾è±¡**: é–‹ç™ºè€…ï¼ˆSun, Luna, Suno, Izaï¼‰  
**å‰æçŸ¥è­˜**: [SSOT_MULTILINGUAL_SYSTEM.md](./SSOT_MULTILINGUAL_SYSTEM.md)ã‚’å¿…ãšå…ˆã«èª­ã‚€ã“ã¨

**é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**:
- [SSOT_MULTILINGUAL_SYSTEM.md](./SSOT_MULTILINGUAL_SYSTEM.md) - å¤šè¨€èªåŒ–ã‚·ã‚¹ãƒ†ãƒ ä»•æ§˜ï¼ˆå¿…èª­ï¼‰
- [DATABASE_NAMING_STANDARD.md](/Users/kaneko/hotel-kanri/docs/standards/DATABASE_NAMING_STANDARD.md) - å‘½åè¦å‰‡
- [API_ROUTING_GUIDELINES.md](/Users/kaneko/hotel-kanri/docs/01_systems/saas/API_ROUTING_GUIDELINES.md) - APIãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

---

## ğŸ“‹ ç›®æ¬¡

1. [ä»–æ©Ÿèƒ½å®Ÿè£…æ™‚ã®å¿…é ˆãƒ«ãƒ¼ãƒ«](#ä»–æ©Ÿèƒ½å®Ÿè£…æ™‚ã®å¿…é ˆãƒ«ãƒ¼ãƒ«)
2. [UI/UXè€ƒæ…®äº‹é …](#uiuxè€ƒæ…®äº‹é …)
3. [ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå‡¦ç†](#ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå‡¦ç†)
4. [æ¤œç´¢ãƒ»ã‚½ãƒ¼ãƒˆ](#æ¤œç´¢ã‚½ãƒ¼ãƒˆ)
5. [é€šçŸ¥ãƒ»ãƒ¡ãƒ¼ãƒ«](#é€šçŸ¥ãƒ¡ãƒ¼ãƒ«)
6. [SEOå¯¾å¿œ](#seoå¯¾å¿œ)
7. [ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰é›†](#ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰é›†)
8. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)
9. [ã‚ˆãã‚ã‚‹é–“é•ã„ã¨ä¿®æ­£æ–¹æ³•](#ã‚ˆãã‚ã‚‹é–“é•ã„ã¨ä¿®æ­£æ–¹æ³•)

---

## ğŸš¨ ä»–æ©Ÿèƒ½å®Ÿè£…æ™‚ã®å¿…é ˆãƒ«ãƒ¼ãƒ«

### âš ï¸ é‡è¦: ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯å…¨æ©Ÿèƒ½å®Ÿè£…æ™‚ã«å¿…ãšç¢ºèªã™ã‚‹ã“ã¨

å¤šè¨€èªåŒ–ã¯**æ¨ªæ–­çš„ãªåŸºç›¤æ©Ÿèƒ½**ã§ã‚ã‚Šã€å…¨ã¦ã®æ©Ÿèƒ½å®Ÿè£…æ™‚ã«ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã‚’éµå®ˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

---

### ğŸ“‹ å®Ÿè£…å‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

æ–°æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹å‰ã«ã€ä»¥ä¸‹ã‚’å¿…ãšç¢ºèªã—ã¦ãã ã•ã„ï¼š

```markdown
â–¡ ã“ã®æ©Ÿèƒ½ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ãƒ†ã‚­ã‚¹ãƒˆãŒå«ã¾ã‚Œã‚‹ã‹ï¼Ÿ
  â””â”€ YES â†’ å¤šè¨€èªå¯¾å¿œå¿…é ˆ
  â””â”€ NO  â†’ ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ã‚¹ã‚­ãƒƒãƒ—å¯èƒ½

â–¡ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã‚ã‚‹ã‹ï¼Ÿ
  â””â”€ YES â†’ translationsãƒ†ãƒ¼ãƒ–ãƒ«ä½¿ç”¨å¿…é ˆ
  â””â”€ NO  â†’ é™çš„UIãƒ†ã‚­ã‚¹ãƒˆã®ã¿ï¼ˆi18nãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

â–¡ ç®¡ç†ç”»é¢ã§ãƒ†ã‚­ã‚¹ãƒˆã‚’ç·¨é›†ã™ã‚‹æ©Ÿèƒ½ãŒã‚ã‚‹ã‹ï¼Ÿ
  â””â”€ YES â†’ è‡ªå‹•ç¿»è¨³æ©Ÿèƒ½ã®çµ„ã¿è¾¼ã¿å¿…é ˆ
  â””â”€ NO  â†’ è¡¨ç¤ºã®ã¿ï¼ˆç¿»è¨³å–å¾—ã®ã¿ï¼‰
```

---

### 1ï¸âƒ£ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆæ™‚ã®å¿…é ˆãƒ«ãƒ¼ãƒ«

#### âŒ ç¦æ­¢ãƒ‘ã‚¿ãƒ¼ãƒ³

```sql
-- âŒ çµ¶å¯¾ç¦æ­¢: è¨€èªåˆ¥ã‚«ãƒ©ãƒ ã‚’è¿½åŠ 
CREATE TABLE new_feature_items (
  id TEXT PRIMARY KEY,
  name_ja TEXT,
  name_en TEXT,
  name_ko TEXT,
  -- ... 15è¨€èªåˆ†ã®ã‚«ãƒ©ãƒ ï¼ˆç¦æ­¢ï¼ï¼‰
);
```

**ç†ç”±**:
- è¨€èªè¿½åŠ æ™‚ã«ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´ãŒå¿…è¦
- ã‚«ãƒ©ãƒ æ•°ãŒçˆ†ç™ºï¼ˆ15è¨€èª Ã— è¤‡æ•°ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼‰
- NULLå€¤ãŒå¤šã„
- æ‹¡å¼µæ€§ãŒãªã„
- ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ç¿»è¨³ã®å®Ÿè£…ãŒè¤‡é›‘åŒ–

#### âœ… æ­£ã—ã„ãƒ‘ã‚¿ãƒ¼ãƒ³

```sql
-- ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆè¨€èªéä¾å­˜ãƒ‡ãƒ¼ã‚¿ï¼‰
CREATE TABLE new_feature_items (
  id TEXT PRIMARY KEY DEFAULT gen_random_uuid(),
  tenant_id TEXT NOT NULL,
  price INTEGER,
  image_url TEXT,
  
  -- è¨€èªä¾å­˜ãƒ‡ãƒ¼ã‚¿ã¯å«ã‚ãªã„
  -- ç¿»è¨³ã¯translationsãƒ†ãƒ¼ãƒ–ãƒ«ã§ç®¡ç†
  
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),
  
  FOREIGN KEY (tenant_id) REFERENCES tenants(id) ON DELETE CASCADE
);

-- ç¿»è¨³ã¯translationsãƒ†ãƒ¼ãƒ–ãƒ«ã§ç®¡ç†ï¼ˆçµ±ä¸€ï¼‰
-- entity_type='new_feature_item', entity_id='{id}', field_name='name'
```

---

### 2ï¸âƒ£ Prismaã‚¹ã‚­ãƒ¼ãƒå®šç¾©æ™‚ã®å¿…é ˆãƒ«ãƒ¼ãƒ«

#### âœ… æ­£ã—ã„ãƒ‘ã‚¿ãƒ¼ãƒ³

```prisma
model NewFeatureItem {
  id        String   @id @default(uuid())
  tenantId  String   @map("tenant_id")
  price     Int
  imageUrl  String?  @map("image_url")
  
  // âŒ è¨€èªåˆ¥ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯è¿½åŠ ã—ãªã„
  // nameJa, nameEn ç­‰ã¯ç¦æ­¢
  
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  
  tenant Tenant @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  
  @@index([tenantId])
  @@map("new_feature_items")
}

// ç¿»è¨³ã¯Translationãƒ¢ãƒ‡ãƒ«ã§ç®¡ç†ï¼ˆçµ±ä¸€ï¼‰
```

---

### 3ï¸âƒ£ APIå®Ÿè£…æ™‚ã®å¿…é ˆãƒ«ãƒ¼ãƒ«

#### hotel-common: ãƒ‡ãƒ¼ã‚¿ä½œæˆAPI

```typescript
// âœ… å¿…é ˆ: è‡ªå‹•ç¿»è¨³ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å«ã‚ã‚‹
interface CreateNewFeatureItemRequest {
  name_ja: string
  description_ja?: string
  price: number
  auto_translate?: boolean  // âœ… å¿…é ˆ: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆtrue
}

// POST /api/v1/admin/new-feature/items/create.post.ts
export default defineEventHandler(async (event) => {
  const body = await readBody(event)
  const { name_ja, description_ja, price, auto_translate = true } = body
  
  // 1. ã‚¢ã‚¤ãƒ†ãƒ ã‚’ä½œæˆ
  const item = await prisma.newFeatureItem.create({
    data: {
      tenantId: event.context.session.tenantId,
      price
    }
  })
  
  // 2. æ—¥æœ¬èªç¿»è¨³ã‚’ä¿å­˜ï¼ˆtranslationsãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
  await prisma.translation.create({
    data: {
      tenantId: event.context.session.tenantId,
      entityType: 'new_feature_item',
      entityId: item.id,
      languageCode: 'ja',
      fieldName: 'name',
      translatedText: name_ja,
      translationMethod: 'manual'
    }
  })
  
  if (description_ja) {
    await prisma.translation.create({
      data: {
        tenantId: event.context.session.tenantId,
        entityType: 'new_feature_item',
        entityId: item.id,
        languageCode: 'ja',
        fieldName: 'description',
        translatedText: description_ja,
        translationMethod: 'manual'
      }
    })
  }
  
  // 3. âœ… å¿…é ˆ: è‡ªå‹•ç¿»è¨³ãŒæœ‰åŠ¹ãªå ´åˆã€ç¿»è¨³ã‚¸ãƒ§ãƒ–ã‚’ä½œæˆ
  if (auto_translate) {
    const engine = getTranslationEngine()
    const sourceTexts: Record<string, string> = { name: name_ja }
    if (description_ja) sourceTexts.description = description_ja
    
    const jobId = await engine.translateEntity(
      'new_feature_item',
      item.id,
      'ja',
      sourceTexts,
      ['en', 'ko', 'zh-CN', 'zh-TW', 'th', 'vi', 'id', 'ms', 'tl', 'es', 'fr', 'de', 'it', 'pt']
    )
    
    return { success: true, data: { id: item.id, translationJobId: jobId } }
  }
  
  return { success: true, data: { id: item.id } }
})
```

#### hotel-common: ãƒ‡ãƒ¼ã‚¿å–å¾—API

```typescript
// âœ… å¿…é ˆ: è¨€èªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹
// GET /api/v1/guest/new-feature/items/list.get.ts
export default defineEventHandler(async (event) => {
  const query = getQuery(event)
  const languageCode = query.lang as string || 'ja'
  const tenantId = event.context.session.tenantId
  
  // 1. ã‚¢ã‚¤ãƒ†ãƒ ã‚’å–å¾—
  const items = await prisma.newFeatureItem.findMany({
    where: { tenantId }
  })
  
  // 2. ç¿»è¨³ã‚’å–å¾—ï¼ˆä¸€æ‹¬ï¼‰
  const itemIds = items.map(item => item.id)
  const translations = await prisma.translation.findMany({
    where: {
      entityType: 'new_feature_item',
      entityId: { in: itemIds },
      languageCode
    }
  })
  
  // 3. ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†
  const translationMap = new Map<string, Map<string, string>>()
  translations.forEach(t => {
    if (!translationMap.has(t.entityId)) {
      translationMap.set(t.entityId, new Map())
    }
    translationMap.get(t.entityId)!.set(t.fieldName, t.translatedText)
  })
  
  // 4. ãƒ‡ãƒ¼ã‚¿çµåˆ
  const itemsWithTranslations = await Promise.all(
    items.map(async (item) => {
      let itemTranslations = translationMap.get(item.id)
      
      // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: æŒ‡å®šè¨€èªãŒãªã„å ´åˆ
      if (!itemTranslations || itemTranslations.size === 0) {
        // è‹±èªã‚’è©¦ã™
        const enTranslations = await prisma.translation.findMany({
          where: {
            entityType: 'new_feature_item',
            entityId: item.id,
            languageCode: 'en'
          }
        })
        
        if (enTranslations.length > 0) {
          itemTranslations = new Map()
          enTranslations.forEach(t => itemTranslations!.set(t.fieldName, t.translatedText))
        } else {
          // æ—¥æœ¬èªã‚’è©¦ã™
          const jaTranslations = await prisma.translation.findMany({
            where: {
              entityType: 'new_feature_item',
              entityId: item.id,
              languageCode: 'ja'
            }
          })
          itemTranslations = new Map()
          jaTranslations.forEach(t => itemTranslations!.set(t.fieldName, t.translatedText))
        }
      }
      
      return {
        id: item.id,
        name: itemTranslations?.get('name') || '[Translation Missing]',
        description: itemTranslations?.get('description') || '',
        price: item.price,
        imageUrl: item.imageUrl
      }
    })
  )
  
  return { success: true, data: itemsWithTranslations }
})
```

#### hotel-saas: ãƒ—ãƒ­ã‚­ã‚·API

```typescript
// âœ… å¿…é ˆ: è¨€èªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è»¢é€
// GET /api/v1/guest/new-feature/items/list.get.ts
export default defineEventHandler(async (event) => {
  const query = getQuery(event)
  
  const response = await $fetch(
    'http://localhost:3400/api/v1/guest/new-feature/items/list',
    {
      params: query,  // âœ… å¿…é ˆ: langãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è»¢é€
      credentials: 'include',
      headers: {
        cookie: event.node.req.headers.cookie || ''
      }
    }
  )
  
  return response
})
```

---

### 4ï¸âƒ£ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…æ™‚ã®å¿…é ˆãƒ«ãƒ¼ãƒ«

#### âŒ ç¦æ­¢ãƒ‘ã‚¿ãƒ¼ãƒ³

```vue
<template>
  <!-- âŒ çµ¶å¯¾ç¦æ­¢: ç›´æ¥æ—¥æœ¬èªã‚’æ›¸ã -->
  <h1>æ–°æ©Ÿèƒ½</h1>
  <button>è¿½åŠ </button>
  <p>ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</p>
</template>
```

#### âœ… æ­£ã—ã„ãƒ‘ã‚¿ãƒ¼ãƒ³

```vue
<template>
  <div class="new-feature-page">
    <!-- âœ… å¿…é ˆ: é™çš„ãƒ†ã‚­ã‚¹ãƒˆã¯ç¿»è¨³ã‚­ãƒ¼ã‚’ä½¿ç”¨ -->
    <h1>{{ $t('newFeature.title') }}</h1>
    <button>{{ $t('ui.buttons.add') }}</button>
    
    <!-- âœ… å¿…é ˆ: å‹•çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯ç¿»è¨³æ¸ˆã¿ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º -->
    <div v-for="item in items" :key="item.id" class="item">
      <h3>{{ item.name }}</h3>
      <p>{{ item.description }}</p>
      <span>{{ formatPrice(item.price) }}</span>
    </div>
    
    <!-- âœ… å¿…é ˆ: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚‚ç¿»è¨³ã‚­ãƒ¼ -->
    <p v-if="items.length === 0">{{ $t('ui.messages.no_data') }}</p>
  </div>
</template>

<script setup lang="ts">
const { t, locale } = useI18n()
const { formatPrice } = useLocaleFormat()

// âœ… å¿…é ˆ: ç¾åœ¨ã®è¨€èªã‚’å«ã‚ã¦APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ
const { data: items } = await useFetch('/api/v1/guest/new-feature/items/list', {
  params: { lang: locale.value }
})
</script>
```

#### ç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆï¼ˆå¿…é ˆï¼‰

```json
// locales/ja/newFeature.json
{
  "title": "æ–°æ©Ÿèƒ½",
  "description": "æ–°æ©Ÿèƒ½ã®èª¬æ˜",
  "buttons": {
    "create": "ä½œæˆ",
    "edit": "ç·¨é›†",
    "delete": "å‰Šé™¤"
  },
  "labels": {
    "name": "åå‰",
    "description": "èª¬æ˜",
    "price": "ä¾¡æ ¼"
  },
  "messages": {
    "created": "ä½œæˆã—ã¾ã—ãŸ",
    "updated": "æ›´æ–°ã—ã¾ã—ãŸ",
    "deleted": "å‰Šé™¤ã—ã¾ã—ãŸ"
  }
}

// locales/en/newFeature.json
{
  "title": "New Feature",
  "description": "Description of new feature",
  "buttons": {
    "create": "Create",
    "edit": "Edit",
    "delete": "Delete"
  },
  "labels": {
    "name": "Name",
    "description": "Description",
    "price": "Price"
  },
  "messages": {
    "created": "Created successfully",
    "updated": "Updated successfully",
    "deleted": "Deleted successfully"
  }
}
```

---

### 5ï¸âƒ£ ç®¡ç†ç”»é¢å®Ÿè£…æ™‚ã®å¿…é ˆãƒ«ãƒ¼ãƒ«

#### âœ… å¿…é ˆ: å¤šè¨€èªå…¥åŠ›UI

```vue
<template>
  <div class="admin-create-form">
    <h1>{{ $t('admin.newFeature.create.title') }}</h1>
    
    <!-- âœ… å¿…é ˆ: æ—¥æœ¬èªå…¥åŠ›ï¼ˆãƒ™ãƒ¼ã‚¹è¨€èªï¼‰ -->
    <div class="form-section">
      <h2>åŸºæœ¬æƒ…å ±ï¼ˆæ—¥æœ¬èªï¼‰</h2>
      
      <div class="form-group">
        <label>åå‰ï¼ˆæ—¥æœ¬èªï¼‰*</label>
        <input v-model="form.name_ja" type="text" required />
      </div>
      
      <div class="form-group">
        <label>èª¬æ˜ï¼ˆæ—¥æœ¬èªï¼‰</label>
        <textarea v-model="form.description_ja" />
      </div>
    </div>
    
    <!-- âœ… å¿…é ˆ: è‡ªå‹•ç¿»è¨³ã‚ªãƒ—ã‚·ãƒ§ãƒ³ -->
    <div class="form-section">
      <h2>å¤šè¨€èªå¯¾å¿œ</h2>
      
      <div class="translation-option">
        <label class="checkbox-label">
          <input v-model="form.auto_translate" type="checkbox" checked />
          <span>ä¿å­˜æ™‚ã«è‡ªå‹•çš„ã«15è¨€èªã¸ç¿»è¨³ã™ã‚‹</span>
        </label>
        <p class="help-text">
          ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§ç¿»è¨³ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ï¼ˆç´„1-2åˆ†ï¼‰ã€‚
          ç¿»è¨³å®Œäº†å¾Œã€å„è¨€èªã®å†…å®¹ã‚’ç¢ºèªãƒ»ä¿®æ­£ã§ãã¾ã™ã€‚
        </p>
      </div>
      
      <!-- âœ… æ¨å¥¨: ç¿»è¨³å¯¾è±¡è¨€èªã®è¡¨ç¤º -->
      <div v-if="form.auto_translate" class="target-languages">
        <p class="label">ç¿»è¨³å¯¾è±¡è¨€èªï¼ˆ14è¨€èªï¼‰</p>
        <div class="language-chips">
          <span v-for="lang in targetLanguages" :key="lang.code" class="chip">
            {{ lang.flag }} {{ lang.name }}
          </span>
        </div>
      </div>
    </div>
    
    <!-- âœ… å¿…é ˆ: ä¿å­˜ãƒœã‚¿ãƒ³ -->
    <div class="form-actions">
      <button type="button" @click="$router.back()" class="btn-secondary">
        ã‚­ãƒ£ãƒ³ã‚»ãƒ«
      </button>
      <button type="submit" @click="handleSubmit" class="btn-primary" :disabled="isSubmitting">
        <Icon v-if="isSubmitting" name="heroicons:arrow-path" class="animate-spin" />
        {{ isSubmitting ? 'ä¿å­˜ä¸­...' : 'ä¿å­˜ã—ã¦ç¿»è¨³ã‚’é–‹å§‹' }}
      </button>
    </div>
  </div>
</template>

<script setup lang="ts">
const form = ref({
  name_ja: '',
  description_ja: '',
  price: 0,
  auto_translate: true  // âœ… å¿…é ˆ: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§true
})

const targetLanguages = [
  { code: 'en', name: 'è‹±èª', flag: 'ğŸ‡ºğŸ‡¸' },
  { code: 'ko', name: 'éŸ“å›½èª', flag: 'ğŸ‡°ğŸ‡·' },
  { code: 'zh-CN', name: 'ä¸­å›½èªï¼ˆç°¡ä½“å­—ï¼‰', flag: 'ğŸ‡¨ğŸ‡³' },
  { code: 'zh-TW', name: 'ä¸­å›½èªï¼ˆç¹ä½“å­—ï¼‰', flag: 'ğŸ‡¹ğŸ‡¼' },
  { code: 'th', name: 'ã‚¿ã‚¤èª', flag: 'ğŸ‡¹ğŸ‡­' },
  { code: 'vi', name: 'ãƒ™ãƒˆãƒŠãƒ èª', flag: 'ğŸ‡»ğŸ‡³' },
  { code: 'id', name: 'ã‚¤ãƒ³ãƒ‰ãƒã‚·ã‚¢èª', flag: 'ğŸ‡®ğŸ‡©' },
  { code: 'ms', name: 'ãƒãƒ¬ãƒ¼èª', flag: 'ğŸ‡²ğŸ‡¾' },
  { code: 'tl', name: 'ãƒ•ã‚£ãƒªãƒ”ãƒ³èª', flag: 'ğŸ‡µğŸ‡­' },
  { code: 'es', name: 'ã‚¹ãƒšã‚¤ãƒ³èª', flag: 'ğŸ‡ªğŸ‡¸' },
  { code: 'fr', name: 'ãƒ•ãƒ©ãƒ³ã‚¹èª', flag: 'ğŸ‡«ğŸ‡·' },
  { code: 'de', name: 'ãƒ‰ã‚¤ãƒ„èª', flag: 'ğŸ‡©ğŸ‡ª' },
  { code: 'it', name: 'ã‚¤ã‚¿ãƒªã‚¢èª', flag: 'ğŸ‡®ğŸ‡¹' },
  { code: 'pt', name: 'ãƒãƒ«ãƒˆã‚¬ãƒ«èª', flag: 'ğŸ‡µğŸ‡¹' }
]

const isSubmitting = ref(false)

const handleSubmit = async () => {
  isSubmitting.value = true
  
  try {
    const response = await $fetch('/api/v1/admin/new-feature/items/create', {
      method: 'POST',
      body: {
        name_ja: form.value.name_ja,
        description_ja: form.value.description_ja,
        price: form.value.price,
        auto_translate: form.value.auto_translate  // âœ… å¿…é ˆ: é€ä¿¡
      }
    })
    
    if (response.success) {
      toast.success('ä½œæˆã—ã¾ã—ãŸ', 'ç¿»è¨³ã‚’ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§å®Ÿè¡Œä¸­ã§ã™')
      
      // âœ… æ¨å¥¨: ç¿»è¨³é€²æ—ã®ç›£è¦–
      if (response.data.translationJobId) {
        watchTranslationProgress(response.data.translationJobId)
      }
      
      await navigateTo('/admin/new-feature/items')
    }
  } catch (error) {
    toast.error('ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ', error.message)
  } finally {
    isSubmitting.value = false
  }
}

// ç¿»è¨³é€²æ—ç›£è¦–ï¼ˆæ¨å¥¨ï¼‰
const watchTranslationProgress = (jobId: string) => {
  const eventSource = new EventSource(`/api/v1/translations/jobs/${jobId}/progress`)
  
  eventSource.onmessage = (event) => {
    const data = JSON.parse(event.data)
    
    if (data.status === 'completed') {
      toast.success('ç¿»è¨³å®Œäº†', `${data.completedTasks}/${data.totalTasks}ä»¶ã®ç¿»è¨³ãŒå®Œäº†ã—ã¾ã—ãŸ`)
      eventSource.close()
    } else if (data.status === 'failed') {
      toast.error('ç¿»è¨³å¤±æ•—', 'ä¸€éƒ¨ã®ç¿»è¨³ã«å¤±æ•—ã—ã¾ã—ãŸ')
      eventSource.close()
    }
  }
  
  eventSource.onerror = () => {
    eventSource.close()
  }
}
</script>
```

---

### 6ï¸âƒ£ ãƒ†ã‚¹ãƒˆæ™‚ã®å¿…é ˆç¢ºèªé …ç›®

```markdown
## å¤šè¨€èªå¯¾å¿œã®ãƒ†ã‚¹ãƒˆãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- [ ] translationsãƒ†ãƒ¼ãƒ–ãƒ«ã«ãƒ‡ãƒ¼ã‚¿ãŒæ­£ã—ãä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] entity_type, entity_id, language_code, field_nameãŒæ­£ã—ã„ã‹
- [ ] è¤‡åˆãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ãŒæ©Ÿèƒ½ã—ã¦ã„ã‚‹ã‹

### API
- [ ] ä½œæˆæ™‚ã«è‡ªå‹•ç¿»è¨³ã‚¸ãƒ§ãƒ–ãŒä½œæˆã•ã‚Œã‚‹ã‹
- [ ] langãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§è¨€èªã‚’æŒ‡å®šã§ãã‚‹ã‹
- [ ] ç¿»è¨³ãŒãªã„å ´åˆã€ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãŒæ©Ÿèƒ½ã™ã‚‹ã‹
- [ ] ç¿»è¨³ã‚¸ãƒ§ãƒ–ã®é€²æ—ã‚’å–å¾—ã§ãã‚‹ã‹

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- [ ] å…¨ã¦ã®è¡¨ç¤ºãƒ†ã‚­ã‚¹ãƒˆãŒç¿»è¨³ã‚­ãƒ¼åŒ–ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] è¨€èªåˆ‡ã‚Šæ›¿ãˆã§è¡¨ç¤ºãŒå¤‰ã‚ã‚‹ã‹
- [ ] ç¿»è¨³ãŒãªã„å ´åˆã€ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‹
- [ ] ç®¡ç†ç”»é¢ã§è‡ªå‹•ç¿»è¨³ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‹

### å„è¨€èªã§ã®è¡¨ç¤ºç¢ºèª
- [ ] æ—¥æœ¬èªã§æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã‹
- [ ] è‹±èªã§æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã‹
- [ ] éŸ“å›½èªã§æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã‹
- [ ] ä¸­å›½èªï¼ˆç°¡ä½“å­—ï¼‰ã§æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã‹
- [ ] ä¸­å›½èªï¼ˆç¹ä½“å­—ï¼‰ã§æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã‹
- [ ] ã‚¿ã‚¤èªã§æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã‹ï¼ˆãƒ•ã‚©ãƒ³ãƒˆç¢ºèªï¼‰
```

---

## ğŸ¨ UI/UXè€ƒæ…®äº‹é …

### 1. ãƒ†ã‚­ã‚¹ãƒˆé•·ã®å¤‰å‹•å¯¾å¿œ

**å•é¡Œ**: è¨€èªã«ã‚ˆã£ã¦ãƒ†ã‚­ã‚¹ãƒˆé•·ãŒå¤§ããå¤‰ã‚ã‚‹

**è§£æ±ºç­–**:
- å‹•çš„ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆ`min-width`, `max-width`ï¼‰
- çœç•¥å½¢ã®æä¾›ï¼ˆãƒ¢ãƒã‚¤ãƒ«ç”¨ï¼‰
- è¨€èªåˆ¥ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºèª¿æ•´

```vue
<style scoped>
.action-button {
  min-width: 120px;
  padding: 12px 24px;
  white-space: nowrap;
}

.action-button.long-text {
  min-width: 160px;
  font-size: 0.9em;
}

/* è¨€èªåˆ¥ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºèª¿æ•´ */
:lang(th), :lang(vi), :lang(id) {
  font-size: 1.05em;
}

:lang(zh), :lang(ja), :lang(ko) {
  letter-spacing: 0.02em;
}
</style>
```

### 2. RTLï¼ˆå³ã‹ã‚‰å·¦ï¼‰è¨€èªå¯¾å¿œ

**å¯¾è±¡è¨€èª**: ã‚¢ãƒ©ãƒ“ã‚¢èªã€ãƒ˜ãƒ–ãƒ©ã‚¤èªï¼ˆå°†æ¥å¯¾å¿œï¼‰

```vue
<template>
  <div :dir="direction" :lang="locale">
    <NuxtPage />
  </div>
</template>

<script setup lang="ts">
const { locale } = useI18n()
const direction = computed(() => {
  const rtlLanguages = ['ar', 'he']
  return rtlLanguages.includes(locale.value) ? 'rtl' : 'ltr'
})
</script>

<style>
[dir="rtl"] .menu-item {
  text-align: right;
}

/* è«–ç†ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰ */
.menu-item {
  padding-inline-start: 16px;
  padding-inline-end: 8px;
}
</style>
```

### 3. ãƒ•ã‚©ãƒ³ãƒˆæœ€é©åŒ–

```typescript
// nuxt.config.ts
export default defineNuxtConfig({
  app: {
    head: {
      link: [
        { rel: 'stylesheet', href: 'https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap' },
        { rel: 'stylesheet', href: 'https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap' },
        { rel: 'stylesheet', href: 'https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap' },
        { rel: 'stylesheet', href: 'https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@400;500;700&display=swap' }
      ]
    }
  }
})
```

---

## ğŸ“Š ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå‡¦ç†

### æ—¥ä»˜ãƒ»æ™‚åˆ»ãƒ»æ•°å€¤ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

```typescript
// composables/useLocaleFormat.ts
export const useLocaleFormat = () => {
  const { locale } = useI18n()
  
  const formatDate = (date: Date | string, format: 'short' | 'long' = 'short') => {
    const d = typeof date === 'string' ? new Date(date) : date
    const options: Intl.DateTimeFormatOptions = format === 'short'
      ? { year: 'numeric', month: '2-digit', day: '2-digit' }
      : { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' }
    
    return new Intl.DateTimeFormat(locale.value, options).format(d)
  }
  
  const formatPrice = (amount: number, currency: string = 'JPY') => {
    return new Intl.NumberFormat(locale.value, {
      style: 'currency',
      currency,
      minimumFractionDigits: 0
    }).format(amount)
  }
  
  const formatNumber = (value: number, decimals: number = 0) => {
    return new Intl.NumberFormat(locale.value, {
      minimumFractionDigits: decimals,
      maximumFractionDigits: decimals
    }).format(value)
  }
  
  return { formatDate, formatPrice, formatNumber }
}
```

**ä½¿ç”¨ä¾‹**:
```vue
<template>
  <div>
    <!-- æ—¥æœ¬èª: 2025å¹´10æœˆ7æ—¥ æœˆæ›œæ—¥ -->
    <!-- è‹±èª: Monday, October 7, 2025 -->
    <p>{{ formatDate(order.createdAt, 'long') }}</p>
    
    <!-- æ—¥æœ¬èª: Â¥3,500 -->
    <!-- è‹±èª: Â¥3,500 -->
    <p>{{ formatPrice(order.total) }}</p>
  </div>
</template>

<script setup lang="ts">
const { formatDate, formatPrice } = useLocaleFormat()
</script>
```

---

## ğŸ” æ¤œç´¢ãƒ»ã‚½ãƒ¼ãƒˆ

### å¤šè¨€èªå…¨æ–‡æ¤œç´¢

```typescript
// server/utils/multilingual-search.ts
export class MultilingualSearch {
  static async searchItems(
    query: string,
    language: string,
    tenantId: string,
    entityType: string
  ) {
    // PostgreSQLå…¨æ–‡æ¤œç´¢ï¼ˆè¨€èªåˆ¥ï¼‰
    const results = await prisma.$queryRaw`
      SELECT 
        t.entity_id,
        t.translated_text,
        ts_rank(
          to_tsvector(${this.getTextSearchConfig(language)}, t.translated_text),
          plainto_tsquery(${this.getTextSearchConfig(language)}, ${query})
        ) AS rank
      FROM translations t
      WHERE 
        t.tenant_id = ${tenantId}
        AND t.entity_type = ${entityType}
        AND t.language_code = ${language}
        AND to_tsvector(${this.getTextSearchConfig(language)}, t.translated_text)
            @@ plainto_tsquery(${this.getTextSearchConfig(language)}, ${query})
      ORDER BY rank DESC
      LIMIT 50
    `
    
    return results
  }
  
  private static getTextSearchConfig(language: string): string {
    const configs: Record<string, string> = {
      'en': 'english',
      'es': 'spanish',
      'fr': 'french',
      'de': 'german',
      'it': 'italian',
      'pt': 'portuguese',
      'default': 'simple'
    }
    
    return configs[language] || configs['default']
  }
}
```

---

## ğŸ“§ é€šçŸ¥ãƒ»ãƒ¡ãƒ¼ãƒ«

### ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã®å¤šè¨€èªå¯¾å¿œ

```typescript
// server/services/email-service.ts
export class EmailService {
  async sendOrderConfirmation(
    order: Order,
    customerEmail: string,
    language: string
  ) {
    // ãƒ¡ãƒ¼ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’è¨€èªåˆ¥ã«å–å¾—
    const template = await this.getEmailTemplate('order_confirmation', language)
    
    const subject = this.replacePlaceholders(template.subject, {
      order_number: order.orderNumber
    })
    
    const body = this.replacePlaceholders(template.body, {
      customer_name: order.customerName,
      order_number: order.orderNumber,
      total_amount: this.formatPrice(order.total, language),
      order_date: this.formatDate(order.createdAt, language)
    })
    
    await this.sendEmail({
      to: customerEmail,
      subject,
      html: body
    })
  }
  
  private async getEmailTemplate(templateType: string, language: string) {
    const template = await prisma.translation.findFirst({
      where: {
        entityType: 'email_template',
        entityId: templateType,
        languageCode: language,
        fieldName: 'subject'
      }
    })
    
    const bodyTemplate = await prisma.translation.findFirst({
      where: {
        entityType: 'email_template',
        entityId: templateType,
        languageCode: language,
        fieldName: 'body'
      }
    })
    
    if (!template || !bodyTemplate) {
      // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: æ—¥æœ¬èª
      return this.getEmailTemplate(templateType, 'ja')
    }
    
    return {
      subject: template.translatedText,
      body: bodyTemplate.translatedText
    }
  }
  
  private replacePlaceholders(text: string, data: Record<string, any>): string {
    return text.replace(/\{\{(\w+)\}\}/g, (match, key) => {
      return data[key] !== undefined ? String(data[key]) : match
    })
  }
}
```

---

## ğŸŒ SEOå¯¾å¿œ

### è¨€èªåˆ¥ã®ãƒ¡ã‚¿ã‚¿ã‚°è¨­å®š

```typescript
// composables/useSEO.ts
export const useSEO = () => {
  const { locale } = useI18n()
  const route = useRoute()
  
  const setLocalizedMeta = (meta: {
    title: Record<string, string>
    description: Record<string, string>
  }) => {
    const currentLang = locale.value
    
    useHead({
      title: meta.title[currentLang] || meta.title['ja'],
      meta: [
        {
          name: 'description',
          content: meta.description[currentLang] || meta.description['ja']
        },
        {
          property: 'og:title',
          content: meta.title[currentLang] || meta.title['ja']
        },
        {
          property: 'og:locale',
          content: getOGLocale(currentLang)
        }
      ],
      link: [
        // hreflang ã‚¿ã‚°ï¼ˆè¨€èªåˆ¥URLï¼‰
        ...generateHreflangTags(route.path)
      ]
    })
  }
  
  const generateHreflangTags = (path: string) => {
    const languages = ['ja', 'en', 'ko', 'zh-CN', 'zh-TW']
    
    return languages.map(lang => ({
      rel: 'alternate',
      hreflang: lang,
      href: `https://example.com/${lang}${path}`
    }))
  }
  
  const getOGLocale = (lang: string): string => {
    const localeMap: Record<string, string> = {
      'ja': 'ja_JP',
      'en': 'en_US',
      'ko': 'ko_KR',
      'zh-CN': 'zh_CN',
      'zh-TW': 'zh_TW'
    }
    return localeMap[lang] || 'ja_JP'
  }
  
  return { setLocalizedMeta }
}
```

---

## ğŸ“¦ ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰é›†

### å®Œå…¨ãªå®Ÿè£…ä¾‹: ãƒ¡ãƒ‹ãƒ¥ãƒ¼å•†å“

#### 1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆæ—¢å­˜ï¼‰

```sql
-- menu_itemsãƒ†ãƒ¼ãƒ–ãƒ«ã¯æ—¢å­˜ã®ã¾ã¾
-- translationsãƒ†ãƒ¼ãƒ–ãƒ«ã§å¤šè¨€èªç®¡ç†
```

#### 2. hotel-common APIå®Ÿè£…

```typescript
// hotel-common/src/routes/admin/menu/items/create.post.ts
import { defineEventHandler, readBody } from 'h3'
import { prisma } from '~/lib/prisma'
import { getTranslationEngine } from '~/services/i18n'

export default defineEventHandler(async (event) => {
  const body = await readBody(event)
  const { 
    name_ja, 
    description_ja, 
    allergen_info_ja,
    price, 
    category_id,
    auto_translate = true 
  } = body
  
  const tenantId = event.context.session.tenantId
  
  // 1. ãƒ¡ãƒ‹ãƒ¥ãƒ¼å•†å“ã‚’ä½œæˆ
  const item = await prisma.menuItem.create({
    data: {
      tenantId,
      price,
      categoryId: category_id
    }
  })
  
  // 2. æ—¥æœ¬èªç¿»è¨³ã‚’ä¿å­˜
  await Promise.all([
    prisma.translation.create({
      data: {
        tenantId,
        entityType: 'menu_item',
        entityId: String(item.id),
        languageCode: 'ja',
        fieldName: 'name',
        translatedText: name_ja,
        translationMethod: 'manual'
      }
    }),
    description_ja && prisma.translation.create({
      data: {
        tenantId,
        entityType: 'menu_item',
        entityId: String(item.id),
        languageCode: 'ja',
        fieldName: 'description',
        translatedText: description_ja,
        translationMethod: 'manual'
      }
    }),
    allergen_info_ja && prisma.translation.create({
      data: {
        tenantId,
        entityType: 'menu_item',
        entityId: String(item.id),
        languageCode: 'ja',
        fieldName: 'allergen_info',
        translatedText: allergen_info_ja,
        translationMethod: 'manual'
      }
    })
  ].filter(Boolean))
  
  // 3. è‡ªå‹•ç¿»è¨³ã‚¸ãƒ§ãƒ–ã‚’ä½œæˆ
  let jobId: string | undefined
  if (auto_translate) {
    const engine = getTranslationEngine()
    const sourceTexts: Record<string, string> = { name: name_ja }
    if (description_ja) sourceTexts.description = description_ja
    if (allergen_info_ja) sourceTexts.allergen_info = allergen_info_ja
    
    jobId = await engine.translateEntity(
      'menu_item',
      String(item.id),
      'ja',
      sourceTexts,
      ['en', 'ko', 'zh-CN', 'zh-TW', 'th', 'vi', 'id', 'ms', 'tl', 'es', 'fr', 'de', 'it', 'pt']
    )
  }
  
  return { 
    success: true, 
    data: { 
      id: item.id, 
      translationJobId: jobId 
    } 
  }
})
```

#### 3. hotel-saas ãƒ—ãƒ­ã‚­ã‚·API

```typescript
// hotel-saas/server/api/v1/admin/menu/items/create.post.ts
export default defineEventHandler(async (event) => {
  const body = await readBody(event)
  
  const response = await $fetch(
    'http://localhost:3400/api/v1/admin/menu/items/create',
    {
      method: 'POST',
      body,
      credentials: 'include',
      headers: {
        cookie: event.node.req.headers.cookie || ''
      }
    }
  )
  
  return response
})
```

#### 4. hotel-saas ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

```vue
<!-- hotel-saas/pages/admin/menu/items/create.vue -->
<template>
  <div class="admin-page">
    <h1>{{ $t('admin.menu.create.title') }}</h1>
    
    <form @submit.prevent="handleSubmit" class="form">
      <div class="form-section">
        <h2>åŸºæœ¬æƒ…å ±ï¼ˆæ—¥æœ¬èªï¼‰</h2>
        
        <div class="form-group">
          <label>å•†å“åï¼ˆæ—¥æœ¬èªï¼‰*</label>
          <input v-model="form.name_ja" type="text" required />
        </div>
        
        <div class="form-group">
          <label>èª¬æ˜ï¼ˆæ—¥æœ¬èªï¼‰</label>
          <textarea v-model="form.description_ja" rows="4" />
        </div>
        
        <div class="form-group">
          <label>ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼æƒ…å ±ï¼ˆæ—¥æœ¬èªï¼‰</label>
          <input v-model="form.allergen_info_ja" type="text" />
        </div>
        
        <div class="form-group">
          <label>ä¾¡æ ¼*</label>
          <input v-model.number="form.price" type="number" required />
        </div>
      </div>
      
      <div class="form-section">
        <h2>å¤šè¨€èªå¯¾å¿œ</h2>
        
        <label class="checkbox-label">
          <input v-model="form.auto_translate" type="checkbox" />
          <span>ä¿å­˜æ™‚ã«è‡ªå‹•çš„ã«15è¨€èªã¸ç¿»è¨³ã™ã‚‹</span>
        </label>
      </div>
      
      <div class="form-actions">
        <button type="button" @click="$router.back()" class="btn-secondary">
          ã‚­ãƒ£ãƒ³ã‚»ãƒ«
        </button>
        <button type="submit" class="btn-primary" :disabled="isSubmitting">
          {{ isSubmitting ? 'ä¿å­˜ä¸­...' : 'ä¿å­˜' }}
        </button>
      </div>
    </form>
  </div>
</template>

<script setup lang="ts">
const form = ref({
  name_ja: '',
  description_ja: '',
  allergen_info_ja: '',
  price: 0,
  auto_translate: true
})

const isSubmitting = ref(false)

const handleSubmit = async () => {
  isSubmitting.value = true
  
  try {
    const response = await $fetch('/api/v1/admin/menu/items/create', {
      method: 'POST',
      body: form.value
    })
    
    if (response.success) {
      toast.success('ä½œæˆã—ã¾ã—ãŸ')
      await navigateTo('/admin/menu/items')
    }
  } catch (error) {
    toast.error('ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ', error.message)
  } finally {
    isSubmitting.value = false
  }
}
</script>
```

---

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ1: ç¿»è¨³ãŒè¡¨ç¤ºã•ã‚Œãªã„

**ç—‡çŠ¶**: è¨€èªã‚’åˆ‡ã‚Šæ›¿ãˆã¦ã‚‚ç¿»è¨³ãŒè¡¨ç¤ºã•ã‚Œãšã€`[Translation Missing]`ãŒè¡¨ç¤ºã•ã‚Œã‚‹

**åŸå› ã¨è§£æ±ºç­–**:

```typescript
// 1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç¢ºèª
const translations = await prisma.translation.findMany({
  where: { 
    entityType: 'menu_item',
    entityId: '123',
    languageCode: 'ko' 
  }
})
console.log('Translations:', translations)
// â†’ ç©ºé…åˆ—ã®å ´åˆ: ç¿»è¨³ãƒ‡ãƒ¼ã‚¿ãŒå­˜åœ¨ã—ãªã„

// 2. ç¿»è¨³ã‚¸ãƒ§ãƒ–ã®çŠ¶æ…‹ç¢ºèª
const job = await prisma.translationJob.findFirst({
  where: {
    entityType: 'menu_item',
    entityId: '123'
  },
  orderBy: { createdAt: 'desc' }
})
console.log('Job status:', job?.status)
console.log('Error details:', job?.errorDetails)
// â†’ status='failed'ã®å ´åˆ: ç¿»è¨³ã‚¸ãƒ§ãƒ–ãŒå¤±æ•—

// 3. æ‰‹å‹•ã§ç¿»è¨³ã‚’å†å®Ÿè¡Œ
const engine = getTranslationEngine()
await engine.translateEntity(
  'menu_item',
  '123',
  'ja',
  { name: 'å•†å“å', description: 'èª¬æ˜' },
  ['ko']  // å¤±æ•—ã—ãŸè¨€èªã®ã¿
)
```

### å•é¡Œ2: ç¿»è¨³ã‚¸ãƒ§ãƒ–ãŒå®Œäº†ã—ãªã„

**ç—‡çŠ¶**: ç¿»è¨³ã‚¸ãƒ§ãƒ–ã®statusãŒ`pending`ã®ã¾ã¾å¤‰ã‚ã‚‰ãªã„

**åŸå› ã¨è§£æ±ºç­–**:

```typescript
// 1. ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ãƒ¯ãƒ¼ã‚«ãƒ¼ã®çŠ¶æ…‹ç¢ºèª
// hotel-common ã®ãƒ­ã‚°ã‚’ç¢ºèª
// â†’ ãƒ¯ãƒ¼ã‚«ãƒ¼ãŒèµ·å‹•ã—ã¦ã„ãªã„å¯èƒ½æ€§

// 2. æ‰‹å‹•ã§ã‚¸ãƒ§ãƒ–ã‚’å‡¦ç†
import { TranslationJobProcessor } from '~/services/i18n/job-processor'

const processor = new TranslationJobProcessor()
await processor.processJob('job_abc123')

// 3. Google Translate API ã®èªè¨¼ç¢ºèª
// .env ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèª
// GOOGLE_TRANSLATE_API_KEY=your_api_key_here
```

### å•é¡Œ3: ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãŒæ©Ÿèƒ½ã—ãªã„

**ç—‡çŠ¶**: éŸ“å›½èªç¿»è¨³ãŒãªã„å ´åˆã«è‹±èªãŒè¡¨ç¤ºã•ã‚Œãšã€ç©ºç™½ã«ãªã‚‹

**åŸå› ã¨è§£æ±ºç­–**:

```typescript
// APIå´ã§ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†ã‚’å®Ÿè£…
const getTranslationWithFallback = async (
  entityType: string,
  entityId: string,
  fieldName: string,
  languageCode: string
): Promise<string> => {
  // 1. æŒ‡å®šè¨€èªã‚’è©¦ã™
  let translation = await prisma.translation.findFirst({
    where: { entityType, entityId, languageCode, fieldName }
  })
  
  if (translation) return translation.translatedText
  
  // 2. è‹±èªã‚’è©¦ã™
  if (languageCode !== 'en') {
    translation = await prisma.translation.findFirst({
      where: { entityType, entityId, languageCode: 'en', fieldName }
    })
    if (translation) return translation.translatedText
  }
  
  // 3. æ—¥æœ¬èªã‚’è©¦ã™
  if (languageCode !== 'ja') {
    translation = await prisma.translation.findFirst({
      where: { entityType, entityId, languageCode: 'ja', fieldName }
    })
    if (translation) return translation.translatedText
  }
  
  return '[Translation Missing]'
}
```

### å•é¡Œ4: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒæ›´æ–°ã•ã‚Œãªã„

**ç—‡çŠ¶**: ç¿»è¨³ã‚’æ›´æ–°ã—ãŸã®ã«å¤ã„ç¿»è¨³ãŒè¡¨ç¤ºã•ã‚Œç¶šã‘ã‚‹

**åŸå› ã¨è§£æ±ºç­–**:

```typescript
// ç¿»è¨³æ›´æ–°æ™‚ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ç„¡åŠ¹åŒ–
const updateTranslation = async (
  translationId: string,
  newText: string
) => {
  const translation = await prisma.translation.update({
    where: { id: translationId },
    data: { translatedText: newText }
  })
  
  // âœ… ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹åŒ–
  const cacheKey = `translations:${translation.entityType}:${translation.entityId}:${translation.languageCode}`
  await redis.del(cacheKey)
  
  return translation
}
```

---

## âŒ ã‚ˆãã‚ã‚‹é–“é•ã„ã¨ä¿®æ­£æ–¹æ³•

### é–“é•ã„1: è¨€èªåˆ¥ã‚«ãƒ©ãƒ ã‚’è¿½åŠ 

```sql
-- âŒ é–“é•ã„
ALTER TABLE items ADD COLUMN name_en TEXT;
ALTER TABLE items ADD COLUMN name_ko TEXT;
```

**âœ… ä¿®æ­£**:
```sql
-- translationsãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½¿ç”¨
INSERT INTO translations (entity_type, entity_id, language_code, field_name, translated_text)
VALUES ('item', '123', 'en', 'name', 'Item Name');
```

### é–“é•ã„2: ç›´æ¥æ—¥æœ¬èªã‚’æ›¸ã

```vue
<!-- âŒ é–“é•ã„ -->
<h1>ãƒ¡ãƒ‹ãƒ¥ãƒ¼</h1>
```

**âœ… ä¿®æ­£**:
```vue
<!-- ç¿»è¨³ã‚­ãƒ¼ã‚’ä½¿ç”¨ -->
<h1>{{ $t('menu.title') }}</h1>
```

### é–“é•ã„3: è¨€èªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å¿˜ã‚Œã‚‹

```typescript
// âŒ é–“é•ã„
const items = await $fetch('/api/v1/guest/items')
```

**âœ… ä¿®æ­£**:
```typescript
// è¨€èªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å«ã‚ã‚‹
const { locale } = useI18n()
const items = await $fetch('/api/v1/guest/items', {
  params: { lang: locale.value }
})
```

### é–“é•ã„4: è‡ªå‹•ç¿»è¨³ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å¿˜ã‚Œã‚‹

```typescript
// âŒ é–“é•ã„: è‡ªå‹•ç¿»è¨³ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãªã—
await $fetch('/api/v1/admin/items/create', {
  method: 'POST',
  body: { name_ja: 'å•†å“å', description_ja: 'èª¬æ˜' }
})
```

**âœ… ä¿®æ­£**:
```typescript
// è‡ªå‹•ç¿»è¨³ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å«ã‚ã‚‹
await $fetch('/api/v1/admin/items/create', {
  method: 'POST',
  body: {
    name_ja: 'å•†å“å',
    description_ja: 'èª¬æ˜',
    auto_translate: true  // âœ… è¿½åŠ 
  }
})
```

### é–“é•ã„5: entity_idã®å‹ä¸ä¸€è‡´

```typescript
// âŒ é–“é•ã„: Intå‹ã®IDã‚’æ•°å€¤ã§ä¿å­˜
await prisma.translation.create({
  data: {
    entityType: 'menu_item',
    entityId: 123,  // â† æ•°å€¤ï¼ˆã‚¨ãƒ©ãƒ¼ï¼‰
    ...
  }
})
```

**âœ… ä¿®æ­£**:
```typescript
// Intå‹ã®IDã¯æ–‡å­—åˆ—åŒ–ã—ã¦ä¿å­˜
await prisma.translation.create({
  data: {
    entityType: 'menu_item',
    entityId: String(123),  // â† æ–‡å­—åˆ—åŒ–
    ...
  }
})
```

---

## ğŸ“‹ å®Ÿè£…æ™‚ã®è³ªå•ãƒ•ãƒ­ãƒ¼

```
æ–°æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹
    â†“
ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ãƒ†ã‚­ã‚¹ãƒˆãŒã‚ã‚‹ï¼Ÿ
    â†“ YES
ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã™ã‚‹ï¼Ÿ
    â†“ YES
translationsãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½¿ç”¨
    â†“
ç®¡ç†ç”»é¢ã§ç·¨é›†ã™ã‚‹ï¼Ÿ
    â†“ YES
è‡ªå‹•ç¿»è¨³UIã‚’å®Ÿè£…
    â†“
å®¢å®¤ç«¯æœ«ã§è¡¨ç¤ºã™ã‚‹ï¼Ÿ
    â†“ YES
è¨€èªåˆ‡ã‚Šæ›¿ãˆå¯¾å¿œ
    â†“
ãƒ†ã‚¹ãƒˆå®Ÿæ–½
    â†“
å®Œäº†
```

---

## ğŸ“š å‚è€ƒè³‡æ–™

### å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [Google Cloud Translation API](https://cloud.google.com/translate/docs)
- [Nuxt I18n](https://i18n.nuxtjs.org/)
- [PostgreSQL Full Text Search](https://www.postgresql.org/docs/current/textsearch.html)

### å†…éƒ¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [SSOT_MULTILINGUAL_SYSTEM.md](./SSOT_MULTILINGUAL_SYSTEM.md) - å¤šè¨€èªåŒ–ã‚·ã‚¹ãƒ†ãƒ ä»•æ§˜
- [DATABASE_NAMING_STANDARD.md](/Users/kaneko/hotel-kanri/docs/standards/DATABASE_NAMING_STANDARD.md) - å‘½åè¦å‰‡
- [API_ROUTING_GUIDELINES.md](/Users/kaneko/hotel-kanri/docs/01_systems/saas/API_ROUTING_GUIDELINES.md) - APIãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

---

## ğŸ“ å¤‰æ›´å±¥æ­´

| ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | æ—¥ä»˜ | å¤‰æ›´å†…å®¹ |
|-----------|------|---------|
| 1.0.0 | 2025-10-07 | åˆç‰ˆä½œæˆï¼ˆSSOT_MULTILINGUAL_SYSTEM.md v2.0.0ã‹ã‚‰åˆ†é›¢ï¼‰ |

---

**ä½œæˆè€…**: Izaï¼ˆçµ±åˆç®¡ç†è€…ï¼‰  
**æ‰¿èªè€…**: -  
**æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼äºˆå®š**: Phase 1å®Ÿè£…é–‹å§‹æ™‚

