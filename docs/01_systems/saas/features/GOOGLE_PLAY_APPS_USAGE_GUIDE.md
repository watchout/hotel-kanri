# Google Playアプリ選択機能 利用ガイド

## 概要

Google Playアプリ選択機能を使用すると、ホテルの客室TVシステムで利用可能なアプリを管理できます。この機能により、以下のことが可能になります：

- Google Playアプリの登録と管理
- 場所（客室など）ごとのアプリ設定
- レイアウトブロックごとのアプリ表示設定
- クライアント側でのアプリ表示と起動

## 管理者向け機能

### 1. Google Playアプリの管理

#### アプリ一覧の表示

1. 管理画面にログインします
2. サイドバーから「コンテンツ」→「Google Playアプリ」を選択します
3. 登録済みのアプリ一覧が表示されます

#### アプリの検索とフィルタリング

- 検索ボックスにアプリ名やパッケージ名を入力して検索できます
- カテゴリや承認状態でフィルタリングできます

#### 新規アプリの追加

1. アプリ一覧画面で「新規アプリ追加」ボタンをクリックします
2. 必要情報を入力します：
   - パッケージ名（必須）：例 `com.netflix.mediaclient`
   - 表示名（必須）：例 `Netflix`
   - 説明：アプリの説明文
   - カテゴリ：適切なカテゴリを選択
   - アイコンURL：アプリアイコンの画像URL
   - ディープリンクURL：アプリを起動するためのURL
   - 承認状態：チェックすると承認済みとして登録
3. 「登録」ボタンをクリックして保存します

#### アプリの編集

1. アプリ一覧から編集したいアプリの編集アイコンをクリックします
2. 情報を更新し、「更新」ボタンをクリックします

#### アプリの承認/非承認

- アプリ一覧でチェック/バツアイコンをクリックすると承認状態を切り替えられます
- 承認済みのアプリのみが客室で表示されます

### 2. 場所別アプリ設定

#### 場所ごとのアプリ設定

1. サイドバーから「コンテンツ」→「場所管理」を選択します
2. 設定したい場所（客室など）を選択します
3. 「アプリ設定」タブを選択します
4. 利用可能なアプリ一覧から表示したいアプリを選択します
5. 選択したアプリにはカスタムラベルや表示順序を設定できます

### 3. レイアウトブロック別アプリ設定

#### レイアウトエディタでのアプリブロック設定

1. サイドバーから「UIデザイン」→「レイアウト」を選択します
2. 編集したいレイアウトを選択します
3. アプリブロックを追加または選択します
4. ブロックの設定パネルで「アプリ設定」を選択します
5. 以下の設定が可能です：
   - レイアウト：グリッド、リスト、カルーセル
   - 表示アプリ数：最大表示数
   - アプリ名表示：ON/OFF
   - 説明文表示：ON/OFF
   - 表示するアプリの選択と順序の設定

## クライアント側機能

### 1. アプリランチャーの表示

- TVシステムのTOPページやランチャーページにアプリ一覧が表示されます
- 設定に応じたレイアウト（グリッド、リスト、カルーセル）で表示されます

### 2. アプリの起動

- アプリアイコンをクリックすると、対応するアプリが起動します
- Android TV環境では、ネイティブアプリとして起動します
- その他の環境では、ディープリンクURLを使用してブラウザで開きます

## 技術情報

### APIエンドポイント

#### 管理者用API

- `GET /api/apps/google-play` - アプリ一覧取得
- `GET /api/apps/google-play/:id` - アプリ詳細取得
- `POST /api/apps/google-play` - アプリ登録
- `PUT /api/apps/google-play/:id` - アプリ更新
- `PATCH /api/apps/google-play/:id/approve` - アプリ承認/非承認

#### 場所別アプリ設定API

- `GET /api/places/:placeId/apps` - 場所別アプリ一覧取得
- `POST /api/places/:placeId/apps` - 場所別アプリ追加
- `PUT /api/places/:placeId/apps/:appId` - 場所別アプリ更新
- `DELETE /api/places/:placeId/apps/:appId` - 場所別アプリ削除

#### レイアウトブロック別アプリAPI

- `GET /api/layouts/:layoutId/blocks/:blockId/apps` - レイアウトブロック別アプリ設定取得
- `PUT /api/layouts/:layoutId/blocks/:blockId/apps` - レイアウトブロック別アプリ設定更新

#### クライアント用API

- `GET /api/client/places/:placeId/apps` - 利用可能アプリ一覧取得

### コンポーネント

- `GooglePlayAppLauncher.vue` - クライアント側アプリランチャーコンポーネント
- `AppBlockSettings.vue` - レイアウトブロックのアプリ設定コンポーネント
- `AddAppModal.vue` - アプリ追加モーダル
- `EditAppModal.vue` - アプリ編集モーダル

## トラブルシューティング

### アプリが表示されない場合

1. アプリが承認されているか確認してください
2. 場所（客室）にアプリが割り当てられているか確認してください
3. レイアウトブロックの設定を確認してください
4. ブラウザのコンソールでエラーメッセージを確認してください

### アプリが起動しない場合

1. パッケージ名が正しいか確認してください
2. ディープリンクURLが正しいか確認してください
3. Android TVシステムの場合、アプリがインストールされているか確認してください

## サポート

問題が解決しない場合は、システム管理者にお問い合わせください。
