# ãƒ•ãƒ­ãƒ³ãƒˆæ¥­å‹™æ©Ÿèƒ½ è¦ä»¶å®šç¾©æ›¸

## ğŸ“‹ æ¦‚è¦

### **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå**
Hotel SaaS ãƒ•ãƒ­ãƒ³ãƒˆæ¥­å‹™æ©Ÿèƒ½ï¼ˆMVPç‰ˆï¼‰

### **ç›®çš„**
ãƒ›ãƒ†ãƒ«ãƒ•ãƒ­ãƒ³ãƒˆã‚¹ã‚¿ãƒƒãƒ•ãŒè¡Œã†åŸºæœ¬çš„ãªãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ãƒ»ä¼šè¨ˆãƒ»ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆæ¥­å‹™ã‚’ãƒ‡ã‚¸ã‚¿ãƒ«åŒ–ã—ã€åŠ¹ç‡çš„ãªå®¢å®¤ç®¡ç†ã‚’å®Ÿç¾ã™ã‚‹ã€‚

### **ã‚¹ã‚³ãƒ¼ãƒ—**
- ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³å‡¦ç†ï¼ˆå®¢å®¤çŠ¶æ…‹ç®¡ç†ï¼‰
- ä¼šè¨ˆå‡¦ç†ï¼ˆæ³¨æ–‡æ˜ç´°ãƒ»é‡‘é¡è¡¨ç¤ºï¼‰
- ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆå‡¦ç†ï¼ˆãƒ«ãƒ¼ãƒ ã‚µãƒ¼ãƒ“ã‚¹åˆ¶é™ï¼‰
- Webé ˜åæ›¸ãƒ»ãƒ¬ã‚·ãƒ¼ãƒˆç™ºè¡Œ

## ğŸ¯ ãƒ“ã‚¸ãƒã‚¹è¦ä»¶

### **è§£æ±ºã—ãŸã„èª²é¡Œ**
1. **æ‰‹ä½œæ¥­ã«ã‚ˆã‚‹éåŠ¹ç‡æ€§**: ç´™ãƒ™ãƒ¼ã‚¹ã®ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ãƒ»ã‚¢ã‚¦ãƒˆç®¡ç†
2. **ä¼šè¨ˆãƒŸã‚¹ã®ãƒªã‚¹ã‚¯**: æ‰‹è¨ˆç®—ã«ã‚ˆã‚‹è¨ˆç®—é–“é•ã„
3. **å®¢å®¤çŠ¶æ…‹ã®ä¸é€æ˜æ€§**: åˆ©ç”¨å¯èƒ½å®¢å®¤ã®å³åº§æŠŠæ¡å›°é›£
4. **ãƒ«ãƒ¼ãƒ ã‚µãƒ¼ãƒ“ã‚¹åˆ¶å¾¡**: ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆå¾Œã®èª¤æ³¨æ–‡é˜²æ­¢

### **é”æˆç›®æ¨™**
1. **æ¥­å‹™åŠ¹ç‡åŒ–**: ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ãƒ»ã‚¢ã‚¦ãƒˆå‡¦ç†æ™‚é–“ã®50%çŸ­ç¸®
2. **ãƒŸã‚¹å‰Šæ¸›**: ä¼šè¨ˆè¨ˆç®—ã®è‡ªå‹•åŒ–ã«ã‚ˆã‚‹äººçš„ãƒŸã‚¹æ’é™¤
3. **çŠ¶æ…‹ç®¡ç†**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å®¢å®¤çŠ¶æ…‹æŠŠæ¡
4. **é¡§å®¢ä½“é¨“å‘ä¸Š**: QRã‚³ãƒ¼ãƒ‰ã«ã‚ˆã‚‹é ˜åæ›¸å³æ™‚ç™ºè¡Œ

## ğŸ“Š æ©Ÿèƒ½è¦ä»¶

### **ãƒ•ã‚§ãƒ¼ã‚º1: åŸºæœ¬ãƒ•ãƒ­ãƒ³ãƒˆæ¥­å‹™**

#### **F001: å®¢å®¤çŠ¶æ…‹ç®¡ç†**
**æ¦‚è¦**: å®¢å®¤ã®åˆ©ç”¨çŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ã¨æ©Ÿèƒ½

**ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ**:
```prisma
model RoomStatus {
  id          Int      @id @default(autoincrement())
  placeId     Int      @unique           // æ—¢å­˜ã®Placeãƒ†ãƒ¼ãƒ–ãƒ«ã¨é–¢é€£ä»˜ã‘
  status      String   @default("available")  // "available" | "occupied" | "checkout_pending"
  checkinAt   DateTime?                // ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³æ—¥æ™‚
  checkoutAt  DateTime?                // ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆæ—¥æ™‚
  guestCount  Int?                     // å®¿æ³Šäººæ•°ï¼ˆå°†æ¥æ‹¡å¼µç”¨ï¼‰
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  place       Place    @relation(fields: [placeId], references: [id])
  
  @@index([status])
  @@index([placeId])
}

model Receipt {
  id          String   @id @default(uuid())
  placeId     Int                       // Place ã¨ã®é–¢é€£
  receiptData Json                      // é ˜åæ›¸ãƒ‡ãƒ¼ã‚¿
  totalAmount Int                       // åˆè¨ˆé‡‘é¡
  createdAt   DateTime @default(now())
  isDeleted   Boolean  @default(false)
  place       Place    @relation(fields: [placeId], references: [id])
  
  @@index([placeId])
  @@index([createdAt])
}
```

**çŠ¶æ…‹é·ç§»**:
```
available (åˆ©ç”¨å¯èƒ½)
    â†“ ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³å‡¦ç†
occupied (åˆ©ç”¨ä¸­)
    â†“ ä¼šè¨ˆå‡¦ç†å®Œäº†
checkout_pending (ç²¾ç®—æ¸ˆã¿ãƒ»ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆå¾…ã¡)
    â†“ ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆå‡¦ç†
available (åˆ©ç”¨å¯èƒ½)
```

**å—å…¥æ¡ä»¶**:
- [ ] å®¢å®¤çŠ¶æ…‹ã®æ­£ç¢ºãªç®¡ç†
- [ ] çŠ¶æ…‹é·ç§»ã®æ•´åˆæ€§ç¢ºä¿
- [ ] æ—¢å­˜Placeãƒ†ãƒ¼ãƒ–ãƒ«ã¨ã®æ•´åˆæ€§

#### **F002: ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³å‡¦ç†**
**æ¦‚è¦**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¹ã‚¿ãƒƒãƒ•ã«ã‚ˆã‚‹å®¢å®¤ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³æ“ä½œ

**UIä»•æ§˜**:
- å®¢å®¤ç•ªå·é¸æŠï¼ˆãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã¾ãŸã¯æ¤œç´¢ï¼‰
- ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³æ—¥æ™‚ï¼ˆè‡ªå‹•å…¥åŠ›ãƒ»æ‰‹å‹•èª¿æ•´å¯èƒ½ï¼‰
- ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³å®Ÿè¡Œãƒœã‚¿ãƒ³

**APIä»•æ§˜**:
```typescript
// POST /api/v1/admin/front-desk/checkin
interface CheckinRequest {
  placeId: number;        // æ—¢å­˜ã®Place IDã‚’ä½¿ç”¨
  checkinAt?: string;     // ISO 8601 format, ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ç¾åœ¨æ™‚åˆ»
  guestCount?: number;    // å°†æ¥æ‹¡å¼µç”¨
}

interface CheckinResponse {
  success: boolean;
  roomStatus: {
    placeId: number;
    roomCode: string;     // Place.code (å®¢å®¤ç•ªå·)
    status: 'occupied';
    checkinAt: string;
  };
  message: string;
}
```

**å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
1. å®¢å®¤ã®ç¾åœ¨çŠ¶æ…‹ç¢ºèªï¼ˆavailable ã§ãªã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼ï¼‰
2. RoomStatus ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆ/æ›´æ–°
3. çŠ¶æ…‹ã‚’ `occupied` ã«å¤‰æ›´
4. ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³æ—¥æ™‚è¨˜éŒ²

**å—å…¥æ¡ä»¶**:
- [ ] åˆ©ç”¨å¯èƒ½å®¢å®¤ã®ã¿ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³å¯èƒ½
- [ ] ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³æ—¥æ™‚ã®æ­£ç¢ºãªè¨˜éŒ²
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆé‡è¤‡ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ç­‰ï¼‰

#### **F003: ä¼šè¨ˆå‡¦ç†æ©Ÿèƒ½**
**æ¦‚è¦**: å®¢å®¤ã®ãƒ«ãƒ¼ãƒ ã‚µãƒ¼ãƒ“ã‚¹åˆ©ç”¨æ–™é‡‘ã®é›†è¨ˆã¨è¡¨ç¤º

**ä¼šè¨ˆç”»é¢UI**:
```vue
<!-- ä¼šè¨ˆå‡¦ç†ç”»é¢ -->
<div class="billing-screen">
  <!-- å®¢å®¤é¸æŠ -->
  <div class="room-selector">
    <select v-model="selectedRoomId">
      <option value="">å®¢å®¤ã‚’é¸æŠã—ã¦ãã ã•ã„</option>
      <option v-for="room in occupiedRooms" :value="room.roomId">
        {{ room.roomId }} ({{ formatDate(room.checkinAt) }})
      </option>
    </select>
  </div>
  
  <!-- æ³¨æ–‡æ˜ç´° -->
  <div v-if="billingData" class="billing-details">
    <h3>ã”åˆ©ç”¨æ˜ç´°</h3>
    <div class="order-list">
      <div v-for="order in billingData.orders" class="order-item">
        <div class="order-header">
          æ³¨æ–‡æ—¥æ™‚: {{ formatDateTime(order.createdAt) }}
        </div>
        <div v-for="item in order.items" class="item-row">
          <span>{{ item.name }}</span>
          <span>{{ item.quantity }}ç‚¹</span>
          <span>Â¥{{ item.price.toLocaleString() }}</span>
        </div>
      </div>
    </div>
    
    <!-- åˆè¨ˆé‡‘é¡ -->
    <div class="billing-summary">
      <div class="subtotal">å°è¨ˆ: Â¥{{ billingData.subtotal.toLocaleString() }}</div>
      <div class="tax">æ¶ˆè²»ç¨: Â¥{{ billingData.tax.toLocaleString() }}</div>
      <div class="total">åˆè¨ˆ: Â¥{{ billingData.total.toLocaleString() }}</div>
    </div>
    
    <!-- ä¼šè¨ˆç¢ºå®šãƒœã‚¿ãƒ³ -->
    <button @click="confirmBilling" class="confirm-billing-btn">
      ä¼šè¨ˆç¢ºå®š
    </button>
  </div>
</div>
```

**APIä»•æ§˜**:
```typescript
// GET /api/v1/admin/front-desk/billing/:roomId
interface BillingResponse {
  roomId: string;
  checkinAt: string;
  orders: Array<{
    id: number;
    createdAt: string;
    items: Array<{
      name: string;
      quantity: number;
      price: number;
    }>;
    total: number;
  }>;
  subtotal: number;        // ç¨æŠœãåˆè¨ˆ
  tax: number;             // æ¶ˆè²»ç¨é¡
  total: number;           // ç¨è¾¼ã¿åˆè¨ˆ
  receiptUrl?: string;     // é ˜åæ›¸URLï¼ˆä¼šè¨ˆç¢ºå®šå¾Œï¼‰
}

// POST /api/v1/admin/front-desk/billing/:roomId/confirm
interface BillingConfirmResponse {
  success: boolean;
  receiptId: string;
  receiptUrl: string;      // QRã‚³ãƒ¼ãƒ‰è¡¨ç¤ºç”¨URL
  qrCodeUrl: string;       // QRã‚³ãƒ¼ãƒ‰ç”»åƒURL
}
```

**å—å…¥æ¡ä»¶**:
- [ ] æ­£ç¢ºãªé‡‘é¡è¨ˆç®—ï¼ˆç¨è¾¼ã¿ãƒ»ç¨æŠœãï¼‰
- [ ] æ³¨æ–‡æ˜ç´°ã®å®Œå…¨ãªè¡¨ç¤º
- [ ] ä¼šè¨ˆç¢ºå®šå¾Œã®çŠ¶æ…‹å¤‰æ›´

#### **F004: Webé ˜åæ›¸ãƒ»ãƒ¬ã‚·ãƒ¼ãƒˆæ©Ÿèƒ½**
**æ¦‚è¦**: QRã‚³ãƒ¼ãƒ‰ã«ã‚ˆã‚‹Webé ˜åæ›¸ã®ç™ºè¡Œã‚·ã‚¹ãƒ†ãƒ 

**é ˜åæ›¸ãƒ‡ãƒ¼ã‚¿æ§‹é€ **:
```typescript
interface Receipt {
  id: string;              // ãƒ¦ãƒ‹ãƒ¼ã‚¯ ID
  roomId: string;
  issueDate: string;       // ç™ºè¡Œæ—¥æ™‚
  checkinDate: string;     // ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³æ—¥æ™‚
  orders: Array<{
    date: string;
    items: Array<{
      name: string;
      quantity: number;
      unitPrice: number;
      amount: number;
    }>;
  }>;
  subtotal: number;
  tax: number;
  total: number;
  hotelInfo: {
    name: string;
    address: string;
    phone: string;
    registration: string;   // ç™»éŒ²ç•ªå·
  };
}
```

**Webé ˜åæ›¸ãƒšãƒ¼ã‚¸**:
```vue
<!-- /receipt/:receiptId -->
<template>
  <div class="receipt-page">
    <div class="receipt-header">
      <h1>ã”åˆ©ç”¨æ˜ç´°æ›¸ãƒ»é ˜åæ›¸</h1>
      <div class="hotel-info">
        <h2>{{ receipt.hotelInfo.name }}</h2>
        <p>{{ receipt.hotelInfo.address }}</p>
        <p>TEL: {{ receipt.hotelInfo.phone }}</p>
      </div>
    </div>
    
    <div class="receipt-body">
      <div class="guest-info">
        <p>å®¢å®¤ç•ªå·: {{ receipt.roomId }}</p>
        <p>ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³: {{ formatDate(receipt.checkinDate) }}</p>
        <p>ç™ºè¡Œæ—¥æ™‚: {{ formatDateTime(receipt.issueDate) }}</p>
      </div>
      
      <div class="order-details">
        <h3>ã”åˆ©ç”¨æ˜ç´°</h3>
        <table>
          <thead>
            <tr>
              <th>æ—¥æ™‚</th>
              <th>å•†å“å</th>
              <th>æ•°é‡</th>
              <th>å˜ä¾¡</th>
              <th>é‡‘é¡</th>
            </tr>
          </thead>
          <tbody>
            <tr v-for="(order, orderIndex) in receipt.orders" :key="orderIndex">
              <td rowspan="order.items.length + 1">{{ formatDate(order.date) }}</td>
            </tr>
            <template v-for="(order, orderIndex) in receipt.orders" :key="orderIndex">
              <tr v-for="item in order.items" :key="item.name">
                <td>{{ item.name }}</td>
                <td>{{ item.quantity }}</td>
                <td>Â¥{{ item.unitPrice.toLocaleString() }}</td>
                <td>Â¥{{ item.amount.toLocaleString() }}</td>
              </tr>
            </template>
          </tbody>
        </table>
      </div>
      
      <div class="receipt-summary">
        <div class="subtotal">å°è¨ˆ: Â¥{{ receipt.subtotal.toLocaleString() }}</div>
        <div class="tax">æ¶ˆè²»ç¨(10%): Â¥{{ receipt.tax.toLocaleString() }}</div>
        <div class="total">åˆè¨ˆ: Â¥{{ receipt.total.toLocaleString() }}</div>
      </div>
    </div>
    
    <div class="receipt-footer">
      <button @click="downloadPDF" class="download-btn">
        PDFå½¢å¼ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
      </button>
      <p class="note">ã“ã®é ˜åæ›¸ã¯æ­£å¼ãªé ˜åæ›¸ã¨ã—ã¦åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚</p>
    </div>
  </div>
</template>
```

**å—å…¥æ¡ä»¶**:
- [ ] QRã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹
- [ ] PDF ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
- [ ] ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–

#### **F005: ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆå‡¦ç†**
**æ¦‚è¦**: ä¼šè¨ˆç¢ºå®šå¾Œã®ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆæ“ä½œã¨ãƒ«ãƒ¼ãƒ ã‚µãƒ¼ãƒ“ã‚¹åˆ¶é™

**ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆå‡¦ç†**:
```typescript
// POST /api/v1/admin/front-desk/checkout/:roomId
interface CheckoutRequest {
  roomId: string;
  checkoutAt?: string; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ç¾åœ¨æ™‚åˆ»
}

interface CheckoutResponse {
  success: boolean;
  roomStatus: {
    roomId: string;
    status: 'available';
    checkoutAt: string;
  };
  message: string;
}
```

**ãƒ«ãƒ¼ãƒ ã‚µãƒ¼ãƒ“ã‚¹åˆ¶é™æ©Ÿèƒ½**:
```typescript
// æ³¨æ–‡APIå´ã§ã®çŠ¶æ…‹ãƒã‚§ãƒƒã‚¯è¿½åŠ 
// /api/v1/orders/* ã§ã®èªè¨¼æ™‚
const roomStatus = await prisma.roomStatus.findUnique({
  where: { roomId: session.user.roomNumber }
});

if (!roomStatus || roomStatus.status !== 'occupied') {
  throw createError({
    statusCode: 403,
    message: 'ã“ã®å®¢å®¤ã§ã¯ãƒ«ãƒ¼ãƒ ã‚µãƒ¼ãƒ“ã‚¹ã‚’ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã›ã‚“'
  });
}
```

**å—å…¥æ¡ä»¶**:
- [ ] ä¼šè¨ˆç¢ºå®šæ¸ˆã¿å®¢å®¤ã®ã¿ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆå¯èƒ½
- [ ] ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆå¾Œã®ãƒ«ãƒ¼ãƒ ã‚µãƒ¼ãƒ“ã‚¹æ³¨æ–‡æ‹’å¦
- [ ] å®¢å®¤çŠ¶æ…‹ã® `available` ã¸ã®å¤‰æ›´

### **ãƒ•ã‚§ãƒ¼ã‚º2: æ‹¡å¼µæ©Ÿèƒ½**

#### **F006: ãƒ•ãƒ­ãƒ³ãƒˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**
**æ¦‚è¦**: å®¢å®¤çŠ¶æ³ã®ä¸€è¦§è¡¨ç¤ºã¨ã‚¯ã‚¤ãƒƒã‚¯æ“ä½œ

**ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç”»é¢**:
```vue
<template>
  <div class="front-desk-dashboard">
    <h1>ãƒ•ãƒ­ãƒ³ãƒˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
    
    <!-- ã‚µãƒãƒªãƒ¼æƒ…å ± -->
    <div class="summary-cards">
      <div class="card">
        <h3>åˆ©ç”¨å¯èƒ½</h3>
        <span class="count">{{ availableRooms.length }}</span>
      </div>
      <div class="card">
        <h3>åˆ©ç”¨ä¸­</h3>
        <span class="count">{{ occupiedRooms.length }}</span>
      </div>
      <div class="card">
        <h3>ç²¾ç®—æ¸ˆã¿</h3>
        <span class="count">{{ checkoutPendingRooms.length }}</span>
      </div>
    </div>
    
    <!-- å®¢å®¤ä¸€è¦§ -->
    <div class="room-grid">
      <div 
        v-for="room in allRooms" 
        :key="room.roomId"
        :class="getRoomStatusClass(room.status)"
        class="room-card"
      >
        <div class="room-number">{{ room.roomId }}</div>
        <div class="room-status">{{ getStatusLabel(room.status) }}</div>
        <div v-if="room.checkinAt" class="checkin-time">
          {{ formatTime(room.checkinAt) }}ã€œ
        </div>
        
        <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ ãƒœã‚¿ãƒ³ -->
        <div class="room-actions">
          <button 
            v-if="room.status === 'available'"
            @click="checkin(room.roomId)"
            class="btn-checkin"
          >
            ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³
          </button>
          <button 
            v-if="room.status === 'occupied'"
            @click="showBilling(room.roomId)"
            class="btn-billing"
          >
            ä¼šè¨ˆ
          </button>
          <button 
            v-if="room.status === 'checkout_pending'"
            @click="checkout(room.roomId)"
            class="btn-checkout"
          >
            ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
          </button>
        </div>
      </div>
    </div>
  </div>
</template>
```

**å—å…¥æ¡ä»¶**:
- [ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å®¢å®¤çŠ¶æ…‹è¡¨ç¤º
- [ ] ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³
- [ ] çŠ¶æ…‹åˆ¥ã®è‰²åˆ†ã‘è¡¨ç¤º

## ğŸ”§ æŠ€è¡“ä»•æ§˜

### **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**

```sql
-- å®¢å®¤çŠ¶æ…‹ç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
CREATE TABLE RoomStatus (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    roomId TEXT UNIQUE NOT NULL,
    status TEXT NOT NULL DEFAULT 'available',
    checkinAt DATETIME,
    checkoutAt DATETIME,
    guestCount INTEGER,
    createdAt DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updatedAt DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ
CREATE INDEX idx_room_status ON RoomStatus(status);
CREATE INDEX idx_room_id ON RoomStatus(roomId);

-- é ˜åæ›¸ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
CREATE TABLE Receipt (
    id TEXT PRIMARY KEY,
    roomId TEXT NOT NULL,
    receiptData JSON NOT NULL,
    createdAt DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    isDeleted BOOLEAN NOT NULL DEFAULT FALSE
);

CREATE INDEX idx_receipt_room ON Receipt(roomId);
CREATE INDEX idx_receipt_created ON Receipt(createdAt);
```

### **API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§**

```typescript
// ãƒ•ãƒ­ãƒ³ãƒˆæ¥­å‹™ API
POST   /api/v1/admin/front-desk/checkin
GET    /api/v1/admin/front-desk/rooms          // å®¢å®¤çŠ¶æ…‹ä¸€è¦§
GET    /api/v1/admin/front-desk/billing/:roomId
POST   /api/v1/admin/front-desk/billing/:roomId/confirm
POST   /api/v1/admin/front-desk/checkout/:roomId

// é ˜åæ›¸ API
GET    /receipt/:receiptId                     // Webé ˜åæ›¸è¡¨ç¤º
GET    /api/v1/receipt/:receiptId/pdf          // PDF ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
```

### **ãƒ«ãƒ¼ãƒ ã‚µãƒ¼ãƒ“ã‚¹åˆ¶é™å®Ÿè£…**

```typescript
// server/middleware/room-status-check.ts
export default defineEventHandler(async (event) => {
  // ãƒ«ãƒ¼ãƒ ã‚µãƒ¼ãƒ“ã‚¹ API ã®å ´åˆã®ã¿ãƒã‚§ãƒƒã‚¯
  if (!event.node.req.url?.startsWith('/api/v1/orders') && 
      !event.node.req.url?.startsWith('/api/v1/cart')) {
    return;
  }
  
  const session = await getServerSession(event);
  if (!session?.user?.roomNumber) return;
  
  // å®¢å®¤çŠ¶æ…‹ç¢ºèª
  const roomStatus = await prisma.roomStatus.findUnique({
    where: { roomId: session.user.roomNumber }
  });
  
  if (!roomStatus || roomStatus.status !== 'occupied') {
    throw createError({
      statusCode: 403,
      message: 'ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆæ¸ˆã¿ã®å®¢å®¤ã§ã¯ãƒ«ãƒ¼ãƒ ã‚µãƒ¼ãƒ“ã‚¹ã‚’ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã›ã‚“'
    });
  }
});
```

## ğŸ“ˆ å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º

### **Phase 1: åŸºç›¤æ§‹ç¯‰ (2-3é€±é–“)**
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] åŸºæœ¬APIå®Ÿè£…
- [ ] å®¢å®¤çŠ¶æ…‹ç®¡ç†æ©Ÿèƒ½

### **Phase 2: ä¼šè¨ˆãƒ»é ˜åæ›¸ (2-3é€±é–“)**
- [ ] ä¼šè¨ˆå‡¦ç†æ©Ÿèƒ½
- [ ] Webé ˜åæ›¸ã‚·ã‚¹ãƒ†ãƒ 
- [ ] QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ»è¡¨ç¤º

### **Phase 3: ãƒ•ãƒ­ãƒ³ãƒˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ (1-2é€±é–“)**
- [ ] å®¢å®¤çŠ¶æ³ä¸€è¦§
- [ ] ã‚¯ã‚¤ãƒƒã‚¯æ“ä½œæ©Ÿèƒ½
- [ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°

### **Phase 4: çµ±åˆãƒ»æœ€é©åŒ– (1é€±é–“)**
- [ ] ãƒ«ãƒ¼ãƒ ã‚µãƒ¼ãƒ“ã‚¹åˆ¶é™å®Ÿè£…
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–
- [ ] UI/UXæ”¹å–„

## ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### **å˜ä½“ãƒ†ã‚¹ãƒˆ**
- [ ] å®¢å®¤çŠ¶æ…‹é·ç§»ãƒ­ã‚¸ãƒƒã‚¯
- [ ] ä¼šè¨ˆè¨ˆç®—æ©Ÿèƒ½
- [ ] é ˜åæ›¸ç”Ÿæˆæ©Ÿèƒ½

### **çµ±åˆãƒ†ã‚¹ãƒˆ**
- [ ] ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ã€œãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆãƒ•ãƒ­ãƒ¼
- [ ] ãƒ«ãƒ¼ãƒ ã‚µãƒ¼ãƒ“ã‚¹åˆ¶é™æ©Ÿèƒ½
- [ ] æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®æ•´åˆæ€§

### **E2E ãƒ†ã‚¹ãƒˆ**
- [ ] ãƒ•ãƒ­ãƒ³ãƒˆã‚¹ã‚¿ãƒƒãƒ•æ¥­å‹™ãƒ•ãƒ­ãƒ¼
- [ ] QRã‚³ãƒ¼ãƒ‰é ˜åæ›¸ã‚·ã‚¹ãƒ†ãƒ 
- [ ] ãƒ¢ãƒã‚¤ãƒ«ç«¯æœ«ã§ã®æ“ä½œ

## ğŸ“Š æˆåŠŸæŒ‡æ¨™

### **æ¥­å‹™åŠ¹ç‡æŒ‡æ¨™**
- [ ] ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³å‡¦ç†æ™‚é–“ < 30ç§’
- [ ] ä¼šè¨ˆå‡¦ç†æ™‚é–“ < 1åˆ†
- [ ] ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆå‡¦ç†æ™‚é–“ < 15ç§’

### **ã‚·ã‚¹ãƒ†ãƒ æŒ‡æ¨™**
- [ ] API ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ < 200ms
- [ ] é ˜åæ›¸è¡¨ç¤ºé€Ÿåº¦ < 1ç§’
- [ ] ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒç‡ > 99.9%

### **ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£æŒ‡æ¨™**
- [ ] ãƒ•ãƒ­ãƒ³ãƒˆã‚¹ã‚¿ãƒƒãƒ•æº€è¶³åº¦ > 4.5/5
- [ ] æ“ä½œãƒŸã‚¹ç™ºç”Ÿç‡ < 1%
- [ ] ç ”ä¿®æ™‚é–“çŸ­ç¸® > 50%

---

## ğŸ“ é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [å•†å“åŸä¾¡ãƒ»åˆ©ç›Šåˆ†ææ©Ÿèƒ½è¦ä»¶å®šç¾©æ›¸](./COST_PROFIT_ANALYSIS.md)
- [çµ±è¨ˆãƒ»åˆ†ææ©Ÿèƒ½è¦ä»¶å®šç¾©æ›¸](../statistics/REQUIREMENTS.md)
- [æ³¨æ–‡ç®¡ç†æ©Ÿèƒ½ä»•æ§˜æ›¸](../order/ORDER_FLOW_SPEC.md)

**æ›´æ–°å±¥æ­´**
- 2024/XX/XX: åˆç‰ˆä½œæˆ
- 2024/XX/XX: é ˜åæ›¸æ©Ÿèƒ½è©³ç´°åŒ– 