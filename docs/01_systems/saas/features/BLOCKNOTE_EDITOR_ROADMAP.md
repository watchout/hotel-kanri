# BlockNoteエディタ拡張計画

## 概要

BlockNoteエディタを使用したTOPページエディタの実装が完了しました。現在はモックデータを使用していますが、hotel-common統合データベース変更申請が承認された後に、正式なデータベースを使用した実装に移行します。このドキュメントでは、データベース統合後の拡張計画について説明します。

## 現在の実装状況

- BlockNoteエディタの基本機能実装完了
- モックデータを使用したAPI実装完了
- テンプレート選択機能実装完了
- プレビュー機能実装完了
- 保存・公開機能実装完了

## データベース統合後の拡張計画

### 1. 履歴管理機能の強化

**目標**: ページ編集の履歴を詳細に管理し、過去のバージョンへの復元を可能にする

**実装計画**:
- `PageHistory`テーブルを活用した履歴一覧表示機能
- バージョン間の差分表示機能
- 特定バージョンへの復元機能
- 編集者情報の表示（`createdBy`フィールドを活用）

### 2. コンテンツブロックの拡張

**目標**: ホテル業務に特化したカスタムブロックを追加する

**実装計画**:
- 客室紹介ブロック（画像ギャラリー付き）
- 施設情報ブロック（営業時間、場所情報など）
- メニュー紹介ブロック（料理画像、価格表示）
- 予約ボタンブロック（予約システムへのリンク）
- キャンペーン告知ブロック（期間限定情報表示）

### 3. テンプレートシステムの強化

**目標**: より多様なテンプレートを提供し、カスタマイズ性を高める

**実装計画**:
- テンプレートのプレビュー機能強化
- テンプレートのカスタマイズ機能（色、フォント、レイアウト）
- テンプレートのインポート/エクスポート機能
- テンプレートカテゴリ分類（季節、イベント、客室タイプ別など）

### 4. マルチデバイス対応の強化

**目標**: 様々なデバイスでの表示最適化と編集機能の提供

**実装計画**:
- レスポンシブプレビュー機能（スマホ、タブレット、TV、デスクトップ）
- デバイス別コンテンツ表示制御機能
- デバイス特性に応じたUI自動最適化

### 5. AI支援機能の導入

**目標**: AIを活用したコンテンツ作成・編集支援機能の提供

**実装計画**:
- テキスト自動生成機能（ホテル紹介文、施設案内など）
- 画像配置最適化提案
- レイアウト改善提案
- 多言語翻訳連携（既存の多言語システムと連携）

### 6. 権限管理の強化

**目標**: きめ細かな編集権限管理を実現する

**実装計画**:
- ページ単位の編集権限設定
- 承認ワークフロー導入（下書き→レビュー→承認→公開）
- 役割ベースのアクセス制御（編集者、レビュアー、承認者、閲覧者）

### 7. 分析・最適化機能

**目標**: ページの効果測定と最適化を支援する機能の提供

**実装計画**:
- ページ閲覧統計連携
- ヒートマップ分析（クリック、スクロール）
- A/Bテスト機能
- パフォーマンス最適化提案

## 技術的な拡張

### 1. コードの最適化

- BlockNote React コンポーネントのVueラッパー改善
- パフォーマンス最適化（レンダリング、メモリ使用量）
- エラーハンドリング強化

### 2. APIの拡張

- GraphQL APIの導入検討（柔軟なデータ取得）
- バッチ操作API（複数ページの一括更新）
- 検索API強化（コンテンツ全文検索）

### 3. テスト強化

- 単体テストの拡充
- E2Eテストの導入
- パフォーマンステスト

## 実装優先順位

1. **第1フェーズ（データベース統合直後）**
   - 履歴管理機能の強化
   - テンプレートシステムの基本強化
   - コードの最適化

2. **第2フェーズ（1-2ヶ月後）**
   - コンテンツブロックの拡張（基本セット）
   - マルチデバイス対応の強化
   - 権限管理の基本機能

3. **第3フェーズ（3-6ヶ月後）**
   - AI支援機能の導入
   - 分析・最適化機能
   - 高度なコンテンツブロックの追加

## 結論

BlockNoteエディタを基盤としたTOPページ編集システムは、データベース統合後に本格的な機能拡張が可能になります。ユーザーフレンドリーなインターフェースと高度なカスタマイズ性を両立させ、ホテルスタッフが簡単に魅力的なTOPページを作成・管理できる環境を提供します。

上記の拡張計画は、ユーザーからのフィードバックや実際の利用状況に応じて適宜調整していくことを推奨します。
