---
title: インフォメーション機能開発チェックリスト
version: 1.0
date: 2025-01-27
---

# インフォメーション機能開発チェックリスト

## 🚨 開発前必須確認事項

### データベース変更時の確認
- [ ] 既存のOrderシステムテーブル構造を確認済み
- [ ] 新テーブル追加のみで既存テーブル変更なし
- [ ] 外部キー制約が既存データに影響しない
- [ ] インデックス追加が既存パフォーマンスに影響しない
- [ ] マイグレーション実行前にバックアップ取得済み

### API変更時の確認
- [ ] 既存APIエンドポイント一覧を確認済み
- [ ] 新規エンドポイントのみで既存API変更なし
- [ ] 名前空間が適切に分離されている（`/api/v1/info/*`）
- [ ] 既存の認証・権限システムとの整合性確認済み
- [ ] CORS設定が既存システムに影響しない

### 共通機能変更時の確認
- [ ] 既存のファイルアップロード機能への影響なし
- [ ] 既存の多言語対応機能との整合性確認済み
- [ ] 認証・セッション管理への影響なし
- [ ] ミドルウェアの変更が既存ルートに影響しない

### 依存関係変更時の確認
- [ ] 既存パッケージのバージョン固定維持
- [ ] 新規パッケージ追加のみで既存パッケージ変更なし
- [ ] package.jsonの変更前にバックアップ取得済み
- [ ] 新規依存関係が既存機能に干渉しない

## 📝 実装フェーズ別チェックリスト

### フェーズ1: MVP基盤構築
#### データベース設計
- [ ] InfoArticleテーブル作成
- [ ] InfoMediaFileテーブル作成
- [ ] InfoTranslationテーブル作成（将来対応）
- [ ] InfoRevisionテーブル作成（将来対応）
- [ ] 適切なインデックス設定
- [ ] 既存データベースとの整合性確認

#### 基本UI実装
- [ ] 客室UI：情報一覧ページ（`/info`）
- [ ] 客室UI：情報詳細ページ（`/info/[slug]`）
- [ ] 5カテゴリ対応の表示機能
- [ ] レスポンシブ対応
- [ ] 既存UIとの一貫性維持

#### 基本API実装
- [ ] `GET /api/v1/info` - 記事一覧取得
- [ ] `GET /api/v1/info/[slug]` - 記事詳細取得
- [ ] 表示期間制御機能（startAt/endAt）
- [ ] エラーハンドリング
- [ ] 既存APIとの名前空間分離

### フェーズ2: 管理機能強化
#### CMS機能
- [ ] 管理画面：記事作成ページ
- [ ] 管理画面：記事編集ページ
- [ ] 管理画面：記事一覧・削除機能
- [ ] ドラッグ&ドロップエディタ統合
- [ ] プレビュー機能
- [ ] 既存管理画面との統合

#### ファイル管理
- [ ] 画像アップロード機能
- [ ] 動画アップロード機能
- [ ] ファイルサイズ制限（画像5MB、動画50MB）
- [ ] 自動リサイズ・圧縮機能
- [ ] ローカルストレージ保存（`/uploads/info/`）
- [ ] 既存アップロード機能との分離

#### 権限・承認システム
- [ ] 権限管理（支配人/フロント/キッチン）
- [ ] 承認ワークフロー（支配人承認）
- [ ] 編集ロック機能
- [ ] 版数管理機能
- [ ] 既存権限システムとの整合性

### フェーズ3: 多言語・連携機能
#### 翻訳機能
- [ ] DeepL API統合
- [ ] OpenAI翻訳フォールバック
- [ ] 翻訳品質管理機能
- [ ] 多言語表示切替
- [ ] 既存多言語機能との統合

#### システム連携
- [ ] オーダーシステムとの連携
- [ ] AIコンシェルジュとの情報共有
- [ ] キャッシュ機能実装
- [ ] パフォーマンス最適化
- [ ] 既存システムへの影響確認

## 🧪 テスト実行チェックリスト

### 単体テスト
- [ ] データベースモデルのテスト
- [ ] API エンドポイントのテスト
- [ ] ファイルアップロード機能のテスト
- [ ] 権限管理機能のテスト
- [ ] 翻訳機能のテスト

### 統合テスト
- [ ] 既存オーダー機能との統合テスト
- [ ] 認証・権限システムとの統合テスト
- [ ] ファイル管理機能の統合テスト
- [ ] データベース整合性テスト

### E2Eテスト
- [ ] 客室UI：情報閲覧フロー
- [ ] 管理画面：記事作成・編集フロー
- [ ] 権限別アクセステスト
- [ ] マルチブラウザ対応テスト
- [ ] モバイル端末対応テスト

### パフォーマンステスト
- [ ] ページロード時間（< 3秒）
- [ ] API応答時間（< 150ms）
- [ ] 同時接続テスト（30〜200室）
- [ ] ファイルアップロード負荷テスト

## 🚀 デプロイ前チェックリスト

### セキュリティチェック
- [ ] HTMLサニタイゼーション機能
- [ ] XSS対策実装
- [ ] CSRF対策実装
- [ ] ファイルアップロードセキュリティ
- [ ] 権限エスカレーション防止

### パフォーマンスチェック
- [ ] 画像・動画最適化機能
- [ ] キャッシュ機能動作確認
- [ ] データベースクエリ最適化
- [ ] メモリ使用量確認

### 運用準備
- [ ] バックアップ機能動作確認
- [ ] ログ機能実装
- [ ] エラー監視設定
- [ ] 運用マニュアル作成

## 🔄 継続的確認事項

### 日次確認
- [ ] 既存オーダー機能の動作確認
- [ ] 新機能のエラーログ確認
- [ ] パフォーマンス指標確認

### 週次確認
- [ ] データベース整合性確認
- [ ] バックアップデータ確認
- [ ] セキュリティログ確認

### 月次確認
- [ ] 利用統計レポート確認
- [ ] パフォーマンス最適化検討
- [ ] 機能改善要望の整理

## 📞 エスカレーション

### 即座に確認が必要な変更
1. **データベーススキーマ変更**
   - 既存テーブルのカラム追加・変更・削除
   - インデックスの変更
   - 外部キー制約の変更

2. **共通API・ミドルウェア変更**
   - 認証システムの変更
   - エラーハンドリングの変更
   - CORS設定の変更

3. **依存関係の大幅変更**
   - メジャーバージョンアップ
   - 新しいフレームワーク・ライブラリの導入
   - Node.js バージョン変更

### 確認手順
1. 変更内容の詳細説明
2. 影響範囲の分析結果
3. テスト計画の提示
4. ロールバック計画の準備
5. 承認後に実行

---

**注意**: このチェックリストは開発の各段階で必ず参照し、既存システムへの影響を最小限に抑えながら安全な開発を進めてください。