# 開発フロー基本ルール

## 基本原則

1. **ソースコード変更の流れ**
   - すべての変更はローカル環境から始まる
   - 変更はバージョン管理システムを通じて追跡される
   - 開発環境へのデプロイは常にCI/CDパイプラインを通じて行う

2. **環境間の一貫性**
   - ローカル環境と開発環境の設定は可能な限り一致させる
   - 環境差異は明確に文書化し、最小限に抑える
   - 環境依存の問題は根本的に解決し、一時的な回避策に頼らない

## 禁止事項

1. **開発サーバーへの直接変更の禁止**
   - 開発サーバー上のコードを直接編集しない
   - 設定ファイルの直接変更を避ける
   - サーバー上での実験的な変更を行わない

2. **デプロイフローの迂回禁止**
   - CI/CDパイプラインを迂回したデプロイを行わない
   - 手動でのファイル転送（SCP等）によるデプロイを避ける
   - ホットフィックスであっても正規のデプロイフローを使用する

3. **未文書化の変更の禁止**
   - すべての変更は適切にコミットメッセージに記録する
   - 重要な変更はプルリクエストで詳細に説明する
   - 設定変更は必ずドキュメントに反映する

## 緊急対応時のルール

緊急時に限り、以下の条件を満たす場合のみ例外的に開発サーバーへの直接変更を許可する：

1. **事前承認**
   - チームリーダーまたは技術責任者の承認を得る
   - 変更内容と理由を明確に説明する

2. **変更の記録**
   - 変更したファイル、内容、日時を詳細に記録する
   - 変更ログを作成し、チームに共有する

3. **事後対応**
   - 緊急対応後、48時間以内にリポジトリに変更を反映させる
   - 根本原因分析を行い、再発防止策を講じる
   - 緊急対応報告書を作成する

## デプロイ前チェックリスト

デプロイ前に以下の項目を確認する：

1. **環境依存の確認**
   - Node.jsバージョンの互換性
   - 依存パッケージのバージョン競合
   - 環境変数の設定

2. **ビルド検証**
   - ローカルでのビルド成功確認
   - テストの実行と合格
   - リンターエラーの解消

3. **変更内容の確認**
   - コミットの整理（スカッシュ等）
   - コミットメッセージの明確さ
   - 不要なファイルの除外

## 再発防止のための取り組み

1. **定期的なレビュー**
   - 開発プロセスの定期的な振り返り
   - ルール遵守状況の確認
   - 改善点の特定と実施

2. **自動化の推進**
   - デプロイプロセスの完全自動化
   - 環境差異の自動検出
   - 設定の一元管理

3. **教育と共有**
   - 新メンバーへの開発フロー教育
   - ベストプラクティスの共有
   - 失敗事例からの学習と共有
