# EPAï¼ˆEvidenceâ†’Planâ†’Actï¼‰ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

**æœ€çµ‚æ›´æ–°**: 2025-10-21  
**å¯¾è±¡**: å…¨é–‹ç™ºè€…ãƒ»AI  
**å‚ç…§æ–¹æ³•**: `ripgrep MCP` ã¾ãŸã¯ `/read-quote`

---

## ğŸ¯ EPAã¨ã¯ï¼Ÿ

**Evidenceï¼ˆè¨¼æ‹ ï¼‰â†’ Planï¼ˆè¨ˆç”»ï¼‰â†’ Actï¼ˆå®Ÿè¡Œï¼‰** ã®3æ®µéšã§é€²ã‚ã‚‹é–‹ç™ºæ‰‹æ³•ã€‚

**ç›®çš„ï¼š**
- ãƒãƒ«ã‚·ãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå¹»è¦šï¼‰é˜²æ­¢
- ä»•æ§˜é€¸è„±ã‚¼ãƒ­
- å®Ÿè£…å‰ã®åˆæ„å½¢æˆ

---

## ğŸ“Š EPAãƒ•ãƒ­ãƒ¼å…¨ä½“å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 0: ã‚¿ã‚¹ã‚¯é¸æŠ                                        â”‚
â”‚   /pick-task â†’ Task: <alias> ã‚’ç¢ºå®š                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: Evidenceï¼ˆè¨¼æ‹ åé›†ï¼‰ â˜…æœ€é‡è¦                      â”‚
â”‚                                                           â”‚
â”‚   å¿…é ˆ3è¦ç´ :                                              â”‚
â”‚   1. SSOTå¼•ç”¨ï¼ˆä»•æ§˜ã®æ ¹æ‹ ï¼‰                               â”‚
â”‚   2. æ—¢å­˜å®Ÿè£…å¼•ç”¨ï¼ˆç¾çŠ¶æŠŠæ¡ï¼‰                             â”‚
â”‚   3. ã‚¹ã‚­ãƒ¼ãƒå¼•ç”¨ï¼ˆDBæ§‹é€ ï¼‰                               â”‚
â”‚                                                           â”‚
â”‚   å‡ºåŠ›å½¢å¼:                                               â”‚
â”‚   - è¦ç‚¹3ã¤ï¼ˆå„1è¡Œï¼‰                                      â”‚
â”‚   - å¼•ç”¨ï¼ˆãƒ‘ã‚¹#Lè¡Œç•ªå·ï¼‰                                  â”‚
â”‚   - æœ€å¤§5è¡Œ                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: Planï¼ˆè¨ˆç”»æç¤ºï¼‰                                  â”‚
â”‚                                                           â”‚
â”‚   ãƒ«ãƒ¼ãƒ«:                                                 â”‚
â”‚   - æœ€å¤§5ã‚¹ãƒ†ãƒƒãƒ—                                         â”‚
â”‚   - å…·ä½“çš„ãªä½œæ¥­å†…å®¹                                      â”‚
â”‚   - å·¥æ•°è¦‹ç©ã‚‚ã‚Šï¼ˆæ™‚é–“ï¼‰                                  â”‚
â”‚                                                           â”‚
â”‚   ä¾‹:                                                     â”‚
â”‚   1. æ—¢å­˜ãƒ«ãƒ¼ãƒˆ/ãƒãƒªãƒ‡ãƒ¼ã‚¿æŠŠæ¡ï¼ˆ15åˆ†ï¼‰                    â”‚
â”‚   2. 201/400/409åˆ†å²å®Ÿè£…ï¼ˆ30åˆ†ï¼‰                         â”‚
â”‚   3. ãƒ†ã‚¹ãƒˆè¿½åŠ ï¼ˆ20åˆ†ï¼‰                                   â”‚
â”‚   4. APIãƒ‰ã‚­ãƒ¥æ›´æ–°ï¼ˆ10åˆ†ï¼‰                                â”‚
â”‚   5. CIç¢ºèªï¼ˆ5åˆ†ï¼‰                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: Askï¼ˆæ‰¿èªä¾é ¼ï¼‰ â¸ï¸                                â”‚
â”‚                                                           â”‚
â”‚   å¿…ãšå¾…ã¤:                                               â”‚
â”‚   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ‰¿èª                                        â”‚
â”‚   - ã¾ãŸã¯é¸æŠè‚¢A/Bã®å›ç­”                                 â”‚
â”‚                                                           â”‚
â”‚   âŒ ç¦æ­¢: æ‰¿èªå‰ã«å®Ÿè£…é–‹å§‹                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
                  ãƒ¦ãƒ¼ã‚¶ãƒ¼æ‰¿èª
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 4: Actï¼ˆå®Ÿè£…ï¼‰                                       â”‚
â”‚                                                           â”‚
â”‚   æ—¢å®š: Diff only                                         â”‚
â”‚   - Unified Diffå½¢å¼                                      â”‚
â”‚   - èª¬æ˜ãƒ»ä½™è«‡ãªã—                                        â”‚
â”‚   - ãƒ†ã‚¹ãƒˆã‚‚å«ã‚€                                          â”‚
â”‚                                                           â”‚
â”‚   ä¾‹å¤–: SSOTä½œæˆæ™‚ã¯å…¨æ–‡å‡ºåŠ›                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 5: Test & PR                                        â”‚
â”‚                                                           â”‚
â”‚   1. ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ                                   â”‚
â”‚   2. CIæˆåŠŸç¢ºèª                                           â”‚
â”‚   3. PRãƒ†ãƒ³ãƒ—ãƒ¬ã«Evidenceè¨˜å…¥                             â”‚
â”‚   4. ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ Evidenceåé›†ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### âœ… å¿…é ˆ3è¦ç´ 

```markdown
1. SSOTå¼•ç”¨ï¼ˆä»•æ§˜ã®æ ¹æ‹ ï¼‰
   - ã©ã“ã«: docs/03_ssot/**/*.md
   - ä½•ã‚’: è©²å½“æ©Ÿèƒ½ã®è¦ä»¶ãƒ»Accept
   - å½¢å¼: ãƒ‘ã‚¹#Lè¡Œç•ªå·

2. æ—¢å­˜å®Ÿè£…å¼•ç”¨ï¼ˆç¾çŠ¶æŠŠæ¡ï¼‰
   - ã©ã“ã«: apps/*/server/api, composables, etc
   - ä½•ã‚’: é–¢é€£ã™ã‚‹é–¢æ•°ãƒ»å‹ãƒ»ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
   - å½¢å¼: ãƒ‘ã‚¹#Lè¡Œç•ªå·

3. ã‚¹ã‚­ãƒ¼ãƒå¼•ç”¨ï¼ˆDBæ§‹é€ ï¼‰
   - ã©ã“ã«: prisma/schema.prisma
   - ä½•ã‚’: è©²å½“ãƒ¢ãƒ‡ãƒ«ãƒ»ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒ»åˆ¶ç´„
   - å½¢å¼: ãƒ‘ã‚¹#Lè¡Œç•ªå·
```

### âŒ ã‚ˆãã‚ã‚‹é–“é•ã„

```markdown
âŒ é–“é•ã„1: ã€Œç¢ºèªã—ã¾ã—ãŸã€ï¼ˆç¢ºèªã—ã¦ã„ãªã„ï¼‰
âŒ é–“é•ã„2: ãƒ‘ã‚¹æŒ‡å®šãªã—ï¼ˆå¼•ç”¨ãªã—ï¼‰
âŒ é–“é•ã„3: è¡Œç•ªå·ãªã—ï¼ˆæ¤œè¨¼ä¸å¯èƒ½ï¼‰
âŒ é–“é•ã„4: è¦ç´„ã®ã¿ï¼ˆåŸæ–‡å¼•ç”¨ãªã—ï¼‰

âœ… æ­£ã—ã„ä¾‹:
1. SSOT #roles-create: Roleä½œæˆã¯POST /api/rolesã€nameå¿…é ˆã€ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„
   docs/SSOT_SAAS_PERMISSION_SYSTEM.md#L45-L52
   > POST /api/roles ã§Roleä½œæˆã€‚nameã¯å¿…é ˆã§ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ã€‚
```

---

## ğŸ¯ Planä½œæˆã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### âœ… å¿…é ˆè¦ç´ 

```markdown
1. å…·ä½“çš„ãªã‚¹ãƒ†ãƒƒãƒ—ï¼ˆâ‰¤5ï¼‰
2. å„ã‚¹ãƒ†ãƒƒãƒ—ã®å·¥æ•°è¦‹ç©ã‚‚ã‚Š
3. ä¾å­˜é–¢ä¿‚ã®æ˜è¨˜
4. ãƒªã‚¹ã‚¯ã®åˆ—æŒ™
```

### ä¾‹ï¼šè‰¯ã„Plan

```markdown
Plan:
1. æ—¢å­˜ãƒ«ãƒ¼ãƒˆ/ãƒãƒªãƒ‡ãƒ¼ã‚¿æŠŠæ¡ï¼ˆ15åˆ†ï¼‰
   - apps/server/src/routes/roles.ts ç¢ºèª
   - yup schema ãƒ‘ã‚¿ãƒ¼ãƒ³ç¢ºèª
2. POST /api/roles å®Ÿè£…ï¼ˆ30åˆ†ï¼‰
   - ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ 
   - Prisma create å®Ÿè¡Œ
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆP2002ï¼‰
3. ãƒ†ã‚¹ãƒˆè¿½åŠ ï¼ˆ20åˆ†ï¼‰
   - æ­£å¸¸ç³»: 201è¿”å´
   - ç•°å¸¸ç³»: 409è¿”å´ï¼ˆé‡è¤‡ï¼‰
4. APIãƒ‰ã‚­ãƒ¥æ›´æ–°ï¼ˆ10åˆ†ï¼‰
   - docs/api/roles.md ã« POSTè¿½åŠ 
5. CIç¢ºèªï¼ˆ5åˆ†ï¼‰

åˆè¨ˆ: 1æ™‚é–“20åˆ†
```

### âŒ æ‚ªã„Plan

```markdown
Plan:
1. å®Ÿè£…ã™ã‚‹
2. ãƒ†ã‚¹ãƒˆã™ã‚‹
3. å®Œäº†

ï¼ˆå…·ä½“æ€§ã‚¼ãƒ­ã€å·¥æ•°ä¸æ˜ï¼‰
```

---

## â¸ï¸  Askï¼ˆæ‰¿èªå¾…ã¡ï¼‰ã®ãƒ«ãƒ¼ãƒ«

### âœ… å¿…é ˆ

```markdown
- å¿…ãšã€Œæ‰¿èªãŠé¡˜ã„ã—ã¾ã™ã€ã¨æ˜ç¤º
- ã¾ãŸã¯é¸æŠè‚¢A/Bã‚’æç¤º
- æ‰¿èªå‰ã«å®Ÿè£…é–‹å§‹ã¯çµ¶å¯¾ç¦æ­¢
```

### ä¾‹ï¼šè‰¯ã„Ask

```markdown
Ask:
ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã‚’é¸æŠã—ã¦ãã ã•ã„ï¼š

A) Diff only ã§å®Ÿè£…é–‹å§‹
B) è©³ç´°èª¬æ˜ä»˜ãã§å®Ÿè£…é–‹å§‹
C) Planå†æ¤œè¨

ã¾ãŸã¯ã€ŒOKã€‚Diff onlyã€ã¨è¿”ä¿¡ã—ã¦ãã ã•ã„ã€‚
```

---

## ğŸš€ Actï¼ˆå®Ÿè£…ï¼‰ã®ãƒ«ãƒ¼ãƒ«

### âœ… åŸºæœ¬ãƒ«ãƒ¼ãƒ«

```markdown
æ—¢å®š: Diff only
- Unified Diffå½¢å¼
- èª¬æ˜ãƒ»ä½™è«‡ãªã—
- ãƒ†ã‚¹ãƒˆã‚‚å«ã‚€

ä¾‹å¤–: SSOTä½œæˆæ™‚ã¯å…¨æ–‡å‡ºåŠ›
```

### ä¾‹ï¼šDiff onlyå‡ºåŠ›

```diff
--- a/apps/server/src/routes/roles.ts
+++ b/apps/server/src/routes/roles.ts
@@ -10,6 +10,15 @@
 router.get('/', async (req, res) => {
   // æ—¢å­˜ã®GETå®Ÿè£…
 });
+
+router.post('/', async (req, res) => {
+  const { name } = req.body;
+  const role = await prisma.role.create({ data: { name } });
+  res.status(201).json(role);
+});

--- a/apps/server/test/roles.create.spec.ts
+++ b/apps/server/test/roles.create.spec.ts
ï¼ˆãƒ†ã‚¹ãƒˆå·®åˆ†ï¼‰
```

---

## ğŸ“Š ã‚·ãƒ¼ãƒ³åˆ¥EPAãƒ‘ã‚¿ãƒ¼ãƒ³

### ğŸ› ãƒã‚°ä¿®æ­£ï¼ˆb1ï¼‰ã®EPA

```markdown
Evidence:
1. SSOT #tenant-isolation: å…¨ã‚¯ã‚¨ãƒªã«tenant_idå¿…é ˆ
2. ãƒã‚°ã‚³ãƒ¼ãƒ‰: WHEREå¥ã«tenantIdãƒ•ã‚£ãƒ«ã‚¿æ¬ è½
3. æ­£ã—ã„å®Ÿè£…ä¾‹: ä»–APIã§ã¯tenantIdä½¿ç”¨æ¸ˆã¿

Plan:
1. ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‹ã‚‰tenantIdå–å¾—ãƒ­ã‚¸ãƒƒã‚¯è¿½åŠ 
2. WHEREå¥ã«tenantIdãƒ•ã‚£ãƒ«ã‚¿è¿½åŠ 
3. å†ç¾ãƒ†ã‚¹ãƒˆä½œæˆ
4. ä»–APIæ¨ªå±•é–‹ãƒã‚§ãƒƒã‚¯
5. CIç¢ºèª

Ask: æ‰¿èªãŠé¡˜ã„ã—ã¾ã™ã€‚
```

### ğŸ”§ ãƒªãƒ•ã‚¡ã‚¯ã‚¿ï¼ˆf1ï¼‰ã®EPA

```markdown
Evidence:
1. é‡è¤‡ã‚³ãƒ¼ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆ3ç®‡æ‰€å¼•ç”¨ï¼‰
2. æ—¢å­˜ãƒ†ã‚¹ãƒˆæˆåŠŸçµæœï¼ˆ250 tests passedï¼‰
3. å…±é€šåŒ–å¾Œã®å·®åˆ†è¦‹ç©ã‚‚ã‚Šï¼ˆ90è¡Œå‰Šæ¸›ï¼‰

Plan:
1. å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ä½œæˆï¼‹å˜ä½“ãƒ†ã‚¹ãƒˆ
2. æ—¢å­˜ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆBeforeï¼‰
3. 20ç®‡æ‰€ã‚’5ç®‡æ‰€ãšã¤ç½®æ›ï¼‹ãƒ†ã‚¹ãƒˆ
4. å…¨ç½®æ›å¾Œãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆAfterï¼‰
5. Before/Afterçµæœæ¯”è¼ƒ

Ask: æŒ¯ã‚‹èˆã„ä¸å¤‰ã§ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ
```

---

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- **EPAé‹ç”¨ã‚¬ãƒ¼ãƒ‰**: `.cursor/rules/00-guardrails.md`
- **TaskCardåˆ©ç”¨ã‚¬ã‚¤ãƒ‰**: `.cursor/reference/taskcard-usage-guide.md`
- **ã‚³ãƒãƒ³ãƒ‰ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹**: `.cursor/reference/commands-reference.md`
