#!/bin/sh
# QOS v1 pre-commit: spectral & semgrep
if command -v npx >/dev/null 2>&1; then
  npx @stoplight/spectral-cli lint docs/03_ssot/openapi/staff-management.yaml || exit 1
  [ -f docs/03_ssot/openapi/generic-resources.yaml ] && npx @stoplight/spectral-cli lint docs/03_ssot/openapi/generic-resources.yaml || true
fi
if command -v semgrep >/dev/null 2>&1; then
  semgrep --config .semgrep.yml || exit 1
else
  echo "âš  semgrep not found; skipping"
fi
